<div class="panel-body fullStretch">
  <!-- <div class="modal fade" id="myModal" role="dialog">
          <div class="modal-dialog">
          
            
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Modal Header</h4>
              </div>
              <div class="modal-body">
                  <div class="col-md-4">
                      <div class="form-group">
                          <select class="form-control" v-model="guestInfo.SourceId" @change="GetSubSourceList(guestInfo.SourceId)" style="margin: -5px 0;">
                            <option v-for="source in sourceList" v-bind:value="source.sourceID">{{source.sourceName}}</option>
                          </select>
                      </div>
                      <div class="form-group">
                          <select class="form-control" v-model="guestInfo.SubSourceId" @change="getSubSourceName(guestInfo.SubSourceId)" style="margin: -5px 0;">
                            <option v-for="subSource in subSourceList" v-bind:value="subSource.SubSourceId">{{subSource.SubSourceName}}</option>
                          </select>
                      </div>
                    <div class="form-group">
                      <input type="text" class="form-control" v-model="guestInfo.ReservationNumber"
                        :class="{'input': true, 'is-danger': errors.has('irstName') }" :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
                        v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) ">
        
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-control" v-model="guestInfo.CrsConfirmationNumber"
                          :class="{'input': true, 'is-danger': errors.has('irstName') }" :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
                          v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) ">
          
                      </div>
                  </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <button type="button" @click="Save_SourceDetails">Save</button>
              </div>
            </div>
            
          </div>
        </div> -->
  <div class="modal fade invoice" id="invoiceToBePrinted" role="dialog" style="display: none">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <div class="header-content d-flex">
            <div class="header-items">
              <select class="form-control customSelectOpt" @change="getFolioInvoice($event.target.value)"
                v-model="DetailedOrConsolidated">
                <!-- <option value="guestInfo.DefaultInvoiceType">{{guestInfo.DefaultInvoiceType == 1 ? 'Reservation Invoice' : 'Summarized Invoice'}}</option> -->
                <option value="1" data-toggle="modal" data-target="#invoiceToBePrinted" @click="getFolioInvoice(1)">
                  Reservation Invoice</option>
                <option value="2" data-toggle="modal" data-target="#invoiceToBePrinted" @click="getFolioInvoice(2)">
                  Summarized Invoice</option>
                <option value="3" data-toggle="modal" data-target="#invoiceToBePrinted" @click="getFolioInvoice(3)">
                  Reservation Invoice With Date Range</option>
                <!-- <option v-for="balanceTransfer in invoiceList" :value="balanceTransfer.ItemId">{{balanceTransfer.QuickbookInvoiceNo && balanceTransfer.QuickbookInvoiceNo != null ? balanceTransfer.QuickbookInvoiceNo : balanceTransfer.InvoiceNo}}</option>             -->
              </select>

              <div class="invoiceDetails">
                <span class="invoiceID">
                  {{invoiceDetails && invoiceDetails.reservationDetail &&
                  invoiceDetails.reservationDetail.ConfirmationNumber}}
                </span>
                <div>
                  <span v-if="invoiceDetails.reservationDetail && invoiceDetails.reservationDetail.GuestFirstName"
                    style="font-size: 15px;">{{invoiceDetails.reservationDetail.GuestFirstName}}</span>
                  <span v-if="invoiceDetails.reservationDetail && invoiceDetails.reservationDetail.GuestLastName"
                    style="font-size: 15px;">{{invoiceDetails.reservationDetail.GuestLastName}}</span>
                  - <span v-if="invoiceDetails.reservationDetail && invoiceDetails.reservationDetail.CheckInDate"
                    style="font-size: 15px;">{{formatInvoiceUtcDate(invoiceDetails.reservationDetail.CheckInDate)}}</span>
                  to <span v-if="invoiceDetails.reservationDetail && invoiceDetails.reservationDetail.CheckOut"
                    style="font-size: 15px;">{{formatInvoiceUtcDate(invoiceDetails.reservationDetail.CheckOut)}}</span>
                </div>
              </div>
              <div class="d-flex justify-content-end">
                <div class="toggleBtns">
                  <button class="btn btn-default dropdown-toggle" v-if="additionalEmails.length > 1"
                    data-toggle="dropdown"><i aria-hidden="true" class="far fa-paper-plane"></i></button>
                  <button class="btn btn-default" v-else @click="sharePdf"><i aria-hidden="true"
                      class="far fa-paper-plane"></i></button>

                  <button class="btn btn-default" @click="pdfDownload(guestInfo.ReservationId)"><i aria-hidden="true"
                      class="far fa-download"></i></button>
                  <ul id="invoiceDropDown" class="invoice dropdown-menu" v-if="additionalEmails.length > 1">
                    <li class="heading">Email Chooser</li>
                    <li v-for="list in additionalEmails" :title="list.Emailaddress" @click="propagation($event)"
                      v-if="list.Emailaddress">
                      <label class="checkLabel">
                        <input type="checkbox" :value="list.Emailaddress" v-model="emailList" />
                        <span>{{list.Emailaddress}}</span>
                      </label>
                    </li>
                    <!-- <li> -->
                    <div class="inv-send-email-btns">
                      <button class="btn btn-blank-danger btn-sm" @click="closeEmailDropdown">Cancel</button>
                      <button class="btn btn-primary btn-sm" :disabled="emailList.length == 0"
                        @click="sendPdfEmail">Send</button>
                    </div>
                    <!-- </li> -->
                  </ul>
                </div>
                <!-- <i style="font-size:24px" @click="print('invoiceToBePrinted')" class="fal fa-pdf">&#xf02f;</i> -->

                <!-- <i v-if="additionalEmails.length > 1" class="fal fa-envelope dropdown-toggle" type="button" data-toggle="dropdown" style="font-size:24px;cursor: pointer;" aria-hidden="true"></i>
                    <i v-else class="fal fa-envelope" style="font-size:24px;cursor: pointer;" aria-hidden="true" @click="sharePdf"></i>
                    <i class="fal fa-download" style="font-size:24px;cursor: pointer;" @click="pdfDownload(guestInfo.ReservationId)"
                      aria-hidden="true"></i>                 
                    <ul id="invoiceDropDown" class="invoice dropdown-menu" v-if="additionalEmails.length > 1">
                      <li class="heading">Email Chooser</li>
                      <li v-for="list in additionalEmails" :title="list.Emailaddress" @click="propagation($event)" v-if="list.Emailaddress">
                        <label class="checkLabel">
                            <input type="checkbox" :value="list.Emailaddress" v-model="emailList"/>
                            <span>{{list.Emailaddress}}</span>
                        </label>
                      </li>
                     
                        <div class="inv-send-email-btns">
                        <button class="btn btn-blank-danger btn-sm" @click="closeEmailDropdown">Cancel</button>
                        <button class="btn btn-primary btn-sm" :disabled="emailList.length == 0" @click="sendPdfEmail">Send</button>
                        </div>
                      
                    </ul> -->

              </div>
            </div>
            <button type="button" class="close" data-dismiss="modal">&times;</button>
          </div>
        </div>
        <div class="modal-body" style="font-size: 14px; padding: 45px">
          <div class="row">
            <div class="col-md-12">
              <img
                v-if="invoiceDetails.clientDetail &&  invoiceDetails.clientDetail.ClientLogo !=='null' &&  invoiceDetails.clientDetail.ClientLogo !==''"
                class="invoiceImagePlace" :src="imageURLS(invoiceDetails.clientDetail.ClientLogo)" width="auto"
                height="100">
              <div class="pull-right" style="text-align: right;line-height: 1.2;position: relative;top: 13px;">
                <h5 class="mt-2 mb-0" v-if="invoiceDetails.clientDetail && invoiceDetails.clientDetail.ClientName"
                  style="font-family: 'calibri', sans-serif !important; font-size: 14pt;letter-spacing: 0.07px !important;">
                  {{invoiceDetails.clientDetail.ClientName}}</h5>
                <!-- <div style="font-size: 13px;"
                        v-if="invoiceDetails.clientDetail && invoiceDetails.clientDetail.PropertyName">{{invoiceDetails.clientDetail.PropertyName}}</div> -->
                <!-- <span style="font-size: 12px; line-height: 28px;" v-if="invoiceDetails.clientDetail && invoiceDetails.clientDetail.CityName !== undefined && invoiceDetails.clientDetail.CityName !== null"
                            class="countryNames">{{invoiceDetails.clientDetail.CityName}}, {{invoiceDetails.clientDetail.StateName}}</span>
                          <span style="font-size: 12px; line-height: 28px" v-else-if="invoiceDetails.clientDetail" class="countryNames">{{invoiceDetails.clientDetail.CountryName}}</span> -->
                <div style="font-size: 8.6pt; letter-spacing: 0.07px !important;"
                  v-if="invoiceDetails.clientDetail && invoiceDetails.clientDetail.ClientAddress">
                  {{invoiceDetails.clientDetail.ClientAddress}}</div>
                <div style="font-size: 8.6pt; letter-spacing: 0.07px !important;"
                  v-if="invoiceDetails.clientDetail && getClientAddress(invoiceDetails.clientDetail)"
                  v-html="getClientAddress(invoiceDetails.clientDetail)"></div>
                <div style="font-size: 8.6pt; letter-spacing: 0.07px !important;"
                  v-if="invoiceDetails.clientDetail && invoiceDetails.clientDetail.ClientCountry">
                  {{invoiceDetails.clientDetail.ClientCountry}}</div>
                <!-- <div style="font-size: 8.6pt; letter-spacing: 0.07px !important;"
                        v-if="invoiceDetails.clientDetail && invoiceDetails.clientDetail.ClientCity" class="">
                        {{invoiceDetails.clientDetail.ClientCity}} {{invoiceDetails.clientDetail.ClientState ? ', ' + invoiceDetails.clientDetail.ClientState : ''}}, {{invoiceDetails.clientDetail.ClientZipCode}}
                    </div> -->

                <!-- <div style="font-size: 8.6pt; letter-spacing: 0.07px !important;" v-else-if="invoiceDetails.clientDetail" class="">{{invoiceDetails.clientDetail.ClientCountry}}, {{invoiceDetails.clientDetail.ClientZipCode}}</div> -->
                <!-- <div style="font-size: 12px;" class="" v-if="invoiceDetails.clientDetail && invoiceDetails.clientDetail.ClientZipCode">{{invoiceDetails.clientDetail.ClientZipCode}}</div> -->
                <div style="font-size: 8.6pt; letter-spacing: 0.07px !important;" v-if="invoiceDetails.clientDetail">
                  {{invoiceDetails.clientDetail.ClientPhone}}
                </div>
                <!-- <div style="font-size: 8.6pt; letter-spacing: 0.07px !important;" v-if="invoiceDetails.clientDetail">
                        {{invoiceDetails.clientDetail.clientEmail}}
                      </div> -->

              </div>
            </div>

          </div>
          <div class="row">
            <div class="col-md-6 invo-client-info">
              <!-- <span style="font-size: 12px; ">Bill To:</span> -->

              <h5 v-if="invoiceDetails.reservationDetail && invoiceDetails.reservationDetail.GuestFirstName"
                style="font-weight: bold; font-size: 11pt;">{{invoiceDetails.reservationDetail.GuestFirstName}}</h5>
              <h5 v-if="invoiceDetails.reservationDetail && invoiceDetails.reservationDetail.GuestLastName"
                style="font-weight: bold; font-size: 11pt;">{{invoiceDetails.reservationDetail.GuestLastName}}</h5>
              <span v-if="invoiceDetails.reservationDetail && invoiceDetails.reservationDetail.GuestAddress"
                style="display: block;">{{invoiceDetails.reservationDetail.GuestAddress}}</span>

              <!-- <span v-if="invoiceDetails.reservationDetail && invoiceDetails.reservationDetail.CityName !== undefined && invoiceDetails.reservationDetail.CityName !== null"
                          class="countryNames">{{invoiceDetails.reservationDetail.CityName}}, {{invoiceDetails.reservationDetail.StateName}}</span>
                        <span v-else-if="invoiceDetails.reservationDetail" class="countryNames">{{invoiceDetails.reservationDetail.CountryName}}</span> -->

              <div>
                <span v-if="invoiceDetails.reservationDetail && getGuestAddress(invoiceDetails.reservationDetail)"
                  class="">{{getGuestAddress(invoiceDetails.reservationDetail)}}</span>
              </div>
              <span class=""
                v-if="invoiceDetails.reservationDetail && invoiceDetails.reservationDetail.CountryName">{{invoiceDetails.reservationDetail.CountryName}}</span>
            </div>
          </div>

          <div class="row invoStayInfo">
            <h5 class="sub-title">Stay Information</h5>
            <table class="invoice-stay-table" cellpadding="0" cellspacing="0">
              <tbody>
                <tr class="itr1">
                  <td class="c1 td-lh">Unit Booked</td>
                  <td class="c2 td-lh" v-if="invoiceDetails.clientDetail">:
                    {{invoiceDetails.clientDetail.PropertyNickname}} {{invoiceDetails.clientDetail.PropertyNickname &&
                    invoiceDetails.clientDetail.UnitNickname ? '-' : ''}} {{invoiceDetails.clientDetail.UnitNickname}}
                  </td>
                  <td class="c3 td-lh"></td>
                  <td class="c4 td-lh"></td>
                  <td class="c5 td-lh"></td>
                </tr>
                <tr class="itr1" v-if="invoiceDetails.clientDetail">
                  <td class="c1 td-lh">{{invoiceDetails.clientDetail.Address1 ? 'Property Address' : ''}}</td>
                  <td class="c2 td-lh" v-if="invoiceDetails.clientDetail">{{invoiceDetails.clientDetail.Address1 ? ': '
                    : ''}} {{invoiceDetails.clientDetail.Address1}}</td>
                  <td class="c3 td-lh"></td>
                  <td class="c4 td-lh">Reservation</td>
                  <td class="c5 td-lh" v-if="invoiceDetails.reservationDetail">:
                    {{invoiceDetails.reservationDetail.ConfirmationNumber}}</td>
                </tr>
                <tr class="itr2" v-if="invoiceDetails.clientDetail && getPropertyAddress(invoiceDetails.clientDetail)">
                  <td class="c1 td-lh">{{ !invoiceDetails.clientDetail.Address1 ? 'Property Address' : ''}}</td>
                  <td class="c2 tr2-c2-pl td-lh" v-if="invoiceDetails.clientDetail"
                    :style="{ 'padding-left': !invoiceDetails.clientDetail.Address1 ? '0px' : '7px' }">{{
                    !invoiceDetails.clientDetail.Address1 ? ': ' :
                    ''}}{{getPropertyAddress(invoiceDetails.clientDetail)}}</td>
                  <td class="c3 td-lh"></td>
                  <td class="c4 tr2-c4-va td-lh">Status</td>
                  <td class="c5 tr2-c5-va td-lh">: {{Reservation_Status.StatusName}}</td>
                </tr>
                <tr class="itr2 cancelled-on">
                  <td class="c1 td-lh">{{ invoiceDetails.clientDetail && !invoiceDetails.clientDetail.Address1 &&
                    !getPropertyAddress(invoiceDetails.clientDetail) ? 'Property Address' : ''}}</td>
                  <td class="c2 tr2-c2-pl td-lh"
                    v-if="invoiceDetails.clientDetail && invoiceDetails.clientDetail.countryName"
                    :style="{ 'padding-left': !invoiceDetails.clientDetail.Address1 && !getPropertyAddress(invoiceDetails.clientDetail) ? '0px' : '7px' }">
                    {{ !invoiceDetails.clientDetail.Address1 && !getPropertyAddress(invoiceDetails.clientDetail) ? ': '
                    : ''}}{{invoiceDetails.clientDetail.countryName}}</td>
                  <td class="c3 td-lh"></td>
                  <td class="c4 tr2-c4-va td-lh"
                    v-if="invoiceDetails.reservationDetail && Reservation_Status.StatusName ==  'Cancelled'">Cancelled
                    On</td>
                  <td class="c5 tr2-c5-va td-lh"
                    v-if="invoiceDetails.reservationDetail && Reservation_Status.StatusName ==  'Cancelled'">:
                    {{formatInvoiceUtcDate(invoiceDetails.reservationDetail.cancelleddate)}}</td>
                </tr>
                <tr class="itr3">
                  <td class="c1 itr3-td-pt td-lh">Arrival</td>
                  <td class="c2 itr3-td-pt td-lh " v-if="invoiceDetails.reservationDetail">:
                    {{formatInvoiceUtcDate(invoiceDetails.reservationDetail.CheckInDate)}}
                    <table class="inv-sub-items" cellpadding="0" cellspacing="0">
                      <tbody>
                        <tr
                          v-if="roomInfo.NumberOfAdults == 0   && ( invoiceDetails.clientDetail.PersonTypeId && invoiceDetails.clientDetail.PersonTypeId == 2)">
                          <td class="sub-itr3-col1 td-lh">Persons</td>
                          <td class="sub-itr3-col2 td-lh">: {{roomInfo.Persons}}</td>
                        </tr>
                        <tr
                          v-if="roomInfo.NumberOfAdults == 0   && ( invoiceDetails.clientDetail.PersonTypeId && invoiceDetails.clientDetail.PersonTypeId == 1)">
                          <td class="sub-itr3-col1 td-lh">Adults</td>
                          <td class="sub-itr3-col2 td-lh">: {{roomInfo.Persons}}</td>
                        </tr>
                        <tr
                          v-if="roomInfo.NumberOfAdults != 0  && ( invoiceDetails.clientDetail.PersonTypeId && invoiceDetails.clientDetail.PersonTypeId == 1)">
                          <td class="sub-itr3-col1 td-lh">Adults</td>
                          <td class="sub-itr3-col2 td-lh">: {{roomInfo.NumberOfAdults}}</td>
                        </tr>
                        <tr
                          v-if="roomInfo.NumberOfAdults != 0  && ( invoiceDetails.clientDetail.PersonTypeId && invoiceDetails.clientDetail.PersonTypeId == 2)">
                          <td class="sub-itr3-col1 td-lh">Persons</td>
                          <td class="sub-itr3-col2 td-lh">: {{invoiceDetails.reservationDetail.NumberOfGuests}}</td>
                        </tr>
                      </tbody>
                    </table>
                  </td>
                  <td class="c3 itr3-td-pt td-lh"></td>
                  <td class="c4 itr3-td-pt td-lh">Booked On</td>
                  <td class="c5 itr3-td-pt td-lh">: {{formatDate(guestInfo.BookedDate)}}</td>
                </tr>
                <tr class="itr4">
                  <td class="c1 td-lh">Departure</td>
                  <td class="c2 td-lh" v-if="invoiceDetails.reservationDetail">:
                    {{formatInvoiceUtcDate(invoiceDetails.reservationDetail.CheckOut)}}
                    <table class="inv-sub-items" cellpadding="0" cellspacing="0">
                      <tbody>
                        <tr v-if="roomInfo.NumberOfAdults == 0">
                          <td class="sub-itr3-col1"></td>
                          <td class="sub-itr3-col2"></td>
                        </tr>
                        <tr
                          v-if="invoiceDetails.clientDetail.PersonTypeId && invoiceDetails.clientDetail.PersonTypeId == 1">
                          <td class="sub-itr3-col1">Children</td>
                          <td class="sub-itr3-col2">: {{roomInfo.NumberOfChildren}}</td>
                        </tr>
                        <!-- <tr v-if="Reservation_Status.StatusName == 'Cancelled' && invoiceDetails.reservationDetail.cancelleddate">
                          <td class="c4 itr3-td-pt td-lh">Cancelled On</td>
                          <td class="c5 itr3-td-pt td-lh">: {{formatCancelledDate(invoiceDetails.reservationDetail.cancelleddate)}}</td>
                        </tr> -->

                      </tbody>
                    </table>
                  </td>
                  <td class="c3 td-lh"></td>
                  <td style="position: relative;"
                    class="c4 td-lh invo-source-icon src-icon-pl invoice-sourcename resDetailSource"
                    :class="guestInfo.SourceName"></td>
                  <td class="c5 td-lh"></td>
                </tr>
                <tr class="itr5">
                  <td class="c1 td-lh">Nights</td>
                  <td class="c2 td-lh" v-if="invoiceDetails.reservationDetail">:
                    {{invoiceDetails.reservationDetail.Nights}}</td>
                  <td class="c3 td-lh"></td>
                  <td class="c4 td-lh"></td>
                  <td class="c5 td-lh"></td>
                </tr>
              </tbody>
            </table>


            <table class="invoice-dec-table" cellpadding="0" cellspacing="0">
              <tbody v-if="DetailedOrConsolidated == 2">
                <tr class="t-head t-head-row">
                  <th class="cl1 thead-cell">Description</th>
                  <th class="cl2 thead-cell tx-cntr">Quantity</th>
                  <th class="cl3 thead-cell tx-rt">Amount</th>
                  <th class="cl4 thead-cell tx-rt">Tax</th>
                  <th class="cl5 thead-cell tx-rt">Total</th>
                </tr>
                <tr class="sub-t-head-row">
                  <td class="cl1 itemcell fw-bld">Stay Charges</td>
                  <td class="cl2 itemcell"></td>
                  <!-- <td class="cl3 itemcell tx-cntr"></td> -->
                  <td class="cl3 itemcell tx-rt"></td>
                  <td class="cl4 itemcell tx-rt"></td>
                  <td class="cl5 itemcell tx-rt"></td>
                </tr>
                <tr class="" v-for="(folio,folioid, index) in invoiceDetails.folioItems">
                  <td class="cl1 itemcell">{{folio.FolioItemName}} {{folio.FolioItemName == 'Unit Charges' ? `(${folio.DateRange})`: ''}} <span
                      v-if="folio.FolioItemName == 'Unit Charge'">({{folio.ItemQty}} nights @
                      {{formatMoney(folio.Adr)}})</span></td>
                  <td class="cl2 itemcell tx-cntr">{{folio.ItemQty}}</td>
                  <td class="cl3 itemcell tx-rt">{{formatMoney(folio.Charges)}}</td>
                  <td class="cl4 itemcell tx-rt">{{formatMoney(folio.Taxes)}}</td>
                  <td class="cl5 itemcell tx-rt">{{formatMoney(folio.Total)}}</td>
                  <!-- folioItemsDetails -->
                </tr>

                <tr class="subtotal-row" v-if="invoiceDetails.folioSummary">
                  <th class="cl1 footer-cell">Subtotal Charges</th>
                  <th class="cl2 footer-cell tx-cntr"></th>
                  <th class="cl3 footer-cell tx-rt">{{formatMoney(invoiceDetails.folioSummary.TotalCharges)}}</th>
                  <th class="cl4 footer-cell tx-rt">{{formatMoney(invoiceDetails.folioSummary.TotalTax)}}</th>
                  <th class="cl5 footer-cell tx-rt">{{formatMoney(invoiceDetails.folioSummary.TotalValue)}}</th>
                </tr>
                <tr class="sec-gap">
                  <td class="cl1 itemcell fw-bld"></td>
                  <td class="cl2 itemcell"></td>
                  <td class="cl3 itemcell tx-rt"></td>
                  <td class="cl4 itemcell tx-rt"></td>
                  <td class="cl5 itemcell tx-rt"></td>
                </tr>
                <tr class="sub-t-head-row">
                  <td class="cl1 itemcell fw-bld">Payments</td>
                  <td class="cl2 itemcell"></td>
                  <td class="cl3 itemcell tx-rt"></td>
                  <td class="cl4 itemcell tx-rt"></td>
                  <td class="cl5 itemcell tx-rt"></td>
                </tr>
                <tr class="" v-for="paymentInfo in invoiceDetails.paymentDetails"
                  v-if="paymentInfo.RowNum == 1 && paymentInfo.PaymentStatusID != 1">
                  <td class="cl1 itemcell">{{paymentInfo.CardType}} <span v-if="paymentInfo.CCLast4Digits"> (card ending
                      in {{paymentInfo.CCLast4Digits}} exp
                      {{paymentInfo.ExpirationMonth}}/{{getLastTwoDigits(paymentInfo.ExpirationYear)}})</span></td>
                  <td class="cl2 itemcell tx-cntr"></td>
                  <td class="cl3 itemcell">{{paymentInfo.PaymentStatusName}}</td>
                  <td class="cl4 itemcell tx-rt">{{formatInvoiceUtcDate(paymentInfo.PaymentDate)}}</td>
                  <td class="cl5 itemcell tx-rt">{{formatMoney(paymentInfo.Amount)}}</td>
                </tr>
                <tr class="subtotal-row" v-if="invoiceDetails.folioSummary">
                  <th class="cl1 footer-cell">Subtotal Payments</th>
                  <th class="cl2 footer-cell tx-cntr"></th>
                  <th class="cl3 footer-cell tx-rt"></th>
                  <th class="cl4 footer-cell tx-rt"></th>
                  <th class="cl5 footer-cell tx-rt">{{formatMoney(invoiceDetails.folioSummary.Payments)}}</th>
                </tr>
                <tr class="sub-t-head-row"
                  v-if="guestInfo.CompanyProfileId && ['Reserved', 'Guaranteed', 'Confirmed', 'In-House', 'Departed','Cancelled'].includes(Reservation_Status.StatusName)">
                  <td class="cl1 itemcell fw-bld">BalanceTransfer</td>
                  <td class="cl2 itemcell"></td>
                  <td class="cl3 itemcell tx-rt"></td>
                  <td class="cl4 itemcell tx-rt"></td>
                  <td class="cl5 itemcell tx-rt">
                    {{invoiceDetails.folioSummary && invoiceDetails.folioSummary.BalanceTransfer ?
                    formatMoney(invoiceDetails.folioSummary.BalanceTransfer) : ''}}
                  </td>
                </tr>
                <tr class="sec-gap">
                  <td class="cl1 itemcell fw-bld"></td>
                  <td class="cl2 itemcell"></td>
                  <td class="cl3 itemcell tx-rt"></td>
                  <td class="cl4 itemcell tx-rt"></td>
                  <td class="cl5 itemcell tx-rt"></td>
                </tr>
                <tr class="subtotal-row reming-bal-row" v-if="invoiceDetails.folioSummary">
                  <th class="cl1 footer-cell double-ln">Remaining Balance</th>
                  <th class="cl2 footer-cell double-ln tx-cntr"></th>
                  <th class="cl3 footer-cell double-ln tx-rt"></th>
                  <th class="cl4 footer-cell double-ln tx-rt"></th>
                  <th class="cl5 footer-cell double-ln tx-rt">{{formatMoney(invoiceDetails.folioSummary.Balance)}}</th>
                </tr>
              </tbody>
              <tbody class="detailedInvoice" v-else-if="DetailedOrConsolidated == 1 || DetailedOrConsolidated == 3">
                <tr class="t-head t-head-row">
                  <th class="cl1 thead-cell">Date</th>
                  <th class="cl2 thead-cell">Description</th>
                  <th class="cl3 thead-cell tx-rt">Amount</th>
                  <th class="cl4 thead-cell tx-rt">Tax</th>
                  <th class="cl5 thead-cell tx-rt">Total</th>
                </tr>
                <tr class="sub-t-head-row">
                  <td class="cl1 itemcell fw-bld">Stay Charges 2</td>
                  <td class="cl2 itemcell"></td>
                  <td class="cl3 itemcell tx-cntr"></td>
                  <td class="cl4 itemcell tx-rt"></td>
                  <td class="cl5 itemcell tx-rt"></td>
                </tr>
                <tr class="" v-for="(folioItem, index) in invoiceDetails.detailedUnitcharges"
                  v-if="invoiceDetails.detailedUnitcharges.length > 0 && !folioItem.IsVoided">
                  <td class="cl1 itemcell" v-if="folioItem.LedgeraccounttypeId == 2 && DetailedOrConsolidated == 3">{{formatInvoiceUtcDateRange(folioItem.DateEffective,folioItem.TODateEffective)}}</td>
                  <td class="cl1 itemcell" v-else>{{formatInvoiceUtcDate(folioItem.DateEffective)}}</td>
                  <td class="cl2 itemcell tx-cntr">{{folioItem.ItemDescription}}</td>
                  <td class="cl3 itemcell tx-rt">{{formatMoney(folioItem.Amount)}}</td>
                  <td class="cl4 itemcell tx-rt">{{formatMoney(folioItem.TaxAmount)}}</td>
                  <td class="cl5 itemcell tx-rt">{{formatMoney(folioItem.Total)}}</td>
                </tr>
                <tr class="" v-for="(folioItem, index) in invoiceDetails.folioItems"
                  v-if="invoiceDetails.detailedUnitcharges.length == 0">
                  <td class="cl1 itemcell"></td>
                  <td class="cl2 itemcell tx-cntr">{{folioItem.FolioItemName}}</td>
                  <td class="cl3 itemcell tx-rt">{{formatMoney(folioItem.Charges)}}</td>
                  <td class="cl4 itemcell tx-rt">{{formatMoney(folioItem.Taxes)}}</td>
                  <td class="cl5 itemcell tx-rt">{{formatMoney(folioItem.Total)}}</td>
                </tr>

                <tr class="subtotal-row" v-if="invoiceDetails.folioSummary">
                  <th class="cl1 footer-cell">Subtotal Charges</th>
                  <th class="cl2 footer-cell tx-cntr"></th>
                  <th class="cl3 footer-cell tx-rt">{{formatMoney(invoiceDetails.folioSummary.TotalCharges)}}</th>
                  <th class="cl4 footer-cell tx-rt">{{formatMoney(invoiceDetails.folioSummary.TotalTax)}}</th>
                  <th class="cl5 footer-cell tx-rt">{{formatMoney(invoiceDetails.folioSummary.TotalValue)}}</th>
                </tr>
                <tr class="sec-gap">
                  <td class="cl1 itemcell fw-bld"></td>
                  <td class="cl2 itemcell"></td>
                  <td class="cl3 itemcell tx-rt"></td>
                  <td class="cl4 itemcell tx-rt"></td>
                  <td class="cl5 itemcell tx-rt"></td>
                </tr>
                <tr class="sub-t-head-row">
                  <td class="cl1 itemcell fw-bld">Payments</td>
                  <td class="cl2 itemcell"></td>
                  <td class="cl3 itemcell tx-rt"></td>
                  <td class="cl4 itemcell tx-rt"></td>
                  <td class="cl5 itemcell tx-rt"></td>
                </tr>
                <tr class="" v-for="paymentInfo in invoiceDetails.paymentDetails" v-if="paymentInfo.RowNum == 1">
                  <td class="cl1 itemcell">{{formatInvoiceUtcDate(paymentInfo.PaymentDate)}}</td>
                  <td class="cl2 itemcell tx-cntr">{{paymentInfo.CardType}} <span v-if="paymentInfo.CCLast4Digits">
                      (card ending in {{paymentInfo.CCLast4Digits}} exp
                      {{paymentInfo.ExpirationMonth}}/{{getLastTwoDigits(paymentInfo.ExpirationYear)}})</span></td>
                  <td class="cl3 itemcell tx-rt"></td>
                  <td class="cl4 itemcell" v-if="paymentInfo.PaymentStatusID != 1">{{paymentInfo.PaymentStatusName}}
                  </td>
                  <td class="cl4 itemcell" v-else></td>
                  <td class="cl5 itemcell tx-rt">{{formatMoney(paymentInfo.Amount)}} <span class="preAuth"
                      v-if="paymentInfo.PaymentStatusID == 1">PRE-AUTH</span></td>
                </tr>
                <tr class="subtotal-row" v-if="invoiceDetails.folioSummary">
                  <th class="cl1 footer-cell">Subtotal Payments</th>
                  <th class="cl2 footer-cell tx-cntr"></th>
                  <th class="cl3 footer-cell tx-rt"></th>
                  <th class="cl4 footer-cell tx-rt"></th>
                  <th class="cl5 footer-cell tx-rt">{{formatMoney(invoiceDetails.folioSummary.Payments)}}</th>
                </tr>
                <tr class="sec-gap">
                  <td class="cl1 itemcell fw-bld"></td>
                  <td class="cl2 itemcell"></td>
                  <td class="cl3 itemcell tx-rt"></td>
                  <td class="cl4 itemcell tx-rt"></td>
                  <td class="cl5 itemcell tx-rt"></td>
                </tr>
                <tr class="sec-gap" v-if="guestInfo.ShowTaxdetailsonDetailedInvoice">
                  <td class="cl1 itemcell fw-bld"></td>
                  <td class="cl2 itemcell"></td>
                  <td class="cl3 itemcell tx-rt"></td>
                  <td class="cl4 itemcell tx-rt"></td>
                  <td class="cl5 itemcell tx-rt"></td>
                </tr>
                <tr class="sub-t-head-row" v-if="guestInfo.ShowTaxdetailsonDetailedInvoice">
                  <td class="cl1 itemcell fw-bld">Tax Details</td>
                  <td class="cl2 itemcell"></td>
                  <td class="cl3 itemcell tx-cntr"></td>
                  <td class="cl4 itemcell tx-rt"></td>
                  <td class="cl5 itemcell tx-rt"></td>
                </tr>
                <tr class="" v-for="item in invoiceDetails.taxDetails"
                  v-if="invoiceDetails.taxDetails.length > 0 && guestInfo.ShowTaxdetailsonDetailedInvoice">
                  <td class="cl1 itemcell tax-info">{{item.LederaccountName}}</td>
                  <td class="cl2 itemcell tx-cntr"></td>
                  <td class="cl3 itemcell tx-rt"></td>
                  <td class="cl4 itemcell tx-rt"></td>
                  <td class="cl5 itemcell tx-rt">{{formatMoney(item.Amount)}}</td>
                  <!-- <th class="cl1 footer-cell double-ln">{{item.LederaccountName}}</th>
                      <th class="cl2 footer-cell double-ln tx-cntr"></th>
                      <th class="cl3 footer-cell double-ln tx-rt"></th>
                      <th class="cl4 footer-cell double-ln tx-rt"></th>
                      <th class="cl5 footer-cell double-ln tx-rt">{{item.Amount}}</th> -->
                </tr>
                <tr class="subtotal-row"
                  v-if="invoiceDetails.folioSummary && guestInfo.ShowTaxdetailsonDetailedInvoice">
                  <th class="cl1 footer-cell">Subtotal Taxes</th>
                  <th class="cl2 footer-cell tx-cntr"></th>
                  <th class="cl3 footer-cell tx-cntr"></th>
                  <th class="cl4 footer-cell tx-cntr"></th>
                  <th class="cl5 footer-cell tx-rt">
                    {{formatMoney(invoiceDetails.folioSummary.TotalTaxAmountInTaxDetail)}}</th>
                </tr>
                <tr class="sec-gap" v-if="guestInfo.CompanyProfileId">
                  <td class="cl1 itemcell fw-bld"></td>
                  <td class="cl2 itemcell"></td>
                  <td class="cl3 itemcell tx-rt"></td>
                  <td class="cl4 itemcell tx-rt"></td>
                  <td class="cl5 itemcell tx-rt"></td>
                </tr>
                <tr class="sub-t-head-row"
                  v-if="guestInfo.CompanyProfileId && balanceTransferDetails.length > 0 && balanceTransferDetails.filter(bt => !bt.isvoided).length  && ['Reserved', 'Guaranteed', 'Confirmed', 'In-House', 'Departed','Cancelled'].includes(Reservation_Status.StatusName)">
                  <td class="cl1 itemcell fw-bld">BalanceTransfer</td>
                  <td class="cl2 itemcell"></td>
                  <td class="cl3 itemcell tx-cntr"></td>
                  <td class="cl4 itemcell tx-rt"></td>
                  <td class="cl5 itemcell tx-rt"></td>
                </tr>

                <tr class="t-head t-head-row"
                  v-if="guestInfo.CompanyProfileId && balanceTransferDetails.length > 0 && balanceTransferDetails.filter(bt => !bt.isvoided).length && ['Reserved', 'Guaranteed', 'Confirmed', 'In-House', 'Departed','Cancelled'].includes(Reservation_Status.StatusName)">
                  <th class="cl1 thead-cell">Date</th>
                  <th class="cl2 thead-cell">Description</th>
                  <th class="cl3 thead-cell">INV. NO.</th>
                  <th class="cl4 thead-cell tx-rt"></th>
                  <th class="cl5 thead-cell tx-rt">BALANCE</th>
                </tr>
                <tr class="" v-for="(balanceTransferItem, index) in balanceTransferDetails"
                  v-if="!balanceTransferItem.isvoided && guestInfo.CompanyProfileId && ['Reserved', 'Guaranteed', 'Confirmed', 'In-House', 'Departed','Cancelled'].includes(Reservation_Status.StatusName)">
                  <td class="cl1 itemcell tax-info">{{formatDate(balanceTransferItem.DateEffective)}}</td>
                  <td class="cl2 itemcell tax-info">{{balanceTransferItem.reservationTransferDescription}}
                  </td>
                  <td class="cl3 itemcell tax-info">{{balanceTransferItem.QuickbookInvoiceNo &&
                    balanceTransferItem.QuickbookInvoiceNo != null ?
                    balanceTransferItem.QuickbookInvoiceNo : balanceTransferItem.InvoiceNo}}</td>
                  <td class="cl4 itemcell tx-rt"></td>
                  <td class="cl5 itemcell tx-rt">{{formatMoney(balanceTransferItem.Amount)}}</td>
                </tr>
                <tr class="subtotal-row reming-bal-row" v-if="invoiceDetails.folioSummary">
                  <th class="cl1 footer-cell double-ln">Remaining Balance</th>
                  <th class="cl2 footer-cell double-ln tx-cntr"></th>
                  <th class="cl3 footer-cell double-ln tx-rt"></th>
                  <th class="cl4 footer-cell double-ln tx-rt"></th>
                  <th class="cl5 footer-cell double-ln tx-rt">{{formatMoney(invoiceDetails.folioSummary.Balance)}}</th>
                </tr>
              </tbody>
            </table>

            <div v-if="guestInfo.ShowPolicyonDetailedInvoice && DetailedOrConsolidated == 1">
              <div>
                <h5 class="sub-title">Reservation Policy</h5>
              </div>

              <div class="invoice-policy-info" v-for="item in invoiceDetails.resPolicies"
                v-if="invoiceDetails.resPolicies.length > 0 && guestInfo.ShowPolicyonDetailedInvoice">
                <span>{{item.ContentTitle}}: {{item.Content}}</span>
              </div>
            </div>

          </div>
          <!-- <div>
                      <span class="mt-2 folioInvoiceTotals"
                        v-if="invoiceDetails.folioSummary && invoiceDetails.folioSummary.GrandTotal">
                        <span>Grand Total:</span> {{formatMoney(invoiceDetails.folioSummary.GrandTotal)}}</span>
                      <span class="mt-3 folioInvoiceTotals"
                        v-if="invoiceDetails.paymentDetails && invoiceDetails.paymentDetails.Payments">
                        <span>Payments:</span> {{formatMoney(invoiceDetails.paymentDetails.Payments)}}</span>
                      <span class="mt-2 folioInvoiceTotals"
                        v-if="invoiceDetails.paymentDetails && invoiceDetails.paymentDetails.Balance">
                        <span>Balance:</span> {{formatMoney(invoiceDetails.paymentDetails.Balance)}}</span>
          
                    </div> -->
          <!-- <div v-if="!invoiceDetails.paymentDetails">
                      <div class="NoFolioInvoice">No Folio Items</div>
                      <span class="mt-2 folioInvoiceTotals"
                        v-if="invoiceDetails.folioSummary && !invoiceDetails.folioSummary.GrandTotal">
                        <span>Grand Total:</span> $ 0.00</span>
                      <span class="mt-3 folioInvoiceTotals" v-if="!invoiceDetails.paymentDetails">
                        <span>Payments:</span> $ 0.00</span>
                      <span class="mt-2 folioInvoiceTotals" v-if="!invoiceDetails.paymentDetails">
                        <span>Balance:</span> $ 0.00</span>
                    </div> -->
          <!-- <div>
                      <span
                        v-if="invoiceDetails.reservationDetail && invoiceDetails.reservationDetail.IsTaxExempt == true"></span>
                    </div> -->

        </div>

      </div>
    </div>
  </div>
  <pageLoadingComponent v-show="loading"></pageLoadingComponent>
  <div class="row flexStart" v-show="!loading">
    <div class="col-md-7 infoContainer" :class="pannelOpened ? 'guestProfilePanel' : ''">
      <section v-on:click="displaySection('reservation1', $event,'Guest')" :class="{bgColor:isBgColor1}">

        <div class="blankButton" v-show="showGuestInfoButton">
          <button type="button" class="btn btn-link">Add Guest Info</button>
        </div>

        <div class="" v-if="displayGuestInfo === 'guestInfo'">
          <!-- <div class="infoContainerHeading">
              <span class="editPencil">
                <i class="fa fa-pencil" aria-hidden="true"></i>
              </span>
            </div> -->
          <div class="row">
            <div class="col pr-0 gp-user-block">
              <div class="form-group">
                <div>
                  <span>
                    <h6 class="pull-left guestName" v-if="guestInfo.GuestFirstName"
                      style="margin-bottom: 3px; display: flex;align-items: baseline;">
                      <span style="margin-right: 5px;">{{guestInfo.GuestFirstName}} {{guestInfo.GuestLastName}}</span>
                      <!-- v-if="(guestInfo.IsGuestProfilelinked) && guestInfo.ReservationId != -1" -->
                      <div v-if="guestInfo.IsGuestProfilelinked && guestInfo.ReservationId != -1"
                        style="display: inline;">
                        <button class="btn btn-blank gp-icon"
                          @click="ShowGuestProfileDetailClick($event,guestInfo.GuestProfileId,'guest')"
                          :class="showGuestProfileData ? 'active' : ''">
                          <i class="fas fa-user-alt pull-left"></i>
                        </button>
                        <!-- <button class="btn btn-blank gp-icon" @click="ShowGuestProfileDetailClick($event,guestInfo.CompanyProfileId,'company')" :class="showCompanyProfileDetail ? 'active' : ''"
                              v-if="(ShowCompanyData === 'company' && infoType === 7)">                              
                                <i class="fas fa-building pull-left" ></i>
                              </button> -->
                      </div>

                      <button v-show="Tagdisable" class="btn btn-blank gp-icon" v-if="guestInfo.ReservationId != -1"
                        :disabled="showNotesDetailButton" @click="displaySection('showBookedBy',$event)"
                        :class="showMessages ? 'active' : ''">
                        <i class="fas fa-comments-alt"></i>
                      </button>
                      <div class="alertResDeatil">
                        <i class="fa fa-exclamation-triangle msgWarning" aria-hidden="true"
                          v-if="guestInfo.IswarningExist">
                          <span class="alert" v-html="guestInfo.WarningMessage"></span>
                        </i>
                      </div>
                    </h6>

                  </span>
                  <!-- <span v-if="guestInfo.CityName !== undefined && guestInfo.CityName !== null && guestInfo.CityName != ''"
                          class="countryNames">{{guestInfo.CityName}}{{guestInfo.StateName ? ', ' + guestInfo.StateName: ''}}
                        </span>
                        <span v-else class="countryNames">{{guestInfo.CountryName}}</span>
                        <span v-else></span> -->
                  <span>
                    <span class="countryNames">{{displayAddress(guestInfo,'guest')}}</span>
                  </span>
                </div>
              </div>
            </div>

            <!-- <div class="col" style="max-width: 130px;">
                <span class="topBtns"> -->
            <!-- <button class="btn btn-blank">
                    <i class="fas fa-phone"></i>
                  </button> -->

            <!-- <span class="dropdown">
                    <button v-show="Tagdisable" class="btn btn-blank" type="button"
                      :data-toggle="showPhoneNumbers ? '' : 'dropdown'">
                      <i class="fas fa-phone"></i>
                    </button>
                    <ul class="dropdown-menu caret right info " style="right:15px">
                      <li
                        v-if="(additionalPhoneNumbers && additionalPhoneNumbers.length > 0 && additionalPhoneNumbers[0].PhoneNumber)"
                        v-for="phoneNumber in additionalPhoneNumbers">
                        <span>{{phoneNumber.PhoneNumber}}</span>
                      </li>
                      <li v-else-if="!guestInfo.PhoneNumber">
                        <span>{{guestInfo.PhoneNumber}}</span>
                      </li>
                    </ul>
                  </span> -->
            <!-- <button v-show="Tagdisable" class="btn btn-blank detailIcons"
                    @click="displaySection('showBookedBy',$event)" :class="Color">
                    <i class="fas fa-comments"></i>
                  </button> -->
            <!-- <span class="dropdown">
                    <button class="btn btn-blank" type="button" data-toggle="dropdown"
                      v-if="isVerfiedEmailDomain && isVerfiedEmailDomain === true">
                      <i class="fas fa-envelope"></i>
                    </button>
                    <button v-show="Tagdisable" class="btn btn-blank" type="button" v-else>
                      <i class="fas fa-envelope"></i>
                    </button>
                    <ul class="dropdown-menu caret right info " style="right:15px">
                      <li>
                        <span>{{guestInfo.Email}}</span>
                      </li>
                    </ul>
                  </span> -->
            <!-- </span>
              </div> -->


            <div class="col resInfoSectionActions pl-0">
              <!-- <button class="btn btn-blank gp-icon" v-if="guestInfo.ReservationId = -1" @click="displaySection('companyProfile',$event,'company')">
                  <i class="fas fa-building"></i>
                </button> -->
              <select v-model="Reservation_Status" name="status" @change="onChangeStatus(Reservation_Status)"
                class="form-control resDetailStatus statusType" v-bind:class="Reservation_Status.StatusName"
                v-validate="'required'" :disabled="!checkInOutAndStatusbutton">
                <!-- <option v-if="($route.params.ReservationId === '-1' && $route.params.GuestProfileId === '-1')">pending</option> -->
                <option v-for="status in reservationStatusList" v-bind:value="status">{{status.StatusName}}</option>
              </select>
              <!-- <button type="button" class="btn btn-success col-md-4" :disabled="(fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) || ((Reservation_Status.StatusName === 'Reserved' || Reservation_Status.StatusName === 'Confirmed' || Reservation_Status.StatusName === 'Guaranteed') || (today === roomInfo.StartDate))"
                  v-if="roomInfo.isCheckIn && roomInfo.isCheckIn == 1 && roomInfo.IsActionEnable == 1" @click="changeStatus(6)">Check-In</button>
                <button type="button" class="btn btn-warning   col-md-4" :disabled="(fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) && (Reservation_Status.StatusName === 'In-House' ) || fncIsHousekeepingTaskList "
                  v-else-if="roomInfo.isCheckOut && roomInfo.isCheckOut == 1 && roomInfo.IsActionEnable == 1" @click="changeStatus(7)">Check-Out</button> -->
              <button type="button" class="btn btn-success"
                :disabled="(roomInfo.isCheckIn && roomInfo.isCheckIn == 1 && roomInfo.IsActionEnable == 1) && !checkInOutAndStatusbutton"
                v-if="roomInfo.isCheckIn && roomInfo.isCheckIn == 1 && roomInfo.IsActionEnable == 1"
                @click="changeStatus(6)">Check-In</button>
              <button type="button" class="btn btn-warning"
                :disabled=" (roomInfo.isCheckOut && roomInfo.isCheckOut == 1 && roomInfo.IsActionEnable == 1) &&  !checkInOutAndStatusbutton"
                v-else-if="roomInfo.isCheckOut && roomInfo.isCheckOut == 1 && roomInfo.IsActionEnable == 1"
                @click="changeStatus(7)">Check-Out</button>
              <!-- <span v-if="guestInfo && guestInfo.BookedBy">{{guestInfo.BookedBy}}</span>
                <span v-if="guestInfo && guestInfo.BookedDate">{{formatDate(guestInfo.BookedDate)}}</span> -->
              <button class="btn btn-primary btn-sm pull-left" data-toggle="modal" data-target="#SendQuote"
                @click="sendQuote" :disabled="showNotesDetailButton"
                v-if="additionalEmails.length > 0 && additionalEmails[0].Emailaddress && Reservation_Status.StatusName != 'No Show' && Reservation_Status.StatusName != 'Cancelled' && Reservation_Status.StatusName != 'Departed' && guestInfo.ReservationId != -1">Send
                Quote
              </button>
              <!-- <button class="btn btn-primary btn-sm pull-left" data-toggle="modal" data-target="#Accept"
                @click="AcceptorDecline(1,$event)"
                v-if="Reservation_Status.StatusId == 12 && guestInfo.SourceId == 5">Accept</button>
                <button class="btn btn-outline-danger btn-sm pull-left" data-toggle="modal" data-target="#Decline"
                @click="AcceptorDecline(0,$event)"
                v-if="Reservation_Status.StatusId == 12 && guestInfo.SourceId == 5">Decline</button> -->

            </div>

          </div>
          <div class="row col pr-0 gp-user-block">
            <div class="">
              <h6 class="pull-left guestName pt-2" v-if="companyInfo.GuestFirstName || guestInfo.CompanyProfileName"
                style="margin-bottom: 3px; display: flex;align-items: center;">
                <span style="margin-right: 5px;">{{companyInfo.GuestFirstName || guestInfo.CompanyProfileName}}</span>
                <div v-if="guestInfo.CompanyProfileId" style="display: inline;">
                  <button class="btn btn-blank gp-icon pull-left"
                    v-if="(guestInfo.ReservationId != -1  && guestInfo.GuestProfileId != -1 && guestInfo.CompanyProfileId) || guestInfo.CompanyProfileId"
                    @click="ShowGuestProfileDetailClick($event,companyInfo && companyInfo.CompanyProfileId ? companyInfo.CompanyProfileId : guestInfo.CompanyProfileId,'company')"
                    :class="showCompanyProfileData ? 'active' : ''">
                    <i class="fas fa-building" style="font-size: 16px;position: relative;top: -1px;"></i>
                  </button>
                  <div class="infoContainerHeading" style="margin: 0px 0px 0px 15px;cursor: pointer;"
                    v-if="(guestInfo.ReservationId != -1  && guestInfo.GuestProfileId != -1) || guestInfo.CompanyProfileId"
                    @click="displaySection('companyProfile',$event,'company')"
                    :class="ShowCompanyData == 'company' && showEditDetails ? 'active': ''">
                    <span class="" style="color: #5b6a98">
                      <i class="fa fa-pencil" style="font-size: 15px;position: relative;top: 1px"
                        aria-hidden="true"></i>
                    </span>
                  </div>
                </div>
              </h6>
              <span>
                <span class="countryNames">{{displayAddress(guestInfo,'company',companyInfo)}}</span>
              </span>
              <!-- guestInfo.ReservationId != -1 ||    -->
            </div>
          </div>
          <div class="row">

            <div class="resInfoDiv col-md-12 pt-0">
              <!-- <button class="btn btn-default btn-sm" @click="displaySection('companyProfile',$event,'company')">
                <i class="fa fa-plus"></i> Add Company
                </button> -->

              <ul class="resInfoList">
                <li>
                  <div class="dropdown">
                    <button v-if="guestInfo.SubSourceName && guestInfo.SubSourceName !== null" class="btn btn-blank"
                      type="button" data-toggle="dropdown">
                      <span class="resDetailSource" v-bind:class="guestInfo.SubSourceName"></span>
                    </button>
                    <button v-else class="btn btn-blank" type="button" data-toggle="dropdown">
                      <span class="resDetailSource" v-bind:class="guestInfo.SourceName"></span>
                    </button>


                    <ul class="dropdown-menu caret right info" style="right:15px">
                      <button class="btn btn-blank dropdown-clk-icon" type="button" @click="showSourceEdit">
                        <!-- <span class="editPencil"> -->
                        <i v-if="SourceEditBtn" class="fa fa-pencil" aria-hidden="true"></i>
                        <!-- </span>  -->
                      </button>



                      <li
                        v-if="guestInfo.SubSourceName && guestInfo.SubSourceName != null && guestInfo.ReservationNumber">
                        <span>{{guestInfo.SubSourceName}}</span>
                        <br> {{guestInfo.ReservationNumber}}
                      </li>
                      <li v-else-if="guestInfo.SubSourceName && guestInfo.SubSourceName != null">
                        <span>{{guestInfo.SubSourceName}}</span>
                        <br> {{guestInfo.TempoConfirmationNumber}}
                      </li>
                      <li v-else-if="guestInfo.SourceName && guestInfo.ReservationNumber">
                        <span>{{guestInfo.SourceName}}</span>
                        <br> {{guestInfo.ReservationNumber}}
                      </li>
                      <li v-else>
                        <span>{{guestInfo.SourceName}}</span>
                        <br> {{guestInfo.TempoConfirmationNumber}}
                      </li>
                      <li v-if="guestInfo.CrsConfirmationNumber && guestInfo.CrsConfirmationNumber !== null">
                        <span>{{guestInfo.CrsName}}</span>
                        <br>{{guestInfo.CrsConfirmationNumber}}
                      </li>

                    </ul>
                    <div class="showCustomDropdown" v-if="showSourceEditTool">

                      <div class="col-md-12 pt-0">
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-group" style="float: unset;">
                              <label>CRS</label>
                              <select class="form-control" v-model="guestInfo.CrsId"
                                @change="GetSubSourceList(guestInfo.CrsId,guestInfo.SourceId)"
                                :disabled="(fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))">
                                <option value="-99">Select CRS</option>
                                <option v-for="crs in crsList" v-bind:value="crs.CrsId">{{crs.CrsName}}</option>
                              </select>
                            </div>
                          </div>
                          <div class="col-md-6">
                            <div class="form-group">
                              <label>CRS ID</label>
                              <input type="text" class="form-control" v-model="guestInfo.CrsConfirmationNumber"
                                :class="{'input': true, 'is-danger': errors.has('irstName') }"
                                :disabled="(fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))"
                                v-if="(fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))) ">
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="col-md-12 pt-0">
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-group" style="float: unset;">
                              <label>Source Name</label>
                              <select class="form-control" v-model="guestInfo.SourceId"
                                :disabled="!guestInfo.CrsId || (fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))"
                                @change="GetSubSourceList(guestInfo.CrsId,guestInfo.SourceId)">
                                <option value="-99">Select Source</option>
                                <option v-for="source in sourceList" v-bind:value="source.sourceID">
                                  {{source.sourceName}}</option>
                              </select>
                            </div>
                          </div>
                          <div class="col-md-6">
                            <div class="form-group">
                              <label>Source Id</label>
                              <input type="text" class="form-control" v-model="guestInfo.TempoConfirmationNumber"
                                :class="{'input': true, 'is-danger': errors.has('irstName') }"
                                :disabled="!guestInfo.CrsId || guestInfo.SourceId == 1 || guestInfo.SourceId == 9 || (fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))"
                                v-if="(guestInfo.SourceId == 1 || guestInfo.SourceId == 9) && (fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))) ">
                              <input type="text" class="form-control" v-model="guestInfo.ReservationNumber"
                                :class="{'input': true, 'is-danger': errors.has('irstName') }"
                                :disabled="(!guestInfo.CrsId && guestInfo.SourceId != 1) || (fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))"
                                v-else-if="(guestInfo.SourceId != 1 || guestInfo.SourceId != 9) && (fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))) ">
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="col-md-12 pt-0">
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-group" style="float: unset;">
                              <label>Sub Source Name</label>
                              <select class="form-control" v-model="guestInfo.SubSourceId"
                                :disabled="!guestInfo.CrsId || (fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))"
                                @change="getSubSourceName(guestInfo.SubSourceId)">
                                <option value="-99">Select Sub Source</option>
                                <option v-for="subSource in subSourceList" v-bind:value="subSource.SubSourceId">
                                  {{subSource.SubSourceName}}</option>
                              </select>
                            </div>
                          </div>
                          <div class="col-md-6">
                            <div class="form-group">
                              <label>Sub Source Id</label>
                              <input type="text" class="form-control" v-model="guestInfo.SubSourceConfirmationNumber"
                                :class="{'input': true, 'is-danger': errors.has('irstName') }"
                                :disabled="!guestInfo.CrsId || (fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))"
                                v-if="(fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))) ">
                            </div>
                          </div>
                        </div>
                      </div>

                      <!-- client confirmation number -->
                      <div class="col-md-12 pt-0">
                        <div class="row">
                          <div class="col-md-12">
                            <div class="form-group" style="float: unset;">
                              <label>Client Confirmation Number</label>
                              <input type="text" class="form-control" v-model="guestInfo.Ext_ConfirmationNumber"
                                :class="{'input': true, 'is-danger': errors.has('irstName') }"
                                :disabled="(fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))"
                                v-if="(fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))) ">
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- client confirmation number -->

                      <div class="col-md-12" style="float: right;">
                        <div class="form-group">
                          <button type="button" class="btn btn-success btn-sm pull-right mb-3"
                            @click="Save_SourceDetails">Save</button>
                          <button type="button" class="btn btn-blank-danger btn-sm pull-right  mb-3"
                            @click="close">Cancel</button>
                        </div>
                      </div>

                    </div>

                  </div>
                  <!-- <div class="dropdown">
                        <button class="btn btn-blank" type="button" data-toggle="dropdown">
                            <span class="editPencil">
                                <i class="fa fa-pencil" aria-hidden="true"></i>
                              </span>
                          </button>
                          <ul class="dropdown-menu caret right info" style="right:15px">
                            <li>test</li>
                          </ul>
                    </div> -->
                  <span v-if="guestInfo.TempoConfirmationNumber"> {{guestInfo.TempoConfirmationNumber}}</span>
                </li>

                <!-- <li>
  
  
                  </li> -->
              </ul>

              <div class="addCompanyBtn" v-if="showAddCompany()">
                <div @click="displaySection('companyProfile',$event,'company')" style="width: 90px;">
                  <!-- !guestInfo.CompanyProfileId && !companyInfo.CompanyProfileId
                || (((guestInfo.ReservationId == -1 && guestInfo.GuestProfileId == -1) || !guestInfo.CompanyProfileId) && !guestInfo.DefaultSettingforCompanyprofile)">   -->
                  <i class="fa fa-plus"></i> Add Company
                </div>
              </div>



              <div v-if="displayConfirmationDropDown">
                <span>{{guestInfo.ReservationNumber}}</span>
                <span>{{guestInfo.TempoConfirmationNumber}}</span>
              </div>

            </div>

            <div class="col-md-12 gp-tags"
              v-if="refreshtagcomponent && guestInfo && guestInfo.ReservationId && guestInfo.ReservationId != -1">
              <tagComponent :isDisabled="Tagdisable" :entityId="guestInfo.ReservationId" :entityTypeId="4">
              </tagComponent>
            </div>
          </div>
        </div>




      </section>

      <section v-on:click="displaySection('reservation2')" :class="{bgColor:isBgColor2}">
        <div class="blankButton" v-show="showAccomodationInfoButton" v-on:click="displaySection('reservation2')">
          <button type="button" class="btn btn-link">Add Unit</button>
        </div>

        <div class="row" v-if="displayAccomodationInfo === 'accomodationInfo'">
          <div class="infoContainerHeading">
            <!-- <h6 class="pull-left">Accommodation</h6> -->
            <span class="editPencil">
              <i class="fa fa-pencil" aria-hidden="true"></i>
            </span>
          </div>
          <div class="col-md-5">
            <div class="row checkDates">
              <div class="col form-group">
                <label>Check-In</label>
                <span style="white-space: nowrap">
                  <span style="white-space: nowrap" class="month" v-if="roomInfo.StartDate">{{ getMonthStartDate }}
                    <strong>{{ getDateStartDate }}</strong>
                  </span>
                  <!-- <span class="date"></span> -->
                  <span class="date" v-if="roomInfo.StartDate">{{ getYearStartDate }}</span>
                </span>
                <!-- <span class="day" v-if="startAndEnddates.StartDay && startAndEnddates.StartDay !== null && roomInfo.dateObj.checkInTime && roomInfo.dateObj.checkInTime !== null">{{startAndEnddates.StartDay}}, {{roomInfo.dateObj.checkInTime}}</span>
                  <span class="day" v-else-if="(startAndEnddates.StartDay && startAndEnddates.StartDay !== null) || (!roomInfo.dateObj.checkInTime || roomInfo.dateObj.checkInTime === null)">{{startAndEnddates.StartDay}}</span> -->
                <!-- <span v-if="startAndEnddates.StartDay && startAndEnddates.StartDay !== null && roomInfo.dateObj.checkInTime && roomInfo.dateObj.checkInTime !== null"> -->
                <!-- <span> -->
                <div class="getDates">
                  <span class="day" v-if="roomInfo.StartDate">{{ getDayStartDate }} </span>

                  <span v-show="Tagdisable" @click="ShowTimePickerComponent('ShowCheckIn')" class="timePickerIcon"
                    title="Click here to change Check-In Time">
                    <i class="fas fa-clock"></i>
                  </span>
                </div>
                <span v-if="roomInfo.isPropertycheckintime == 0">{{checkInTime}}</span>
                <!-- <span class="time" style="clear: none" v-show="checkinedit" @click="intimepicker">{{checkinTime.hh}}:{{checkinTime.mm}} {{checkinTime.a}}
                  </span> -->
                <!-- <div v-show="checkinput" class="changeTime">
                    <VueTimepicker v-model="checkinTime" :value="checkinTime" :format="'hh:mm a'" @change="saveCheckInCheckOutTime"></VueTimepicker>
                  </div> -->
                <div class="timePickWrap" v-if="ShowCheckIn">
                  <timePicker v-model="checkInTime" :value="checkInTime"></timePicker>
                  <div class="timeOptions">
                    <span @click="resetCheckIn('ischeckin')">
                      <i class="far fa-sync-alt"></i>
                    </span>
                    <span @click="closeTimePicker('ShowCheckIn')">
                      <i class="far fa-check"></i>
                    </span>
                  </div>
                </div>


                <!-- </span> -->
                <!-- </span> -->
              </div>
              <div class="col form-group checkNights">
                <i class="fas fa-clock"></i>
                <div>
                  <span>{{roomInfo.Nights}} Night(s)</span>
                </div>
              </div>
              <div class="col form-group" style="z-index: 100;">
                <label>Check-Out</label>
                <span style="white-space: nowrap">
                  <span class="month" v-if="roomInfo.EndDate">{{ getMonthEndDate }}
                    <strong>{{ getDateEndDate }}</strong>
                  </span>
                  <span class="date"></span>
                  <span class="date" v-if="roomInfo.EndDate">{{ getYearEndDate }}</span>
                </span>
                <!-- <span class="day" v-if="startAndEnddates.EndDay && startAndEnddates.EndDay !== null && roomInfo.dateObj.checkOutTime && roomInfo.dateObj.checkOutTime !== null">{{startAndEnddates.EndDay}}, {{roomInfo.dateObj.checkOutTime}}</span>
                  <span class="day" v-else-if="(startAndEnddates.EndDay && startAndEnddates.EndDay !== null) || (!roomInfo.dateObj.checkOutTime || roomInfo.dateObj.checkOutTime === null)">{{startAndEnddates.EndDay}}</span> -->
                <div class="getDates">

                  <span class="day" v-if="roomInfo.EndDate">{{ getDayEndDate }}</span>
                  <span v-show="Tagdisable" @click="ShowTimePickerComponent('ShowCheckOut')" class="timePickerIcon"
                    title="Click here to change Check-Out Time">
                    <i class="fas fa-clock"></i>
                  </span>
                </div>
                <span v-if="roomInfo.isPropertycheckouttime == 0">{{checkOutTime}}</span>
                <!-- <span class="time" v-show="checkoutedit" @click="outtimepicker">{{checkoutTime.hh}}:{{checkoutTime.mm}} {{checkoutTime.a}}
                    </span> -->
                <div class="timePickWrap" v-if="ShowCheckOut">

                  <timePicker v-model="checkOutTime" :value="checkOutTime"></timePicker>
                  <div class="timeOptions">
                    <span @click="resetCheckIn('ischeckout')">
                      <i class="far fa-sync-alt"></i>
                    </span>
                    <span @click="closeTimePicker('ShowCheckOut')">
                      <i class="far fa-check"></i>
                    </span>
                  </div>
                </div>
                <!-- <div v-show="checkoutput" class="changeTime">
                      <VueTimepicker v-model="checkoutTime" :value="checkoutTime" :format="'hh:mm a'" @change="saveCheckInCheckOutTime"></VueTimepicker>
                    </div> -->

              </div>
            </div>
          </div>
          <div class="col-md-7">
            <div class="roomData">
              <!-- <span class="imagePlace" > <img src="imageURLS(roomInfo.ImageUrl)" alt=""> </span> -->
              <img v-if="roomInfo.ImageUrl &&  roomInfo.ImageUrl !=='null' &&  roomInfo.ImageUrl !==''"
                class="imagePlace" :src="imageURLS(roomInfo.ImageUrl)" width="100" height="100">
              <img v-else class="imagePlace" width="100" height="100">
              <div>
                <div>
                  <div class="unallocateDiv" v-if="guestInfo.IsHostMode == false">



                    <button v-if="roomInfo && roomInfo.reservationMode == 1" type="button"
                      :disabled="Reservation_Status.StatusName == 'Cancelled' || Reservation_Status.StatusName == 'Departed' || Reservation_Status.StatusName == 'No Show' || Reservation_Status.StatusName == 'In-House' || Reservation_Status.StatusName == 'Inquiry'"
                      class="btn btn-sm detailBtn unassign blueBg" title="Assign Unit" @click="assignOrUnassign()">
                      <svg x="0px" y="0px" width="470.5px" height="470.5px" viewBox="0 0 470.5 470.5"
                        style="enable-background:new 0 0 470.5 470.5;" xml:space="preserve">
                        <g>
                          <path d="M53.771,0v469.931h34.134V34.134h232.192L185.262,57.91v366.811l185.67,45.779v-67.14h11.664v67.14h34.133V0H53.771z
                          M382.596,34.134v42.678h-11.664V34.134H382.596z M217.994,258.876c-6.768,0-12.255-7.14-12.255-15.946
                         c0-8.806,5.487-15.946,12.255-15.946s12.254,7.14,12.254,15.946C230.248,251.736,224.762,258.876,217.994,258.876z
                          M370.934,350.262V129.909h11.662v220.353H370.934z" />
                        </g>
                      </svg>
                      <!-- Slant Line -->
                      <svg class="line" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;"
                        xml:space="preserve">
                        <g>
                          <path d="M500.364,267.636H11.636C5.21,267.636,0,262.427,0,256c0-6.427,5.21-11.636,11.636-11.636h488.727
                      c6.427,0,11.636,5.21,11.636,11.636C512,262.427,506.79,267.636,500.364,267.636z" />
                        </g>
                      </svg>
                    </button>
                    <button
                      :disabled="fncIsReservationUpdate && (fncIsReservationUpdate.isAssigned === -1 && fncIsReservationUpdate.functionState === 2)|| Reservation_Status.StatusName === 'Cancelled' || Reservation_Status.StatusName === 'Departed' || Reservation_Status.StatusName === 'No Show' || Reservation_Status.StatusName == 'In-House'"
                      v-if="fncIsReservationUpdate && (fncIsReservationUpdate.isAssigned === 1 || (fncIsReservationUpdate.isAssigned === -1 && fncIsReservationUpdate.functionState === 2))&& roomInfo && roomInfo.reservationMode == -1"
                      type="button" class="btn btn-sm detailBtn unassign" @click="assignOrUnassign(-1, 3)"
                      title="Unassign Unit">
                      <svg x="0px" y="0px" width="470.5px" height="470.5px" viewBox="0 0 470.5 470.5"
                        style="enable-background:new 0 0 470.5 470.5;" xml:space="preserve">
                        <g>
                          <path d="M53.771,0v469.931h34.134V34.134h232.192L185.262,57.91v366.811l185.67,45.779v-67.14h11.664v67.14h34.133V0H53.771z
                          M382.596,34.134v42.678h-11.664V34.134H382.596z M217.994,258.876c-6.768,0-12.255-7.14-12.255-15.946
                         c0-8.806,5.487-15.946,12.255-15.946s12.254,7.14,12.254,15.946C230.248,251.736,224.762,258.876,217.994,258.876z
                          M370.934,350.262V129.909h11.662v220.353H370.934z" />
                        </g>
                      </svg>
                    </button>
                    <button
                      :disabled="Reservation_Status.StatusName === 'Cancelled' || Reservation_Status.StatusName === 'Departed' || Reservation_Status.StatusName === 'No Show' || Reservation_Status.StatusName == 'In-House'"
                      v-if="((Reservation_Status.StatusName != 'Inquiry'&& Reservation_Status.StatusName != 'Cancelled'&& Reservation_Status.StatusName != 'In-House' && Reservation_Status.StatusName != 'Departed' && Reservation_Status.StatusName != 'No Show' && Reservation_Status.StatusName != 'Request') && roomInfo.Oversell == false) || (roomInfo.Oversell == true)"
                      type="button" class="btn btn-sm detailBtn clickable"
                      :class="roomInfo.Oversell == true ? 'unallocated' : 'allocate'"
                      @click="roomInfo.Oversell == false ? assignOrUnassign(-1, 1) : assignOrUnassign(-1, 2)"
                      :title="roomInfo.Oversell == true ? 'Allocate' : 'Unallocate'">
                      <span class="unallocateImg"></span>
                      <!-- <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="26" height="26" fill="#000000">
                        <path d="M 12.84375 1 C 12.722656 1.019531 12.605469 1.0625 12.5 1.125 L 0.5 8.125 C 0.1875 8.304688 -0.00390625 8.640625 0 9 L 0 23 C 0 23.550781 0.449219 24 1 24 L 25 24 C 25.550781 24 26 23.550781 26 23 L 26 9 C 26.003906 8.640625 25.8125 8.304688 25.5 8.125 L 13.5 1.125 C 13.300781 1.007813 13.070313 0.964844 12.84375 1 Z M 13 3.15625 L 24 9.59375 L 24 22 L 2 22 L 2 9.59375 Z M 8.5 10 C 7.121094 10 6 11.121094 6 12.5 C 6 13.878906 7.121094 15 8.5 15 C 9.878906 15 11 13.878906 11 12.5 C 11 11.121094 9.878906 10 8.5 10 Z M 17.5 10 C 16.121094 10 15 11.121094 15 12.5 C 15 13.878906 16.121094 15 17.5 15 C 18.878906 15 20 13.878906 20 12.5 C 20 11.121094 18.878906 10 17.5 10 Z M 6.6875 15.5 C 5.585938 15.800781 4 17 4 19 L 13 19 C 13 17 11.414063 15.800781 10.3125 15.5 C 9.8125 15.800781 9.199219 16 8.5 16 C 7.800781 16 7.1875 15.800781 6.6875 15.5 Z M 13 19 L 22 19 C 22 17 20.414063 15.800781 19.3125 15.5 C 18.8125 15.800781 18.199219 16 17.5 16 C 16.800781 16 16.1875 15.800781 15.6875 15.5 C 14.585938 15.800781 13 17 13 19 Z"/>
                      </svg> -->
                    </button>
                  </div>
                  <div class="unallocateDiv" v-if="guestInfo.IsHostMode == true">

                    <!-- <button v-if= "roomInfo.Oversell == true && roomInfo.reservationMode == 1"  disabled
                        type="button" class="btn btn-sm detailBtn unallocate" @click="assignOrUnassign(-1)" title="disable">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="26" height="26" fill="#000000">
                <path d="M 12.84375 1 C 12.722656 1.019531 12.605469 1.0625 12.5 1.125 L 0.5 8.125 C 0.1875 8.304688 -0.00390625 8.640625 0 9 L 0 23 C 0 23.550781 0.449219 24 1 24 L 25 24 C 25.550781 24 26 23.550781 26 23 L 26 9 C 26.003906 8.640625 25.8125 8.304688 25.5 8.125 L 13.5 1.125 C 13.300781 1.007813 13.070313 0.964844 12.84375 1 Z M 13 3.15625 L 24 9.59375 L 24 22 L 2 22 L 2 9.59375 Z M 8.5 10 C 7.121094 10 6 11.121094 6 12.5 C 6 13.878906 7.121094 15 8.5 15 C 9.878906 15 11 13.878906 11 12.5 C 11 11.121094 9.878906 10 8.5 10 Z M 17.5 10 C 16.121094 10 15 11.121094 15 12.5 C 15 13.878906 16.121094 15 17.5 15 C 18.878906 15 20 13.878906 20 12.5 C 20 11.121094 18.878906 10 17.5 10 Z M 6.6875 15.5 C 5.585938 15.800781 4 17 4 19 L 13 19 C 13 17 11.414063 15.800781 10.3125 15.5 C 9.8125 15.800781 9.199219 16 8.5 16 C 7.800781 16 7.1875 15.800781 6.6875 15.5 Z M 13 19 L 22 19 C 22 17 20.414063 15.800781 19.3125 15.5 C 18.8125 15.800781 18.199219 16 17.5 16 C 16.800781 16 16.1875 15.800781 15.6875 15.5 C 14.585938 15.800781 13 17 13 19 Z"/>
                      </svg>
                        <svg class="line" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;"
                          xml:space="preserve">
                          <g>
                            <path d="M500.364,267.636H11.636C5.21,267.636,0,262.427,0,256c0-6.427,5.21-11.636,11.636-11.636h488.727
                      c6.427,0,11.636,5.21,11.636,11.636C512,262.427,506.79,267.636,500.364,267.636z" />
                          </g>
                        </svg>
                       
                      </button>
                      <button :disabled ="Reservation_Status.StatusName === 'Cancelled' || Reservation_Status.StatusName === 'Departed' || Reservation_Status.StatusName === 'No Show'"
                      v-else-if= "roomInfo.Oversell == false && roomInfo.reservationMode == -1"
                      type="button" class="btn btn-sm detailBtn unallocate" @click="assignOrUnassign(-1)" title="Un-Allocate">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="26" height="26" fill="#000000">
                        <path d="M 12.84375 1 C 12.722656 1.019531 12.605469 1.0625 12.5 1.125 L 0.5 8.125 C 0.1875 8.304688 -0.00390625 8.640625 0 9 L 0 23 C 0 23.550781 0.449219 24 1 24 L 25 24 C 25.550781 24 26 23.550781 26 23 L 26 9 C 26.003906 8.640625 25.8125 8.304688 25.5 8.125 L 13.5 1.125 C 13.300781 1.007813 13.070313 0.964844 12.84375 1 Z M 13 3.15625 L 24 9.59375 L 24 22 L 2 22 L 2 9.59375 Z M 8.5 10 C 7.121094 10 6 11.121094 6 12.5 C 6 13.878906 7.121094 15 8.5 15 C 9.878906 15 11 13.878906 11 12.5 C 11 11.121094 9.878906 10 8.5 10 Z M 17.5 10 C 16.121094 10 15 11.121094 15 12.5 C 15 13.878906 16.121094 15 17.5 15 C 18.878906 15 20 13.878906 20 12.5 C 20 11.121094 18.878906 10 17.5 10 Z M 6.6875 15.5 C 5.585938 15.800781 4 17 4 19 L 13 19 C 13 17 11.414063 15.800781 10.3125 15.5 C 9.8125 15.800781 9.199219 16 8.5 16 C 7.800781 16 7.1875 15.800781 6.6875 15.5 Z M 13 19 L 22 19 C 22 17 20.414063 15.800781 19.3125 15.5 C 18.8125 15.800781 18.199219 16 17.5 16 C 16.800781 16 16.1875 15.800781 15.6875 15.5 C 14.585938 15.800781 13 17 13 19 Z"/>
                      </svg>
                    </button> -->

                    <button
                      :disabled="Reservation_Status.StatusName === 'Cancelled' || Reservation_Status.StatusName === 'Departed' || Reservation_Status.StatusName === 'No Show' || Reservation_Status.StatusName == 'In-House'"
                      v-if="((Reservation_Status.StatusName != 'Inquiry'&& Reservation_Status.StatusName != 'Cancelled'&& Reservation_Status.StatusName != 'In-House' && Reservation_Status.StatusName != 'Departed' && Reservation_Status.StatusName != 'No Show' && Reservation_Status.StatusName != 'Request') && roomInfo.Oversell == false) || (roomInfo.Oversell == true)"
                      type="button" class="btn btn-sm detailBtn clickable"
                      :class="roomInfo.Oversell == true ? 'unallocated' : 'allocate'"
                      @click="roomInfo.Oversell == false ? assignOrUnassign(-1, 1) : assignOrUnassign(-1, 2)"
                      :title="roomInfo.Oversell == true ? 'Allocate' : 'Unallocate'">
                      <span class="unallocateImg"></span>
                      <!-- <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="26" height="26" fill="#000000">
                        <path d="M 12.84375 1 C 12.722656 1.019531 12.605469 1.0625 12.5 1.125 L 0.5 8.125 C 0.1875 8.304688 -0.00390625 8.640625 0 9 L 0 23 C 0 23.550781 0.449219 24 1 24 L 25 24 C 25.550781 24 26 23.550781 26 23 L 26 9 C 26.003906 8.640625 25.8125 8.304688 25.5 8.125 L 13.5 1.125 C 13.300781 1.007813 13.070313 0.964844 12.84375 1 Z M 13 3.15625 L 24 9.59375 L 24 22 L 2 22 L 2 9.59375 Z M 8.5 10 C 7.121094 10 6 11.121094 6 12.5 C 6 13.878906 7.121094 15 8.5 15 C 9.878906 15 11 13.878906 11 12.5 C 11 11.121094 9.878906 10 8.5 10 Z M 17.5 10 C 16.121094 10 15 11.121094 15 12.5 C 15 13.878906 16.121094 15 17.5 15 C 18.878906 15 20 13.878906 20 12.5 C 20 11.121094 18.878906 10 17.5 10 Z M 6.6875 15.5 C 5.585938 15.800781 4 17 4 19 L 13 19 C 13 17 11.414063 15.800781 10.3125 15.5 C 9.8125 15.800781 9.199219 16 8.5 16 C 7.800781 16 7.1875 15.800781 6.6875 15.5 Z M 13 19 L 22 19 C 22 17 20.414063 15.800781 19.3125 15.5 C 18.8125 15.800781 18.199219 16 17.5 16 C 16.800781 16 16.1875 15.800781 15.6875 15.5 C 14.585938 15.800781 13 17 13 19 Z"/>
                      </svg> -->
                    </button>

                  </div>


                  <span v-if="roomInfo.PropertyNickName !== null">{{roomInfo.PropertyNickName}}</span>
                  <span v-else>{{roomInfo.PropertyName}}</span> -
                  <span v-if="roomInfo.UnitNickName !== null">{{roomInfo.UnitNickName}}</span>
                  <span v-else>{{roomInfo.UnitName}}</span>
                </div>

                <span class="UnitClass ml-0 mt-2 mb-2" v-bind:class="roomInfo.ColorCode"
                  v-if="guestInfo.IsHostMode && roomInfo.UnitClassName">{{roomInfo.UnitClassName}}</span>
                <span class="UnitClass ml-0 mt-2 mb-2" v-bind:class="roomInfo.ColorCode"
                  v-else-if="!guestInfo.IsHostMode && roomInfo.UnitTypeName">{{roomInfo.UnitTypeName}}</span>
                <span class="ml-0 mb-2" v-else></span>
                <span class="guests">
                  <i v-if="roomInfo.Persons !== -99" class="fas fa-users" style="color: #5b6a98;"
                    aria-hidden="true"></i>
                  <span
                    v-if="radioCheck == 'AdultsAndChildren' && roomInfo.NumberOfAdults !== null && roomInfo.NumberOfAdults !== -99 ">{{roomInfo.NumberOfAdults}}</span>
                  <span v-if="radioCheck == 'AdultsAndChildren' && roomInfo.NumberOfAdults === 1">Adult</span>
                  <span v-else-if="radioCheck == 'AdultsAndChildren' && roomInfo.NumberOfAdults !== 1">Adults</span>
                  <span v-if="radioCheck == 'AdultsAndChildren'">,</span>
                  <span
                    v-if="radioCheck == 'AdultsAndChildren' && roomInfo.NumberOfChildren !== null && roomInfo.NumberOfChildren !== -99 ">{{roomInfo.NumberOfChildren}}</span>
                  <span v-if="radioCheck == 'AdultsAndChildren' && roomInfo.NumberOfChildren === 1">Child</span>
                  <span v-else-if="radioCheck == 'AdultsAndChildren' && roomInfo.NumberOfChildren !== 1">Children</span>
                  <span
                    v-if="radioCheck == 'Persons' && roomInfo.Persons !== null && roomInfo.Persons !== -99">{{roomInfo.Persons}}</span>
                  <span
                    v-if="radioCheck == 'Persons' && roomInfo.Persons !== -99 && roomInfo.Persons === 1">Person</span>
                  <span
                    v-else-if=" radioCheck == 'Persons' && roomInfo.Persons !== -99 && roomInfo.Persons !== 1 ">Persons</span>
                </span>
              </div>
              <!-- <button v-if="roomInfo.numberOfPersonsInfo && roomInfo.numberOfPersonsInfo.reservationMode == -1" type="button" class="btn btn-blank btn-sm"
                  style="color:rgb(247, 58, 58); float:right; margin-left: 15px; width: auto; margin: -21px 0 0;" @click="assignOrUnassign(-1)">
                  <i style="color:rgb(247, 58, 58); font-size: 12px" class="far fa-unlink"></i> Un-Assign</button> -->



            </div>
            <div>

              <!-- <button v-if="roomInfo.numberOfPersonsInfo && roomInfo.numberOfPersonsInfo.reservationMode == 1" type="button" class="btn btn-primary btn-sm" style="color:#fff; float:right; margin-left: 15px; width: auto" @click="assignOrUnassign(1)">Re-Assign</button> -->
            </div>
          </div>

        </div>
      </section>

      <section class="split" :class="{bgColor:isBgColor6}">
        <div class="blankButton" v-show="showFolioDetailButton" v-on:click="displaySection('reservation3')">
          <button type="button" class="btn btn-link">Folio Summary</button>
        </div>
        <div class="row"
          :disabled="fncIsFolioView && (fncIsFolioView.isAssigned === -1 && fncIsFolioView.functionState === 2)"
          v-if="fncIsFolioView && (fncIsFolioView.isAssigned === 1 || (fncIsFolioView.isAssigned === -1 && fncIsFolioView.functionState === 2)) && displayFolioDetail === 'FolioDetail' && folioItemsDetails.length !== 0">

          <div class="col-md-6 splitLeft" :class="{bgColor:isBgColor3}" v-on:click="displaySection('reservation5')">
            <div class="infoContainerHeading">
              <span class="editPencil">
                <i class="fa fa-pencil" aria-hidden="true"></i>
              </span>
            </div>
            <span style="color: #373737;font-size: 16px;font-weight: 600;position: relative; top: -15px;"
              v-if="guestInfo.RateplanName">{{guestInfo.RateplanName}}
              <label v-if=" guestInfo.Promocode">({{guestInfo.Promocode}})</label>
            </span>
            <span class="col-md-6 rate-custm-alert" v-if="honourFolio"> !Alert</span>
            <ul class="folioSummary">
              <li v-show="showLess" v-for="folio in ShowLessfolioItemsDetails">
                <!-- <span>{{folio.ItemDescription}}</span>
                  <span v-text="'$' + folio.Total"></span> -->
                <span v-if="folio.ItemQty"
                  v-text="folio.FolioItemName + ' ' + 'X' + ' ' + folio.ItemQty + ' ' + (folio.ItemQty > 1 ? 'Nights' : 'Night')"></span>
                <span v-else v-text="folio.FolioItemName"></span>
                <span class="folioAdr" v-if="folio.ItemQty && folio.Adr"
                  v-text="'( $ ' + folio.Adr + ' per night )'"></span>
                <span v-if="folio.Charges && folio.Charges !== null" v-text="formatMoney(folio.Charges)"></span>
              </li>
              <li v-show="showMore" v-for="folio in folioSummaryDetail">
                <span v-if="folio.FolioItemName && folio.ItemQty && folio.ItemQty > 1"
                  v-text="folio.FolioItemName + ' ' + 'X' + ' ' + folio.ItemQty + ' ' + (folio.ItemQty > 1 ? 'Nights' : 'Night')"></span>
                <span v-else v-text="folio.FolioItemName"></span>
                <span class="folioAdr" v-if="folio.ItemQty && folio.Adr"
                  v-text="'( $ ' + folio.Adr + ' / night )'"></span>
                <span v-if="folio.Charges !== null" v-text="formatMoney(folio.Charges)"></span>
              </li>
              <!-- <li>
                  <span v-if="folioCharges.TotalFolio && folioCharges.TotalFolio !== null">Total</span>
                  <span v-if="folioCharges.TotalFolio && folioCharges.TotalFolio !== null" class="pull-right" v-text="'$'  + folioCharges.TotalFolio"></span>
                </li> -->
              <li>
                <span v-if="folioCharges.TotalTax && folioCharges.TotalTax !== null">Tax</span>
                <span v-if="folioCharges.TotalTax && folioCharges.TotalTax !== null" class="pull-right"
                  v-text="formatMoney(folioCharges.TotalTax)"></span>
              </li>
              <li>
                <button v-if="folioSummaryDetail &&  showMore === false && folioSummaryDetail.length > 5"
                  class="btn btn-hypeLink pull-right textSm" type="button" v-on:click="showMoreFolioItems">
                  {{folioSummaryDetail.length - 5}} More..
                </button>
                <button v-if="folioSummaryDetail && showMore === true  && folioSummaryDetail.length > 5"
                  class="btn btn-hypeLink pull-right textSm" type="button" v-on:click="showLessFolioItems">
                  Show less..
                </button>
              </li>
              <!-- <li></li> -->
              <!-- <li></li> -->
            </ul>
            <!-- <div class="col-md-12 noPadding pull-left">
                <div class="form-group">
                  <span class="pull-left totalNumeric">Tax</span>
                  <span v-if="folioSummaryCharges.TotalTax && folioSummaryCharges.TotalTax !== null" class="pull-right totalNumeric" v-text="'$'  + folioSummaryCharges.TotalTax"></span>
                </div>
              </div> -->
            <div class="">
              <div class="col-md-12 totalBorders thinPadding pull-left pb-1" v-if="folioCharges.TotalValue">
                <div class="form-group">
                  <span v-if="folioCharges.TotalValue && folioCharges.TotalValue !== null"
                    class="pull-left totalNumeric">Total</span>
                  <span v-if="folioCharges.TotalValue && folioCharges.TotalValue !== null"
                    class="pull-right totalNumeric" v-text="formatMoney(folioCharges.TotalValue)"></span>
                </div>
              </div>

              <div class="col-md-12 thinPadding pull-left pt-1 pr-0 pl-0 pb-0" v-if="folioCharges.Payments"
                style="margin-bottom: 10px;">
                <div class="form-group">
                  <span v-if="folioCharges.Payments && folioCharges.Payments !== null"
                    class="pull-left totalNumeric paymentNumeric">Payments</span>
                  <span v-if="folioCharges.Payments && folioCharges.Payments !== null"
                    class="pull-right totalNumeric paymentNumeric" v-text="formatMoney(folioCharges.Payments)"></span>
                </div>
              </div>
              <div class="col-md-12 thinPadding pull-left pt-0 pr-0 pl-0 pb-0"
                v-if="folioCharges.BalanceTransfer && ['Reserved', 'Guaranteed', 'Confirmed', 'In-House', 'Departed','Cancelled'].includes(Reservation_Status.StatusName)">
                <div class="form-group">
                  <span
                    v-if="folioCharges.BalanceTransfer && folioCharges.BalanceTransfer !== null && guestInfo.CompanyProfileId"
                    class="pull-left totalNumeric paymentNumeric">Balance Transfer</span>
                  <span
                    v-if="folioCharges.BalanceTransfer && folioCharges.BalanceTransfer !== null && guestInfo.CompanyProfileId"
                    class="pull-right totalNumeric paymentNumeric"
                    v-text="formatBalanceTransferAmount(folioCharges.BalanceTransfer)"></span>
                </div>
              </div>

              <div class="col-md-12 thinPadding pull-left">
                <div class="form-group" style="border-top: 1px solid #ccc;padding-top: 15px;">
                  <span v-if="folioCharges && folioCharges.Balance !== null" class="totalNumeric">Balance</span>
                  <span v-if="folioCharges && folioCharges.Balance !== null" class="pull-right"
                    style="font-weight: 600;"
                    :class="['balanceNumeric ml-3', folioCharges.Balance == folioCharges.TotalValue ? 'balanceEqual' : 'balanceNotEqual', checkBalanceColor(folioCharges.Balance)]"
                    v-text="formatMoney(folioCharges.Balance)"></span>
                </div>
              </div>

            </div>

          </div>
          <div class="col-md-6 splitRight"
            :disabled="fncIsFolioNew && (fncIsFolioNew.isAssigned === -1 && fncIsFolioNew.functionState === 2)"
            v-if="fncIsFolioNew && (fncIsFolioNew.isAssigned === 1 || (fncIsFolioNew.isAssigned === -1 && fncIsFolioNew.functionState === 2)) "
            :class="{bgColor:isBgColor5}" v-on:click="displayPaymentsSection('payments')">
            <div class="infoContainerHeading">
              <span class="editPencil">
                <i class="fa fa-pencil" aria-hidden="true"></i>
              </span>
            </div>
            <div class="form-group pull-right mb-0 mt-2" style="width: 80%">
              <!-- <label v-if="guestPaymentCards.length > 0"> Payment Options</label> -->
            </div>
            <ul class="payDetail" v-if="guestPaymentCards.length > 0">
              <!-- <li v-for="(card, index) in guestPaymentCards" v-if="card.IsDefault">{{card.NameOnCard}}
                  <br>
                  <span v-if="card.CCLast4Digits && card.CCLast4Digits !== null"> **** **** **** {{card.CCLast4Digits}}</span>                
                  <br> {{card.Expirationdate}}
                  <span :class="['cardType', card.CardType]"></span>
                </li>
                <li v-else-if="index == 0 && guestPaymentCards.length > 1">
                  {{card.NameOnCard}}
                  <br>
                  <span v-if="card.CCLast4Digits && card.CCLast4Digits !== null"> **** **** **** {{card.CCLast4Digits}}</span>              
                  <br> {{card.Expirationdate}}
                  <span :class="['cardType', card.CardType]"></span>
                </li> -->
              <li v-if="defaultPaymentCard">
                <span class="ch-name">{{defaultPaymentCard.NameOnCard}}</span>
                <br>
                <span v-if=" defaultPaymentCard.CCLast4Digits && defaultPaymentCard.CCLast4Digits !== null"> **** ****
                  **** {{defaultPaymentCard.CCLast4Digits}}</span>
                <!-- <span v-if=" !visibleCC && defaultPaymentCard.CCLast4Digits && defaultPaymentCard.CCLast4Digits !== null"> **** **** **** {{defaultPaymentCard.CCLast4Digits}}</span>
                  <span v-if=" visibleCC && defaultPaymentCard.CreditCard && defaultPaymentCard.CreditCard !== null"> {{defaultPaymentCard.CreditCard}}</span>
                
                   <i v-show="eyeicon"  class="fas fa-eye"  v-on:click="showingdetails()" ></i> -->

                <br> {{defaultPaymentCard.Expirationdate}}
                <span :class="['cardType', defaultPaymentCard.CardType]"></span>
              </li>
            </ul>
            <div class="form-group pull-right" style="clear:right" v-if="guestPaymentCards.length > 1">
              <span class="moreLink" @click="showAllPaymentOptions">{{guestPaymentCards.length-1 + ' More Option..'}}
              </span>
            </div>
            <div class="form-group pull-right" style="width: 80%;clear:right">
              <button class="btn btn-primary btn-sm pull-left"
                :disabled="fncIsFolioNew && (fncIsFolioNew.isAssigned === -1 && fncIsFolioNew.functionState === 2) || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)  "
                v-if="fncIsFolioNew && (fncIsFolioNew.isAssigned === 1 || (fncIsFolioNew.isAssigned === -1 && fncIsFolioNew.functionState === 2)) "
                @click="addPaymentDetails(false)"><i class="fa fa-plus"></i> Add Payment Options</button>
            </div>
          </div>

        </div>
        <div v-else-if="displayFolioDetail === 'FolioDetail' && folioItemsDetails.length === 0 ">
          <label v-if="showFolioDetailButton">No Folio</label>
        </div>

      </section>

      <!-- <section v-show="showBookedBy">
          <span v-if="guestInfo && guestInfo.BookedBy">{{guestInfo.BookedBy}}</span>
          <span v-if="guestInfo && guestInfo.BookedDate">{{formatDate(guestInfo.BookedDate)}}</span>
        </section> -->

      <section :disabled="fncIsNotesView && (fncIsNotesView.isAssigned === -1 && fncIsNotesView.functionState === 2)"
        v-if="fncIsNotesView && (fncIsNotesView.isAssigned === 1 || (fncIsNotesView.isAssigned === -1 && fncIsNotesView.functionState === 2)) "
        v-on:click="displaySection('reservation4')" :class="{bgColor:isBgColor4}">
        <div class="blankButton" v-show="showNotesDetailButton" v-on:click="displaySection('reservation4')">
          <button type="button" class="btn btn-link">Notes</button>
        </div>
        <div class="row" v-if="displayNotesDetail === 'NotesDetail'">
          <div class="infoContainerHeading">
            <!-- <h6 class="pull-left">NOTES</h6> -->
            <button type="button"
              :disabled="fncIsNotesNew && (fncIsNotesNew.isAssigned === -1 && fncIsNotesNew.functionState === 2)"
              v-if="fncIsNotesNew && (fncIsNotesNew.isAssigned === 1 || (fncIsNotesNew.isAssigned === -1 && fncIsNotesNew.functionState === 2)) "
              class="btn btn-primary btn-sm pull-right mb-3 mr-0" v-on:click="addNewNotes('reservation4')">Add</button>

          </div>
          <div class="col-md-12">
            <table class="table table-bordered userTable NotesTable">
              <thead>
                <tr>
                  <th>NOTES</th>
                  <th>SUBJECT</th>
                  <th>DUE DATE</th>
                  <th>ACTIONS</th>
                  <th>DELETE</th>
                </tr>
              </thead>
              <tbody v-if="notes.length > 1 || notes.length === 1">
                <tr v-for="note in notes" @click="getNotesDetailsById(note.noteId,note)"
                  :class="{highLightActive:note.highLightActive==1}">
                  <td :class="note.noteStatusId == '2' ? 'notesOpacity' : ''">{{note.noteTypeName}}</td>

                  <td :class="note.noteStatusId == '2' ? 'notesOpacity' : ''">
                    <div class="note-subject">{{note.noteSubject}}</div>
                  </td>

                  <td :class="note.noteStatusId == '2' ? 'notesOpacity' : ''">{{note.dateOrTimeDue}}</td>

                  <td v-if="note.noteStatusId == '0'">
                    <span v-for="status in notesActions" style="margin-left: 20px;">
                      <i v-if="note.noteTypeId == 2 && note.isActionReqd" :class="status.class"
                        @click="changeNoteStatus(note.noteId, status.noteStatusId, note)"
                        style="color: #F44336; font-size: 19px;"></i>

                      <i v-if="note.noteTypeId == 9" class="fa fa-download" @click="downloadDocuSign(note)"
                        style="color: #4D70E0; font-size: 19px; cursor: pointer;"></i>

                    </span>
                    <span v-if="note.highLightActive==1 && note.showEditIcon==1"
                      :class="{editIconActive:note.showEditIcon==1}">
                      <i class="fas fa-pencil"></i>
                    </span>
                  </td>
                  <td v-else-if="note.noteStatusId == '2'">
                    <span v-for="status in notesActions" style="margin-left: 20px;">
                      <i class="fas fa-undo" @click="changeNoteStatus(note.noteId, 0,note)"
                        style="color: #4d70e0; font-size: 15px;"></i>
                    </span>
                    <span v-if="note.highLightActive==1 && note.showEditIcon==1"
                      :class="{editIconActive:note.showEditIcon==1}">
                      <i class="fas fa-pencil"></i>
                    </span>
                  </td>
                  <td v-else>
                    <span v-if="note.highLightActive==1 && note.showEditIcon==1"
                      :class="{editIconActive:note.showEditIcon==1}">
                      <i class="fas fa-pencil"></i>
                    </span>
                  </td>
                  <td>
                    <button class="btn btn-outline-danger btn-sm" @click="changeNoteStatus(note.noteId,3,note)"
                      v-if="!note.taskTypeId && note.noteTypeId != 9"><i class="fal fa-trash-alt"></i></button>
                    <!-- <i style="color: #F44336; font-size: 15px;" @click= "changeNoteStatus(note.noteId,3,note)" class="fas fa-trash-alt" v-if="!note.taskTypeId"></i>            -->
                  </td>
                </tr>

              </tbody>
              <tbody v-else-if="notes.length === 0">
                <tr>
                  <td>
                    No notes for this reservation.
                  </td>
                  <td></td>
                  <td></td>
                  <td></td>
                </tr>
              </tbody>
            </table>
          </div>
          <!-- <div class="col-md-12" v-else-if="notes.length === 0">No notes for this reservation.</div> -->
        </div>


      </section>

      <guestProfilePannel :searchObj="triggerevent ? currSearchObj : ''"></guestProfilePannel>
    </div>


    <div class="col-md-5 editContainer folioExpandCollapseWrap"
      :class="showGuestProfileDetail ? 'guestprofileEditContainer' : ''"
      v-if="displaySectionValue === 'reservation1'|| displaySectionValue === 'reservation2'|| displaySectionValue === 'reservation3'|| displaySectionValue === 'reservation4' || displaySectionValue === 'reservation5'  || displaySectionValue === 'showBookedBy' || showGuestProfileDetail == true || displaySectionValue === 'declineRequestReservation' || displaySectionValue === 'companyProfile'">

      <div class="editContainerHeading horizontal-flex"
        v-if="displaySectionValue !== 'reservation5' && displaySectionValue !== 'reservation3'">
        <h6 class="pull-left mt-2"
          v-if="(displaySectionValue === 'reservation1' || displaySectionValue === 'companyProfile') && showguestinfo ">
          {{ShowCompanyData == 'company' ? 'Company Info' : 'Guest Info'}}</h6>
        <h6 class="pull-left mt-2" v-if="displaySectionValue === 'reservation2'">Availability Search</h6>

        <!-- Guest Profile Toggle Btns -->
        <div class="gp-sync-togl-btns" v-if="displaySectionValue === 'reservation1' && showguestinfo ">
          <div v-if="CreateGuestProfile && Reservation_Status.StatusId != 4 && Reservation_Status.StatusId != 11">
            <label class="slideCheck" style="margin-top: 14px;">
              <input
                :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
                v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))"
                type="checkbox" v-model="guestInfo.DefaultSettingforGuestprofile" />
              <span v-if="ShowCompanyData == 'Guest'">Create guest profile</span>

            </label>
            <label style="float: left; margin: 9px 12px 0px 7px; font-size: 12px; color: rgb(134, 134, 134);"><span
                v-if="ShowCompanyData == 'Guest'">Create guest profile</span>
            </label>
          </div>
          <div v-else-if="!CreateGuestProfile && Reservation_Status.StatusId != 4 && Reservation_Status.StatusId != 11">
            <label class="slideCheck" style="margin-top: 14px;">
              <input
                :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
                v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))"
                type="checkbox" v-model="guestInfo.DefaultSettingforGuestprofile" />
              <span v-if="ShowCompanyData == 'Guest'">Sync to Guest Profile</span>

            </label>
            <label style="float: left; margin: 9px 12px 0px 7px; font-size: 12px; color: rgb(134, 134, 134);"><span
                v-if="ShowCompanyData == 'Guest'">Sync to Guest Profile</span>
            </label>
          </div>
          <button class="btn btn-primary btn-sm"
            v-if="guestInfo.ReservationId != '-1' && Reservation_Status.StatusId != 4 && Reservation_Status.StatusId != 11"
            @click="GetGuestProfile_BySearchText('fromSearch')">Search</button>
        </div>
        <div class="gp-sync-togl-btns" v-if="displaySectionValue === 'companyProfile' && showguestinfo ">
          <div v-if="CreateCompanyProfile && Reservation_Status.StatusId != 4 && Reservation_Status.StatusId != 11">
            <label class="slideCheck" style="margin-top: 14px;">
              <input
                :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
                v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))"
                type="checkbox" v-model="guestInfo.DefaultSettingforCompanyprofile" />
              <span v-if="ShowCompanyData == 'company'">Create company profile</span>
            </label>
            <label style="float: left; margin: 9px 12px 0px 7px; font-size: 12px; color: rgb(134, 134, 134);">
              <span v-if="ShowCompanyData == 'company'">Create company profile</span></label>
          </div>
          <div
            v-else-if="!CreateCompanyProfile && Reservation_Status.StatusId != 4 && Reservation_Status.StatusId != 11">
            <label class="slideCheck" style="margin-top: 14px;">
              <input
                :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
                v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))"
                type="checkbox" v-model="guestInfo.DefaultSettingforCompanyprofile" />
              <span v-if="ShowCompanyData == 'company'">Sync to Company profile</span>
            </label>
            <label style="float: left; margin: 9px 12px 0px 7px; font-size: 12px; color: rgb(134, 134, 134);">
              <span v-if="ShowCompanyData == 'company'">Sync to Company profile</span></label>
          </div>
          <button class="btn btn-primary btn-sm"
            v-if="guestInfo.ReservationId != '-1' && Reservation_Status.StatusId != 4 && Reservation_Status.StatusId != 11 && !CreateCompanyProfile"
            @click="GetGuestProfile_BySearchText('fromSearch')">Search</button>
        </div>
        <!-- Guest Profile Toggle Btns end -->
        <button type="button" class="btn btn-primary btn-sm pull-right mt-1" @click="GetAvailableRooms"
          :disabled="(Reservation_Status.StatusName === 'Cancelled' || Reservation_Status.StatusName === 'Departed' || Reservation_Status.StatusName === 'No Show') || (fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))"
          v-if="displaySectionValue === 'reservation2' && (roomInfo.reservationMode == undefined || roomInfo.reservationMode == '' || roomInfo.reservationMode == 0 || roomInfo.reservationMode == -1) && (fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))) && !showRooms">Search</button>
        <button
          :disabled="(fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) || (Reservation_Status.StatusName === 'Cancelled' || Reservation_Status.StatusName === 'Departed' || Reservation_Status.StatusName === 'No Show')"
          v-if="displaySectionValue === 'reservation2' && fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) && roomInfo && roomInfo.reservationMode == 1 && !showRooms"
          type="button" class="btn btn-primary btn-sm pull-right mt-1" @click="GetAvailableRooms">Search</button>
        <!-- <h6 class="pull-left mt-2" v-if="displaySectionValue === 'reservation3'">Folio Details</h6> -->
        <h6 class="pull-left mt-2" v-if="displaySectionValue === 'reservation4'">Notes Detail</h6>
        <button
          v-if="fncIsNotesSave && (fncIsNotesSave.isAssigned === 1 || (fncIsNotesSave.isAssigned === -1 && fncIsNotesSave.functionState === 2)) && displaySectionValue === 'reservation4' && notesDetailById && notesDetailById.noteTypeId === 9"
          title="" type="button" class="btn btn-default dropdown-toggle  btn-sm btn-sm-icon"
          @click="downloadDocuSign(notesDetailById)"><i class="fas fa-download"></i></button>
        <button type="button" class="btn btn-success btn-sm pull-right mt-1"
          @click="ShowCompanyData === 'Guest' ? saveGuestInfo('guestInfo') : (ShowCompanyData === 'company' ) ? saveCompanyInfo('companyInfo') : ''"
          :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
          v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) && (displaySectionValue === 'reservation1' || displaySectionValue === 'companyProfile') && showguestinfo">Save</button>
        <!-- || (ShowCompanyData === 'company' && !guestInfo.DefaultSettingforCompanyprofile) -->
        <!-- && guestInfo.DefaultSettingforCompanyprofile -->

        <!-- <button type="button" class="btn btn-success btn-sm pull-right mt-1" @click="saveNotesDetails(notesDetailById.noteId)" title="save notes" :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
            v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) && displaySectionValue === 'reservation4'">Save</button> -->
        <button type="button" class="btn btn-success btn-sm pull-right mt-1"
          @click="saveNotesDetails(notesDetailById.noteId,notesDetailById.noteStatusId, null, 'noteModule')"
          title="save notes"
          :disabled="fncIsNotesSave && (fncIsNotesSave.isAssigned === -1 && fncIsNotesSave.functionState === 2)"
          v-if="fncIsNotesSave && (fncIsNotesSave.isAssigned === 1 || (fncIsNotesSave.isAssigned === -1 && fncIsNotesSave.functionState === 2)) && displaySectionValue === 'reservation4' && notesDetailById && notesDetailById.noteTypeId !== 9">Save</button>

      </div>
      
      
      <section v-else-if="displaySectionValue === 'reservation2'">
        <div v-show="!showRooms">
          <div class="row">


            <div class=" pull-left noClear ml-3" v-if="!guestInfo.IsHostMode">

              <label class="slideCheck">
                <input
                  :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
                  v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))"
                  type="checkbox" v-model="searchByUnit" @change=" changeSplitReservations" />
                <span>Search by units</span>
              </label>
              <label style="float:left;     margin: 4px 12px 0 10px; font-size: 12px; color: #868686;">Search by
                units</label>
            </div>
            <div class=" pull-left noClear ml-3">

              <label class="slideCheck">
                <input
                  :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
                  v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))"
                  type="checkbox" v-model="showactualinventory" />
                <span>Show available only</span>
              </label>
              <label style="float:left;     margin: 4px 12px 0 10px; font-size: 12px; color: #868686;">Show available
                only</label>
            </div>
            <div class=" pull-left noClear ml-3" v-if="!guestInfo.IsHostMode">

              <label class="slideCheck">
                <input
                  :disabled="(fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) || searchByUnit"
                  v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))"
                  type="checkbox" v-model="splitReservations" />
                <span>Search by units</span>
              </label>
              <label style="float:left;     margin: 4px 12px 0 10px; font-size: 12px; color: #868686;">Allow split
                reservations</label>
            </div>
            <!-- <button type="button" class="btn btn-primary btn-sm" @click="saveRoomInfo" :disabled="(!selectedRoomFlag) || (fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))"
                v-if="(fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))) ">Save</button> -->
          </div>
          <div class="row">
            <div class="col-md-12">
              <div class="form-group">
                <label>Check-in</label>
                <label style="float:right; text-align: right">
                  <span class="infoData" v-if="noOfNights">{{noOfNights}} Nights</span>
                  <span class="infoData" v-else-if="roomInfo.Nights">{{roomInfo.Nights}} Nights</span>
                </label>
                <datePickerComponent :keyString="'fromDate'" v-model="roomInfo.formattedStartDate"
                  :maximumDate="roomInfo.EndDate" :value="roomInfo.formattedStartDate" class="checkInDate"
                  :format="'Do MMM YYYY'" :onUpdate="updateStartDate" :pickerType="'date'" :isRequired="true"
                  :errorMessage="'Required'"
                  :isDisabled="(Reservation_Status.StatusName == 'In-House' || Reservation_Status.StatusName == 'Departed' || Reservation_Status.StatusName == 'No Show' || Reservation_Status.StatusName == 'Cancelled') || (fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))"
                  v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))">
                </datePickerComponent>
                <!-- <vue-rangedate-picker @selected="onDateSelected" :initRange="selectedDate" i18n="EN" format="DD MMM YYYY">
                  </vue-rangedate-picker> -->
                <!-- <date-range-picker :opens="opens" :startDate="roomInfo.dateObj.StartDate" :endDate="roomInfo.dateObj.EndDate" @update="updateValues"></date-range-picker> -->
                <!-- <span v-show="errors.has('city')" class="invalid-feedback">
                    <i v-show="errors.has('city')" class="fa fa-warning"></i> {{ errors.first('city') }}</span> -->
              </div>
            </div>
            <div class="col-md-12">
              <div class="form-group">
                <label>Check-out</label>
                <datePickerComponent :keyString="'toDate'" v-model="roomInfo.formattedEndDate"
                  :minimumDate="roomInfo.StartDate" :value="roomInfo.formattedEndDate" class="checkOutDate"
                  :format="'Do MMM YYYY'" :onUpdate="updateEndDate" :pickerType="'date'" :isRequired="true"
                  :errorMessage="'Required'"
                  :isDisabled="(Reservation_Status.StatusName == 'Departed' || Reservation_Status.StatusName == 'No Show' || Reservation_Status.StatusName == 'Cancelled') || (fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))"
                  v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) ">
                </datePickerComponent>
              </div>
            </div>

          </div>
          <!-- <div class="row">
  
              <div class="col-md-6 form-group">
                <label>Check-in time</label>
                <span class="infoData">
                  <input type=time step=900 v-model="roomInfo.dateObj.checkInTime">
                </span>
              </div>
              <div class="col-md-6 form-group">
                <label>Check-out time</label>
                <span class="infoData">
                  <input type=time step=900 v-model="roomInfo.dateObj.checkOutTime">
                </span>
              </div>
  
          </div> -->
          <div class="row">
            <div class="col-md-4 radioToggleWrap">
              <div class="radioToggle">
                <label class="">
                  <input type="radio" name="PropertyPublish" v-model="radioCheck" v-validate="'required'"
                    value="Persons" @change="">
                  <span>Persons</span>
                </label>
                <label class="">
                  <input type="radio" name="PropertyPublish" v-model="radioCheck" v-validate="'required'"
                    value="AdultsAndChildren">
                  <span>Adults & Children</span>
                </label>
              </div>

            </div>



            <div class="col-md-8 pt-0">

              <div class="colPpl" v-if="radioCheck === 'Persons'">
                <span class="fal fa-users"></span>
                <!-- <input type="number" id="myNumber"> -->
                <input v-model="roomInfo.Persons" type="number" class="form-control" @change="" v-validate="'required'"
                  min="0" :class="{'input': true, 'is-danger': errors.has('adults') }" value="1" name="adults"
                  :disabled="(fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))"
                  v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))">
                <i v-show="errors.has('adults')" class="fa fa-warning"></i>
                <span v-show="errors.has('adults')" class="help is-danger">{{ errors.first('adults') }}</span>
              </div>
              <div class="colPpl" v-if="radioCheck === 'AdultsAndChildren'">
                <span class="fal fa-users"></span>
                <input v-model="roomInfo.NumberOfAdults" type="number" class="form-control" @change="" id="adults"
                  v-validate="'required'" min="0" :class="{'input': true, 'is-danger': errors.has('adults') }" value="2"
                  name="adults"
                  :disabled="(fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))"
                  v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))">
                <i v-show="errors.has('adults')" class="fa fa-warning"></i>
                <span v-show="errors.has('adults')" class="help is-danger">{{ errors.first('adults') }}</span>
              </div>

              <div class="colPpl" v-if="radioCheck === 'AdultsAndChildren'">
                <span class="fal fa-child"></span>
                <input v-model="roomInfo.NumberOfChildren" type="number" class="form-control" @change="" id="children"
                  min="0" v-validate="'required'" :class="{'input': true, 'is-danger': errors.has('children') }"
                  name="children"
                  :disabled="(fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) "
                  v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))">
                <i v-show="errors.has('children')" class="fa fa-warning"></i>
                <span v-show="errors.has('children')" class="help is-danger">{{ errors.first('children') }}</span>
              </div>

            </div>
          </div>

          <div class="col-md-4">


          </div>
          <div class="col-md-4">

          </div>

          <!-- <div class="row">
              <div class="col-md-4">
                <label class="radioLabel">
  
                  <input type="radio" name="PropertyPublish" v-model="radioCheck" v-validate="'required'" value="Persons" @change="">
  
                </label>
                <label>Persons</label>
                <input v-model="roomInfo.numberOfPersonsInfo.Persons" type="text" class="form-control" @change="" v-validate="'required'"
                  :class="{'input': true, 'is-danger': errors.has('adults') }" value="1" name="adults" :disabled="(fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) || (radioCheck === 'AdultsAndChildren')"
                  v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) ">
                <i v-show="errors.has('adults')" class="fa fa-warning"></i>
                <span v-show="errors.has('adults')" class="help is-danger">{{ errors.first('adults') }}</span>
              </div>
              <div class="col-md-4">
                <label class="radioLabel">
                  <input type="radio" name="PropertyPublish" v-model="radioCheck" v-validate="'required'" value="AdultsAndChildren">
                </label>
                <label>Adults</label>
                <input v-model="roomInfo.numberOfPersonsInfo.NumberOfAdults" type="text" class="form-control" @change="" id="adults" v-validate="'required'"
                  :class="{'input': true, 'is-danger': errors.has('adults') }" value="1" name="adults" :disabled="(fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) || (radioCheck === 'Persons')"
                  v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) ">
                <i v-show="errors.has('adults')" class="fa fa-warning"></i>
                <span v-show="errors.has('adults')" class="help is-danger">{{ errors.first('adults') }}</span>
              </div>
              <div class="col-md-4">
                <label>Children</label>
                <input v-model="roomInfo.numberOfPersonsInfo.NumberOfChildren" type="text" class="form-control" @change="" id="children"
                  v-validate="'required'" :class="{'input': true, 'is-danger': errors.has('children') }" name="children" :disabled="(fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) || (radioCheck === 'Persons')"
                  v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) ">
                <i v-show="errors.has('children')" class="fa fa-warning"></i>
                <span v-show="errors.has('children')" class="help is-danger">{{ errors.first('children') }}</span>
              </div>
            </div> -->

          <!-- ||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||| -->

          <div class="row">
            <div class="col-md-12">
              <div class="form-group" style="position: relative;">
                <label>Property</label>
                <div class="col-md-12 searchResultsAmenitiesDiv">
                  <ul class="todo-list">
                    <li v-for="property in filteredProperties">
                      <span class="tags">
                        <span>{{property.PropertyName}}</span>
                        <i class="far fa-times" @click="removePropertyFromFilter(property)"></i>
                      </span>
                    </li>
                  </ul>
                  <input
                    :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
                    v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) "
                    type="text" placeholder="Select Property" v-model="filterSearchPropertyText"
                    @click="showFilterByType('property')">
                </div>

                <div class="form-control searchResultsAmenities" id="propertyDropDown"
                  v-show="selectedFilterColumn == 'property'">
                  <ul>
                    <li v-for="property in propertyList" v-bind:value="property" @click="addToFilter(property)">
                      {{property.PropertyName}}</li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-md-12" v-if="!guestInfo.IsHostMode">
              <div class="form-group" style="position: relative;">
                <label>Unit Type</label>
                <div class="col-md-12 searchResultsAmenitiesDiv">
                  <ul class="todo-list">
                    <li v-for="unitType in filteredUnitTypes">
                      <span class="tags">
                        <span>{{unitType.UnitTypeName}}</span>
                        <i class="far fa-times" @click="removeUnitTypeFromFilter(unitType)"></i>
                      </span>
                    </li>
                  </ul>
                  <input
                    :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
                    v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) "
                    type="text" placeholder="Select Unit type" v-model="filterSearchUnitTypeText"
                    @click="showFilterByType('unitType')">
                </div>

                <div class="form-control searchResultsAmenities" id="unitTypeDropDown"
                  v-show="selectedFilterColumn == 'unitType'">
                  <ul>
                    <li v-for="unitType in unitTypeList" v-bind:value="unitType" @click="addToFilter(unitType)">
                      {{unitType.UnitTypeName}} ({{unitType.propertyNickName}})</li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-md-12">
              <div class="form-group" style="position: relative;">
                <label>Unit Class</label>
                <div class="col-md-12 searchResultsAmenitiesDiv">
                  <ul class="todo-list">
                    <li v-for="unit in filteredUnitClasses">
                      <span class="tags">
                        <span>{{unit.UnitClassName}}</span>
                        <i class="far fa-times" @click="removeUnitClassFromFilter(unit)"></i>
                      </span>
                    </li>
                  </ul>
                  <input
                    :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
                    v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) "
                    type="text" placeholder="Select Unit Class" v-model="filterSearchUnitClassText"
                    @click="showFilterByType('UnitClass')">
                </div>

                <div class="form-control searchResultsAmenities" id="UnitClassDropDown"
                  v-show="selectedFilterColumn == 'UnitClass'">
                  <ul>
                    <li v-for="unit in unitClassList" v-bind:value="unit" @click="addToFilter(unit)">
                      {{unit.UnitClassName}}</li>
                  </ul>
                </div>
              </div>
            </div>

            <div class="col-md-12">
              <div class="form-group">
                <label>Rate Plan</label>
                <!-- <div class="col-md-12 "> -->
                <!-- <ul class="todo-list">
                      <li v-for="ratePlan in filteredRatePlans">
                        <span class="tags">
                          <span>{{ratePlan.RatePlan_Name}}</span>
                          <i class="far fa-times" @click="removeRatePlanFromFilter(ratePlan)"></i>
                        </span>
                      </li>
                    </ul>
                    <input
                      :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
                      v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) "
                      type="text" placeholder="Select Rate Plan" v-model="filterSearchRatePlanText"
                      @click="showFilterByType('ratePlan')"> -->
                <select v-model="selectedRatePlan" name="unitClass" class="form-control" placeholder="Select RatePlan"
                  @change="getPromoCodeList()"
                  :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
                  v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))">
                  <option :value=null>Select RatePlan</option>
                  <option v-for="ratePlan in ratePlanList" :value="ratePlan">{{ratePlan.RatePlan_DisplayName}} <label
                      v-if="ratePlan.PromocodeRequired" style="font-size: 12px;color: #a7a7a7;font-style: italic;">
                      (Promocode required)</label></option>
                </select>
                <!-- </div> -->

                <!-- <div class="form-control searchResultsAmenities" id="ratePlanDropDown"
                    v-show="selectedFilterColumn == 'ratePlan'">
                    <ul>
                      <li v-for="ratePlan in ratePlanList" v-bind:value="ratePlan" @click="addToFilter(ratePlan)">
                        {{ratePlan.RatePlan_Name}}</li>
                    </ul>
                  </div> -->
              </div>
            </div>

            <div class="col-md-12">
              <div class="form-group" style="position: relative;">
                <label>Promocode</label>
                <select v-model="filterSearchPromoCodeText" name="unitClass" class="form-control"
                  placeholder="Select RatePlan"
                  :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
                  v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))">
                  <option :value=null>Select Promocode</option>
                  <option v-for="promoCode in promoCodeList" :value="promoCode">{{promoCode.Promocode}}</option>
                </select>
                <!-- <div class="col-md-12 searchResultsAmenitiesDiv">
                    <ul class="todo-list">
                      <li v-for="promoCode in filteredPromocode">
                        <span class="tags">
                          <span>{{promoCode.Promocode}}</span>
                          <i class="far fa-times" @click="removePromoCodeFromFilter(promoCode)"></i>
                        </span>
                      </li>
                    </ul>
                    <input
                      :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
                      v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) "
                      type="text" placeholder="Enter Promocode" v-model="filterSearchPromoCodeText">
                  </div>
  
                  <div class="form-control searchResultsAmenities" id="promoCodeDropDown"
                    v-show="selectedFilterColumn == 'promoCode'">
                    <ul>
                      <li v-for="promoCode in promoCodeList" v-bind:value="promoCode" @click="addToFilter(promoCode)">
                        {{promoCode.Promocode}}</li>
                    </ul>
                  </div> -->
              </div>
            </div>

          </div>
          <!-- ||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||| -->
          <!-- <div class="row">
            <div class="col-md-12">
              <div class="form-group">
                <label>Property</label>
                <select name="unitClass" class="form-control" v-validate="'required'" v-model="roomInfo.selectedRoom.PropertyId" :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
                  v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) ">
                  <option v-for="property in UserProperties" :value="property.PropertyId">{{property.PropertyName}}</option>
                </select>
              </div>
            </div>
            <div class="col-md-12" v-if="roomInfo.selectedRoom.UnitClassName">
              <div class="form-group">
                <label>Room Type</label>
  
                <div class="form-group">
                  <span class="infoData">{{roomInfo.selectedRoom.UnitClassName}}</span>
                </div>
              </div>
            </div>
  
          </div> -->

          <!-- <div class="row"> -->
          <!-- <div class="col-md-12" v-if="roomInfo.selectedRoom.UnitClassName">
              <div class="form-group">
                <label>Room #</label>
                <div class="form-group">
                  <span class="infoData">{{roomInfo.selectedRoom.UnitName}}</span>
                </div>
              </div>
            </div> -->
          <!-- <div class="col-md-12">
              <div class="form-group">
                <label>Rate Plan</label>
                <select name="unitClass" class="form-control" v-validate="'required'" :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
                  v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) ">
                  <option></option>
                </select>
              </div>
            </div> -->
          <!-- </div> -->
          <div class="row">
            <div class="col-md-12">
              <div class="form-group" style="position: relative;">
                <label>Amenities</label>

                <div class="col-md-12 searchResultsAmenitiesDiv">
                  <ul class="todo-list">
                    <li v-for="Amenities in filteredAmenities">
                      <span class="tags">
                        <span>{{ Amenities.ListName }}</span>
                        <i class="far fa-times" @click="removeAmenities(Amenities)"></i>
                      </span>
                    </li>
                  </ul>
                  <input type="text" placeholder="Select Amenities" @click="showFilterByType('amenities')"
                    :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
                    v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) ">
                </div>

                <div class="form-control searchResultsAmenities" id="amenitiesDropDown"
                  v-show="selectedFilterColumn == 'amenities'">
                  <ul>
                    <li v-for="Amenities in AmenitiesList" v-bind:value="Amenities" @click="addAmenities(Amenities)">
                      {{Amenities.ListName}}</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <div class="row">

          </div>
          <div v-if="(display && availableRoomsList && availableRoomsList.length === 0)">
            <span style="color:rgb(240, 62, 62)">
              <i class="fa fa-exclamation-triangle" style="color:rgb(240, 62, 62)"></i>No units found..! Search Again
            </span>
          </div>
        </div>
        <!-- </div> -->
        <div class="row searchResults summaryBlock" v-show="showRooms">

          <ul class="searchAvailSummaryList">
            <li v-if="roomInfo.StartDate || roomInfo.EndDate">
              <i class="fal fa-calendar"></i> {{getFormatedStartDate}} - {{getFormatedEndDate}}
            </li>
            <li v-if="radioCheck === 'Persons'">
              <i class="fal fa-users"></i> {{roomInfo.Persons}} Persons
            </li>
            <li v-if="radioCheck === 'AdultsAndChildren'">
              <i class="fal fa-users"></i> {{roomInfo.NumberOfAdults}} Adult(s), {{roomInfo.NumberOfChildren}} Children
            </li>
            <li v-if="filteredProperties.length > 0">
              <span class="avbSearchProperty" v-for="property in filteredProperties">
                <span>{{property.PropertyName}}
                  <span v-if="filteredProperties.length > 1"></span><br>
                </span>
              </span>
            </li>
            <li v-if="!guestInfo.IsHostMod && filteredUnitTypes.length > 0 ">
              <span class="avbSearchProperty" v-for="unitType in filteredUnitTypes">
                <span>{{unitType.UnitTypeName}},
                  <span v-if="filteredUnitTypes.length > 1"></span>
                </span>
              </span>
            </li>
            <li v-if="filteredUnitClasses.length > 0">
              <span class="avbSearchUnit" v-for="unit in filteredUnitClasses">
                <span class="UnitClass ml-0" v-bind:class="unit.ColorCode">{{unit.UnitClassName}}</span>
                <!-- <span class="UnitClass ml-0 mb-2" v-bind:class="roomInfo.ColorCode">{{roomInfo.UnitClassName}}</span> -->
              </span>
            </li>
            <!-- <li class="" v-if="filteredPromocode.length > 0">
                <span class="avbSearchProperty" v-for="promoCode in filteredPromocode">
                  <span>{{promoCode.Promocode}}
                    <span v-if="filteredPromocode.length > 1"></span>
                  </span>
                </span>
              </li> -->
            <li v-if="selectedRatePlan">
              <span class="avbSearchProperty">
                <span>{{selectedRatePlan.RatePlan_DisplayName}}</span>
              </span>
            </li>
            <li v-if="filterSearchPromoCodeText">
              <span class="avbSearchProperty">
                <span>{{filterSearchPromoCodeText.Promocode}}</span>
              </span>
            </li>
            <!-- <li class="" v-if="filteredRatePlans.length > 0">
                <span class="avbSearchProperty" v-for="ratePlan in filteredRatePlans">
                  <span>{{ratePlan.RatePlanName}}
                    <span v-if="filteredRatePlans.length > 1"></span>
                  </span>
                </span>
              </li> -->


          </ul>
          <div class="col-md-12 pt-0">
            <div class=" pull-left noClear">
              <label style="float:left;margin: 4px 12px 0 0; font-size: 12px; color: #868686;">Show available
                only
              </label>
              <label class="slideCheck">
                <input type="checkbox" v-model="showactualinventory" />
                <span>Show available only</span>
              </label>
            </div>
            <div class="pull-right">
              <span @click="showAvailabilityInfo"
                style="cursor: pointer;font-size: 12px;color: #1669D9;padding-right: 10px;"
                :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
                v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))">Change
                Search</span>
              <!-- <button type="button" class="btn btn-primary btn-sm" @click="showAvailabilityInfo('cancelSearch')"
                  :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
                  v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))">Cancel</button> -->

              <button type="button" class="btn btn-success btn-sm" @click="saveRoomInfo(1,'assignRoomModule')"
                :disabled="(!selectedRoomFlag) || (fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2))"
                v-if="(fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)))">Save</button>
            </div>
          </div>
          <div class="col-md-12 pl-0 pr-0 pt-0 availabilitySearchFixedHeader">

            <div class="card" v-if="availableRoomsList.length !== 0" v-for="room in sortedAvailableRoomsList"
              v-bind:class="[roomInfo.isActive && roomInfo.isActive == true && roomInfo.UnitId == room.UnitId ? 'active' : '']">
              <!-- <div class="card-body">{{}}</div> -->
              <div v-if="room.Unitactualinventory == 1 || !showactualinventory" class="card-block"
                v-bind:class="[room.Unitactualinventory == 1 ? 'assigned' : '' , room.Unitactualinventory == 0 ? 'unassigned' : '', room.Unitactualinventory == 2 ? 'restricted' : '']">

                <!-- <span class="img"></span> -->
                <img v-if="room.ImageURL && room.ImageURL !=='null' && room.ImageURL !=='' " class="img dummyImage"
                  :src="imageURLS(room.ImageURL)">
                <img v-else class="img dummyImage" width="100px" height="100px">
                <div class="avbSearchDetails">

                  <span class="unitName">{{room.UnitName}}</span>
                  <br>
                  <span class="unitNickName"
                    v-if="room.UnitNickName && room.UnitNickName !== null">{{room.UnitNickName}} </span>
                  <span class="unitNickName" v-if="room.PropertyNickName && room.PropertyNickName !== null"> -
                    {{room.PropertyNickName}}
                  </span>
                  <span class="unitNickName" v-else> - {{room.PropertyName}}</span>
                  <!-- <br><span class="UnitClass">{{room.UnitClassName}}</span> -->
                </div>
                <div>
                  <div class="FromTotalPanel">
                    <div v-if="room.ShowMoreRates">From</div>
                    <div v-else>Total</div>
                    <div v-if="room.FromTotalValue">{{formatFromNightlyCharges(room.FromTotalValue)}}</div>
                    <div v-if="room.FromNightlyCharges"> {{formatFromNightlyCharges(room.FromNightlyCharges)}} Nightly
                    </div>
                    <div v-if="room.MinofMinstay">{{room.MinofMinstay}}n</div>
                  </div>

                  <div class="selectRoomBtns">
                    <button class="btn btn-primary btn-sm pull-right test" style="padding: 4px 20px; font-size: 12px;"
                      @click="selectRoom(room)" v-if="!room.ShowMoreRates">
                      Select
                      <!-- <i class="fa fa-sort-desc" aria-hidden="true"></i>  -->
                    </button>
                    <button class="btn btn-primary btn-sm pull-right test" style="padding: 4px 20px; font-size: 12px;"
                      @click="showRatePlansListForUnit(room)" v-if="!room.ShowRates && room.ShowMoreRates">Select
                      <!-- <i class="fa fa-sort-desc" aria-hidden="true"></i>  -->
                    </button>
                    <button class="btn btn-primary btn-sm pull-right test" style="padding: 4px 20px; font-size: 12px;"
                      @click="showRatePlansListForUnit(room)" v-if="room.ShowRates && room.ShowMoreRates">Select
                      <!-- <i class="fa fa-sort-desc" aria-hidden="true"></i>  -->
                    </button>
                  </div>

                  <!-- <button class="btn btn-link show-hide-btn" @click="showRatePlansListForUnit(room)"
                      v-if="!room.ShowRates && room.ShowMoreRates">
                      <span>Select Rates
                        
                      </span>
                    </button> -->
                  <!-- <button class="btn btn-link show-hide-btn" @click="showRatePlansListForUnit(room)"
                      v-if="room.ShowRates && room.ShowMoreRates">
                      <span>Hide Rates
                       
                      </span>
                    </button> -->
                </div>

                <!-- <div class="avbSearchAmenities">
                      <i class="fas fa-bed"></i>
                  </div>
                  <div class="avbSearchPerNight">
                    <span class="asPerNightTotal"> $ 2,700</span>
                    <span class="pnTotal">$ 670 / Night</span>
                  </div> -->
              </div>
              <div class="dTable rpShowHide" v-if="room.ShowRates">
                <div class="dTHead">
                  <div class="dCell rp-rates">Rates</div>
                  <div class="dCell rp-total">Total</div>
                  <div class="dCell rp-minstay">Min stay</div>
                  <div class="dCell rp-btn"></div>
                </div>

                <div class="dTBody">
                  <!-- <div class="dTBodyRow">
                      <div class="dCell">Stataned Rate Plan</div>
                      <div class="dCell">$200</div>
                      <div class="dCell" style="flex-direction: row-reverse;"><button class="btn btn-primary btn-sm" @click="selectRoom(room)" style="width:100px; float:right;">Select</button></div>
                    </div> -->

                  <div class="dTBodyRow" v-for="rates in room.ratePlanList"
                    v-if="rates.actualinventory == 1 || !showactualinventory"
                    :class="{active : rates.RatePlanId == ratePlanId && (room.UnitId == roomInfo.UnitId || (room.UnitTypeId && room.UnitTypeId == roomInfo.UnitTypeId && room.UnitId == roomInfo.UnitId)), assigned : rates.actualinventory == 1 , unassigned:  rates.actualinventory == 0, restricted : rates.actualinventory == 2}">
                    <div class="dCell rp-rates" v-bind:title="rates.RatePlanName">{{rates.RatePlanName}}</div>
                    <div class="dCell rp-total">{{formatMoney(rates.TotalValue)}}</div>
                    <div class="dCell rp-minstay">{{rates.Minstayvalue}}</div>
                    <div class="dCell rp-btn" style="flex-direction: row-reverse;"><button
                        class="btn btn-primary btn-sm" @click="selectRoom(room,rates)">Select</button></div>
                  </div>
                </div>
              </div>
              <!-- <div>
                  <div v-if="room.ShowRates">
                    <table>
                      <th>Rates</th>
                      <th>Total</th>
                      <th></th>
                      <tr>
                        <td>Stataned Rate Plan</td>
                        <td>$200</td>
                        <td><button class="btn btn-primary btn-sm" @click="selectRoom(room)">Select</button></td>
                      </tr>
                      <tr v-for="rates in room.ratePlanList">
                        <td>{{rates.RatePlanName}}</td>
                        <td>{{rates.TotalValue}}</td>
                        <td><button class="btn btn-primary btn-sm">Select</button></td>
                      </tr>
                    </table>
                  </div>
                </div> -->
            </div>
            <div v-if="showactualinventory && noUnitsAvailable">
              <span class="ml-3">
                <i class="fa fa-exclamation-triangle" style="color:rgb(240, 62, 62)"></i>
                <span style="color:rgb(240, 62, 62)">No units available..!</span>
              </span>
            </div>
          </div>
        </div>
        <!-- <div class="row searchResults">
            <div class="col-md-12">
              <div class="card" v-if="showRooms && availableRoomsList.length !== 0" v-for="room in availableRoomsList">
                <div class="card-block mt-1" @click="selectRoom(room)">
  
                  <div class="col-md-12 pt-0">
                    <span class="img"></span>
                    <p class="pt-4 pl-2 pull-left">
                      <span v-if="room.PropertyNickName && room.PropertyNickName !== null">{{room.PropertyNickName}}</span>
                      <span v-else>{{room.PropertyName}}</span>
                      <br>{{room.UnitClassName}}
                      <br>
                      <span v-if="room.UnitNickName && room.UnitNickName !== null">{{room.UnitNickName}}</span>
                      <span v-else>{{room.UnitName}}</span>
                    </p>
                  </div>
  
                </div>
              </div>
              <div v-if="(showRooms && availableRoomsList && availableRoomsList.length === 0)">
                <span>No rooms available.</span>
              </div>
            </div>
          </div> -->
      </section>

      <section
        v-if="(displaySectionValue === 'reservation5' || displaySectionValue === 'reservation3') && !showPaymentOptions"
        class="pl-0 pt-0">
        <div class="custm-alert" v-if="honourFolio">
          <span> !Alert <span class="ml-3">This reservation does not meet the Rate restrictions</span></span>
        </div>
        <!-- <div class="editContinerHeading"> -->
        <div class="editContinerHeading folioTitleHeader gpTitleHeader">
          <div class="d-flex align-items-center">
            <!-- <button class="btn btn-default btn-sm" @click="backToMasterFolio()" style="width: 28px;padding: 4px 7px;" :disabled="!showBTFolioDetails">
                <i class="fa fa-long-arrow-left"></i>      
                </button>     
                <select class="form-control customSelectOpt" @change="getFolioDetails($event.target.value)" v-model="selectedInvoiceId" style="width: 120px;margin-left: 17px;height: 28px;padding: 2px 7px;">
                  <option value="-99">Master Folio </option>
                  <option v-for="btInvoice in balanceTransferDetails" :value="btInvoice.ItemId">{{btInvoice.QuickbookInvoiceNo && btInvoice.QuickbookInvoiceNo != null ? btInvoice.QuickbookInvoiceNo : btInvoice.InvoiceNo}}</option>            
                </select> -->
            <span class="">Master Folio</span>
            <!-- <span class="mt-2">Master Folio </span>   -->
            <div class="btn invoice-btn">
              <span class="ratePlanControl">
                <Select2 v-model="myValue" :settings="{placeholder: 'Search',width: '50%'}"
                  @select="myRatePlanSelectEvent($event)" :options="RatePlanList" />
              </span>
            </div>
          </div>






          <!-- class="pull-right" -->
          <!-- <button type="button"
              :disabled="(fncIsReservationReports && (fncIsReservationReports.isAssigned === -1 && fncIsReservationReports.functionState === 2) ) || ($route.params.ReservationId == -1)"
              v-if="fncIsReservationReports && (fncIsReservationReports.isAssigned === 1 || (fncIsReservationReports.isAssigned === -1 && fncIsReservationReports.functionState === 2)) "
              class="btn btn-primary btn-sm invoice-btn" @click="getFolioInvoice(guestInfo.DefaultInvoiceType)" data-toggle="modal"
              data-target="#invoiceToBePrinted" style="color:#fff; margin-left: 15px;">Invoice</button>
              <div class="invoice-dropdown">
                <div class="dropdown">
                  <button class="btn btn-default" type="button" data-toggle="dropdown" style="padding: 4px 5px; border-top-left-radius: 0 !important; border-bottom-left-radius: 0 !important;" :disabled="($route.params.ReservationId == -1)">
                    <i class="fa fa-chevron-down"></i>
                  </button>
                  <ul class="dropdown-menu">
                    <li data-toggle="modal"
                    data-target="#invoiceToBePrinted" @click="getFolioInvoice(1)"  :class="guestInfo.DefaultInvoiceType == 1 ? 'activeinvoice' : ''"><span>Reservation Invoice</span></li>
                    <li data-toggle="modal"
                    data-target="#invoiceToBePrinted" @click="getFolioInvoice(2)"  :class="guestInfo.DefaultInvoiceType == 2 ? 'activeinvoice' : ''"><span>Summarized Invoice</span></li>
                  </ul>
                </div>
              </div> -->

          <!-- rateplan edit -->
          <div class="searchGroup d-flex">
            <!-- New Change -->
            <button title="" v-if="guestInfo.CompanyProfileId"
              class="btn btn-default folio-setting mr-3 btn-sm btn-sm-icon" @click="showResFolioSetting()"
              style="box-shadow: unset;border: #bfbfbf solid 1px;width: 28px;height: 28px;padding:0.23rem 0.4rem;">
              <i class="fa fa-cog" aria-hidden="true"></i>
            </button>
            <div class="pull-right mr-3  positiveBalance invoice-dropdown balanceTransferDropdown dropdown d-flex"
              @click="getFolioInvoice(DetailedOrConsolidated)">
              <button title="More Options" class="btn btn-default dropdown-toggle  btn-sm btn-sm-icon" type="button"
                data-toggle="modal" data-target="#invoiceToBePrinted">
                <!-- <i class="fa fa-ellipsis-v"></i> -->
                <i class="fas fa-download"></i>
              </button>
            </div>
          </div>



          <!-- <span class="pull-right mr-3">
              <strong v-if="folioCharges.Balance !== null"></strong>
            </span> -->


          <!-- <strong v-if="folioCharges.Balance !== null" class="balanceNumeric pull-right mr-3"
              v-text="formatMoney(folioCharges.Balance)" :class="checkBalanceColor(folioCharges.Balance)"></strong>       -->

          <!-- <div class="pull-right" style="width: 50%; margin-left: 15px;">
              <span class="ratePlanControl">
                <Select2 v-model="myValue" :settings="{placeholder: 'Search',width: '50%'}"
                  @select="myRatePlanSelectEvent($event)" :options="RatePlanList" />
              </span>
            </div> -->

        </div>
        <div class="editContinerHeading click" @click="getFolioItemsDetail">
          <span class="mt-2">
            <i v-if="show" class="fa fa-chevron-down mr-2"></i>
            <i v-if="!show" class="fa fa-chevron-right mr-2"></i>
            <span v-if="!show">{{folioItemCount}}</span> Folio Items
            <!-- <span v-if="folioItemsDetails.length > 1">s</span> -->
            <button type="button" class="btn btn-primary btn-sm ml-2"
              :disabled="fncIsFolioNew && (fncIsFolioNew.isAssigned === -1 && fncIsFolioNew.functionState === 2) || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
              v-if="fncIsFolioNew && (fncIsFolioNew.isAssigned === 1 || (fncIsFolioNew.isAssigned === -1 && fncIsFolioNew.functionState === 2)) && !showRatePlanSave && !selectedFolioItemToEdit && !ShowDropdown && selectedItemCount"
              @click="showItems('displayAddFolioItem')"><i class="fa fa-plus"></i> Add Items</button>

            <button type="button" class="btn btn-primary btn-sm"
              :disabled="fncIsFolioNew && (fncIsFolioNew.isAssigned === -1 && fncIsFolioNew.functionState === 2) || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
              v-if="fncIsFolioNew && (fncIsFolioNew.isAssigned === 1 || (fncIsFolioNew.isAssigned === -1 && fncIsFolioNew.functionState === 2)) && !showRatePlanSave && !ShowDropdown && selectedItemCount && itemToEdit"
              @click="editFolioItem">Edit</button>
            <button @click="Cancel('cancelEditfolio')" class="btn btn-blank-danger btn-sm"
              v-if="ShowDropdown && !showRatePlanSave">Cancel</button>

            <!-- rateplan edit  cancel -->
            <button @click="cancelRatePlanEdit" class="btn btn-blank-danger btn-sm showRatePlanSave"
              v-if="showRatePlanSave">Cancel</button>
            <!-- rateplan edit  cancel -->



            <button type="button" class="btn btn-warning btn-sm editClass" @click="VoidCurrentFolioItem"
              :disabled="fncIsFolioUpdate && (fncIsFolioUpdate.isAssigned === -1 && fncIsFolioUpdate.functionState === 2) || isFolioDirty"
              v-if="fncIsFolioUpdate && (fncIsFolioUpdate.isAssigned === 1 || (fncIsFolioUpdate.isAssigned === -1 && fncIsFolioUpdate.functionState === 2)) && (selectedFolioItemToEdit || selectedVoidItem) && !showRatePlanSave && !ShowDropdown && !selectedFolioItemToEdit">Void</button>

            <button type="button" class="btn btn-blank-danger btn-sm editClass" @click="CancelUpdateFolioItem"
              :disabled="fncIsFolioUpdate && (fncIsFolioUpdate.isAssigned === -1 && fncIsFolioUpdate.functionState === 2)"
              v-if="fncIsFolioUpdate && (fncIsFolioUpdate.isAssigned === 1 || (fncIsFolioUpdate.isAssigned === -1 && fncIsFolioUpdate.functionState === 2)) && (selectedFolioItemToEdit || selectedVoidItem) && !showRatePlanSave && !ShowDropdown">Cancel</button>

            <button type="button" class="btn btn-success btn-sm" style="color:#fff; width: auto"
              @click="saveFolioItem(selectedLedger)"
              :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
              v-if="ShowDropdown && fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) && !showRatePlanSave">Save</button>

            <button type="button" class="btn btn-success btn-sm showRatePlanSave" style="color:#fff; width: auto"
              @click="onChangeRatePlan"
              :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
              v-if="showRatePlanSave && fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) ">Save</button>

            <button type="button" class="btn btn-success btn-sm editClass" @click="UpdateCurrentFolioItem"
              :disabled="fncIsFolioUpdate && (fncIsFolioUpdate.isAssigned === -1 && fncIsFolioUpdate.functionState === 2)"
              v-if="fncIsFolioUpdate && (fncIsFolioUpdate.isAssigned === 1 || (fncIsFolioUpdate.isAssigned === -1 && fncIsFolioUpdate.functionState === 2)) && selectedFolioItemToEdit && !selectedFolioItemToEdit.ispayment && !showRatePlanSave">Save</button>

          </span>
          <span v-if="folioCharges && folioCharges.TotalValue && folioCharges.TotalValue !== null"
            class="totalNumeric totalItems pull-right paymentNumeric"
            style="font-weight: 600 !important;font-size: 16px !important;">{{formatMoney(folioCharges.TotalValue)}}</span>


        </div>
        <div class="editFolioContiner folioItemsBody" v-show="show">
          <div class="dTable noMinW">
            <div class="dTHead">
              <div class="dCell"><label class="checkLabel"><input style="cursor: pointer;" type="checkbox"
                    v-model="selectAllFolio" v-on:change="selectAllFolioItems($event)"
                    :disabled="folioUpdate || ShowDropdown" /></label></div>
              <div class="dCell">DATE</div>
              <div class="dCell">DESCRIPTION</div>
              <div class="dCell" style="text-align:right">AMOUNT</div>
              <div class="dCell" style="text-align:right">TAX</div>
              <div class="dCell" style="text-align:right">TOTAL</div>
            </div>
            <div class="dTBody folioBody">
              <div v-for="(folioItem, index) in folioItemsDetails"
                :class="['dTBodyRow', folioItem.IsVoided ? 'voidedFolio' : (folioUpdate && selectedFolioItemToEdit && selectedFolioItemToEdit.ItemId == folioItem.ItemId ? 'editingFolioItem' : folioItem.isedited ? 'updatedFolio' :'newFolio'), folioItem.IsNewadded ? 'newlyAdded' : '']"
                v-if="displayVoidItems || folioItem.IsVoided === 0">
                <div class="dCell">
                  <label class="checkLabel" v-if="!folioItem.IsNewadded">
                    <input style="cursor: pointer;" v-if="!folioItem.IsVoided" type="checkbox"
                      v-model="folioItem.Ischecked" v-on:change="selectFolioitem($event,folioItem)"
                      :disabled="folioUpdate || ShowDropdown" />
                  </label>
                </div>

                <div v-on:click="scrollToCalender(index + 1, folioItemsDetails.length)" class="dCell"
                  :class="{folioEditOnfocus:folioDateChange}"
                  v-if="folioUpdate && !folioItem.ispayment && (selectedFolioItemToEdit && selectedFolioItemToEdit.ItemId == folioItem.ItemId) && !folioItem.IsNewadded && !folioItem.IsVoided">
                  <!-- <input type="text" v-model="folioItem.DateEffective"> -->
                  <datePickerComponent
                    :isDisabled="fncIsFolioUpdate && (fncIsFolioUpdate.isAssigned === -1 && fncIsFolioUpdate.functionState === 2)"
                    v-if="fncIsFolioUpdate && (fncIsFolioUpdate.isAssigned === 1 || (fncIsFolioUpdate.isAssigned === -1 && fncIsFolioUpdate.functionState === 2)) "
                    :value="selectedFolioItemToEdit.DateEffective" :onUpdate="updateFolioEffectiveDate"
                    format="DD MMM YYYY" sourceFormat="'YYYY-MM-DD'" :pickerType="'date'"
                    :objectPassedToParent="selectedFolioItemToEdit">
                  </datePickerComponent>
                </div>
                <div class="dCell" v-else>{{formatDate(folioItem.DateEffective)}}</div>

                <div class="dCell"
                  v-if="folioUpdate && !folioItem.ispayment && (selectedFolioItemToEdit && selectedFolioItemToEdit.ItemId == folioItem.ItemId) && !folioItem.IsNewadded && !folioItem.IsVoided">
                  <!-- <input class="form-control" style="margin: -5px 0;" type="text" v-model="folioItem.ItemDescription"> -->
                  <select
                    :class="{folioEditOnfocus: selectedFolioItemToEdit.ledgerAccountId != folioItem.ledgerAccountId}"
                    :disabled="fncIsFolioUpdate && (fncIsFolioUpdate.isAssigned === -1 && fncIsFolioUpdate.functionState === 2)"
                    v-if="fncIsFolioUpdate && (fncIsFolioUpdate.isAssigned === 1 || (fncIsFolioUpdate.isAssigned === -1 && fncIsFolioUpdate.functionState === 2)) "
                    class="form-control" v-model="selectedFolioItemToEdit.ledgerAccountId">
                    <option v-for="LedgerItem in LedgerAcounts" v-bind:value="LedgerItem.ledgerAccountID">
                      {{LedgerItem.ledgerAccountName}}</option>
                  </select>
                </div>
                <div class="dCell" v-else>{{folioItem.ItemDescription}}</div>

                <div class="dCell" style="text-align:right;"
                  v-if="(folioUpdate && !folioItem.ispayment && (selectedFolioItemToEdit && selectedFolioItemToEdit.ItemId == folioItem.ItemId)) && !showDefaultAmount && !folioItem.IsNewadded && !folioItem.IsVoided">
                  <input
                    :class="{folioEditOnfocus: selectedFolioItemToEdit.ActualFolioAmount != folioItem.ActualFolioAmount}"
                    :disabled="fncIsFolioUpdate && (fncIsFolioUpdate.isAssigned === -1 && fncIsFolioUpdate.functionState === 2)"
                    v-if="fncIsFolioUpdate && (fncIsFolioUpdate.isAssigned === 1 || (fncIsFolioUpdate.isAssigned === -1 && fncIsFolioUpdate.functionState === 2)) "
                    class="form-control" style="text-align: right" type="text"
                    v-model="selectedFolioItemToEdit.ActualFolioAmount">
                </div>
                <div class="dCell" style="text-align:right" v-else>{{formatMoney(folioItem.FolioAmount)}}</div>
                <div class="dCell" style="text-align:right;"
                  v-if="(folioUpdate && !folioItem.ispayment && (selectedFolioItemToEdit && selectedFolioItemToEdit.ItemId == folioItem.ItemId)) && showDefaultAmount && !folioItem.IsNewadded && !folioItem.IsVoided">
                  <input
                    :class="{folioEditOnfocus: selectedFolioItemToEdit.ActualTaxAmount != folioItem.ActualTaxAmount}"
                    :disabled="fncIsFolioUpdate && (fncIsFolioUpdate.isAssigned === -1 && fncIsFolioUpdate.functionState === 2)"
                    v-if="fncIsFolioUpdate && (fncIsFolioUpdate.isAssigned === 1 || (fncIsFolioUpdate.isAssigned === -1 && fncIsFolioUpdate.functionState === 2)) "
                    class="form-control" style="text-align: right" type="text"
                    v-model="selectedFolioItemToEdit.ActualTaxAmount">
                </div>

                <div class="dCell" style="text-align:right" v-else>{{formatMoney(folioItem.TaxAmount)}}</div>
                <!-- <div class="dCell" style="text-align:right" v-if="folioItem.editable">
                    <input type="text" v-model="folioItem.TaxAmount">
                  </div> -->

                <div class="dCell" style="text-align:right">{{formatMoney(folioItem.Total)}}</div>
                <!-- <div class="dCell" style="text-align:right" v-if="folioItem.editable">
                    <input type="text" v-model="folioItem.Total">
                  </div> -->
              </div>
              <div class="dTBodyRow" v-show="ShowDropdown"
                v-if="selectedLedger && showPreviewButton && !showRatePlanSave">
                <div class="dCell">
                  <button @click="expandPreview" class="btn btn-primary addItemPreview"><i
                      class="fal fa-long-arrow-down"></i></button>
                </div>
                <div class="dCell" @click="scrollDown(folioItemsDetails.length)">
                  <datePickerComponent
                    :disabled="fncIsFolioUpdate && (fncIsFolioUpdate.isAssigned === -1 && fncIsFolioUpdate.functionState === 2)"
                    v-if="fncIsFolioUpdate && (fncIsFolioUpdate.isAssigned === 1 || (fncIsFolioUpdate.isAssigned === -1 && fncIsFolioUpdate.functionState === 2)) "
                    :value="selectedLedger.dateEffective" :onUpdate="updateFolioEffectiveDate" format="DD MMM YYYY"
                    sourceFormat="'YYYY-MM-DD'" defaultValue="today" :pickerType="'date'"
                    :objectPassedToParent="selectedLedger"></datePickerComponent>
                </div>
                <div class="dCell">
                  <select class="form-control" v-focus="focused" @focus="focused = true" @blur="focused = false"
                    v-validate="'required'" v-model="selectedLedger.ledgerAccountID">
                    <option v-for="LedgerItem in LedgerAcounts" v-bind:value="LedgerItem.ledgerAccountID">
                      {{LedgerItem.ledgerAccountName}}</option>
                  </select>
                </div>
                <div class="dCell" style="text-align:right">
                  <input class="form-control" ref="ledger" type="text" v-model="selectedLedger.defaultAmount"
                    v-if="!showDefaultAmount" style="text-align: right">
                </div>
                <div class="dCell" style="text-align:right">
                  <input class="form-control" ref="ledger" type="text" v-model="selectedLedger.TaxAmount"
                    v-if="showDefaultAmount" style="text-align: right">
                </div>
                <div class="dCell" style="text-align:right" v-if="!showDefaultAmount">
                  <input class="form-control" type="text" v-model="selectedLedger.defaultAmount"
                    style="text-align: right">
                </div>
                <div class="dCell" style="text-align:right" v-if="showDefaultAmount">
                  <input class="form-control" type="text" v-model="selectedLedger.TaxAmount" style="text-align: right">
                </div>
              </div>
              <!-- <div class="dTBodyRow" v-if="selectedLedger&& !showPreviewButton" v-for="item in previewItems">
                    <div class="dCell">
                    </div>
                    <div class="dCell">
                      <span>{{formatDate(item.DateEffective)}}</span>
                      
                    </div>
                    <div class="dCell" style="min-width: 145px;">
                      
                      <span>{{item.ItemDescription}}</span>
                    </div>
                    <div class="dCell" style="text-align:right">
                      
                      <span>{{formatMoney(item.FolioAmount)}}</span>
                    </div>
                    <div class="dCell" style="text-align:right">
                    
                      <span>{{formatMoney(item.TaxAmount)}}</span>
                    </div>
                    <div class="dCell" style="text-align:right">
                    
                      <span>{{formatMoney(item.Total)}}</span>
                    </div>
                  </div> -->
              <div class="dTBodyRow" v-show="ShowDropdown">
                <div class="dCell" style="align-items: flex-end;
                    flex-wrap: nowrap;
                    flex-direction: row-reverse;">
                </div>

              </div>
            </div>
            <div class="dTBody folioFooter" style="overflow: visible">
              <div class="dTBodyRow">
                <div class="dCell" style="font-weight:bold;max-width: 12%;">Subtotal:</div>
                <div class="dCell" style="font-weight:bold;"></div>
                <div class="dCell" style="font-weight:bold;min-width: 15%;">&nbsp;</div>
                <div class="dCell" style="text-align:right;min-width: 19%;"
                  v-if="folioCharges && folioCharges.TotalFolio">
                  {{formatMoney(folioCharges.TotalFolio)}}
                </div>
                <div class="dCell" style="text-align:right" v-if="folioCharges && folioCharges.TotalTax">
                  {{ formatMoney(folioCharges.TotalTax)}}</div>
                <div class="dCell" style="text-align:right; padding-right: 19px"
                  v-if="folioCharges && folioCharges.TotalValue">{{formatMoney(folioCharges.TotalValue)}}</div>
              </div>
            </div>
          </div>

          <!-- <table class="table table-bordered userTable folioTable">
              <thead>
                <tr>
                  <th>DESCRIPTION</th>
                  <th style="text-align:right">AMOUNT</th>
                  <th style="text-align:right">TAX</th>
                  <th style="text-align:right">TOTAL</th>
                </tr>
              </thead>
              <tbody>
                <tr v-for="folioItem in folioItemsDetails">
                  <td>{{folioItem.ItemDescription}}</td>
                  <td style="text-align:right">{{folioItem.FolioAmount}}</td>
                  <td style="text-align:right">{{folioItem.TaxAmount}}</td>
                  <td style="text-align:right">{{folioItem.Total}}</td>
                </tr>
                <tr v-show="ShowDropdown">
                  <td>
                    <select class="form-control" v-validate="'required'" v-model="selectedLedger">
                      <option v-for="LedgerItem in LedgerAcounts" v-bind:value="LedgerItem">{{LedgerItem.ledgerAccountName}}</option>
                    </select>
                  </td>
                  <td>
                    <input class="form-control" type="text" v-model="selectedLedger.defaultAmount">
                  </td>
                  <td>
                    <input class="form-control" type="text">
                  </td>
                  <td>
                    <input class="form-control" type="text" v-model="selectedLedger.defaultAmount">
                  </td>
                </tr>
                <tr v-show="ShowDropdown">
                  <td colspan="4">
                    <button type="button" class="btn btn-success btn-sm" style="color:#fff; float:right; margin-left: 15px" @click="addFolioItem(selectedLedger)"
                      :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
                      v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) ">Apply</button>
                    <span @click="Cancel" class="" style="float:right; color:red">Cancel</span>
                  </td>
                </tr>
                <tr v-if="folioItemsCharges">
                  <td style="font-weight:bold">Subtotal:</td>
                  <td style="font-weight:bold; text-align:right">{{folioItemsCharges.TotalFolio}}</td>
                  <td style="font-weight:bold; text-align:right">{{folioItemsCharges.TotalTax}}</td>
                  <td style="font-weight:bold; text-align:right">{{folioItemsCharges.TotalValue}}</td>
                </tr>
              </tbody>
            </table> -->

          <div class=" pull-left noClear ml-3 mt-1">
            <label style="float:left;     margin: 4px 12px 0 0; font-size: 12px; color: #555555;">Show Void Items
            </label>
            <label class="slideCheck">
              <input type="checkbox" v-model="displayVoidItems">
              <span></span>
            </label>
          </div>

          <div class=" pull-left noClear ml-3 mt-1">
            <label style="float:left;     margin: 4px 12px 0 0; font-size: 12px; color: #555555;">Tax Exempt</label>
            <label class="slideCheck">
              <input type="checkbox" v-model="folioCharges.IsTaxExempt" @change="SaveTaxExemptForReservation">
              <span></span>
            </label>
          </div>
          <div v-if="displayVoidItems && voidedItemsCount == 0" class="pull-left noClear ml-3 mt-1 errorMsg">
            <label>No void items to show</label>
          </div>

        </div>

        <div class="editContinerHeading click" @click="getPaymentsDetail"
          :disabled="fncIsPaymentView && (fncIsPaymentView.isAssigned === -1 && fncIsPaymentView.functionState === 2)"
          v-if="fncIsPaymentView &&  (fncIsPaymentView.isAssigned ===1 || (fncIsPaymentView.isAssigned === -1 && fncIsPaymentView.functionState === 2))">
          <span class="mt-2">
            <i v-if="showPayments" class="fa fa-chevron-down mr-2"></i>
            <i v-if="!showPayments" class="fa fa-chevron-right mr-2"></i>
            <span v-if="!showPayments && Object.keys(paymentDetails).length == 0">No payments</span>
            <span
              v-else-if="!showPayments && Object.keys(paymentDetails).length !== 0 && Object.keys(paymentDetails).length > 1">{{Object.keys(paymentDetails).length}}
              Payments
            </span>
            <span v-else>{{Object.keys(paymentDetails).length}} Payment</span>
            <button type="button" class="btn btn-primary btn-sm ml-2" @click="addPayment"
              :disabled="fncIsPaymentAdd && (fncIsPaymentAdd.isAssigned === -1 && fncIsPaymentAdd.functionState === 2)"
              v-if="(fncIsPaymentAdd &&  (fncIsPaymentAdd.isAssigned ===1 || (fncIsPaymentAdd.isAssigned === -1 && fncIsPaymentAdd.functionState === 2)))&& !showAddPaymentDetail">
              <i class="fa fa-plus"></i> Add Payment
            </button>
            <button type="button" class="btn btn-blank-danger btn-sm" @click="cancelPayment"
              v-if="showAddPaymentDetail">Cancel</button>
            <button type="button" class="btn btn-success btn-sm" @click="makePayment" :disabled="disableMultiProcess"
              v-if="showAddPaymentDetail">{{buttonName}}</button>

            <!-- <span v-if="paymentDetails.length > 1">s</span> -->
          </span>
          <span v-if="PaymentMode == 'Test Mode'"
            style="color:red; margin-left: calc(25% - 10%);">{{PaymentMode}}</span>
          <span v-else style="color:green;margin-left: 150px">{{PaymentMode}}</span>
          <span v-if="folioCharges && folioCharges.Payments !== null"
            class="totalNumeric totalItems pull-right paymentNumeric"
            style="font-weight: 600 !important;font-size: 16px !important;">{{'$ ' + folioCharges.Payments}}</span>
        </div>
        <div class="editPaymentList"
          :disabled="fncIsPaymentView && (fncIsPaymentView.isAssigned === -1 && fncIsPaymentView.functionState === 2)"
          v-if="(fncIsPaymentView &&  (fncIsPaymentView.isAssigned ===1 || (fncIsPaymentView.isAssigned === -1 && fncIsPaymentView.functionState === 2)))&&!showPaymentDetails"
          v-show="showPayments" style="padding: 15px; background: #f9faff">
          <div v-if="pendingPaymentDetails.length > 0 || Object.keys(paymentDetails).length > 0">
            <!-- <ul class="paymentProcessTable">
                <li>
                  <div class="heading">
                    <div class="payment-type">Payment Method</div>
                    <div class="payment-process">Transaction</div>
                    <div class="payment-date">DATE</div>
                    <div class="amt">AMOUNT</div>
                  </div>
                </li>
                <li class="body" v-for="(payment,index) in paymentDetails">
                  <div class="payment-type">
                    <div class="expRow">
                      <span
                        v-if="!payment.showChildPaymentDetails && (payment.childPaymentDetails.length > 0 || (payment.PendingchildPaymentitems && payment.PendingchildPaymentitems.length > 0))"
                        @click="showChildPaymentItems(payment)"><i class="fa fa-plus"></i></span>
                      <span
                        v-if="payment.showChildPaymentDetails && (payment.childPaymentDetails.length > 0 || (payment.PendingchildPaymentitems && payment.PendingchildPaymentitems.length > 0))"
                        @click="hideChildPaymentItems(payment)"><i class="fa fa-minus"></i></span>
                    </div>
  
                    <span v-if="payment.parentPaymentDetails.isManualMode" class="PaymentType">M</span>
                    <span class="stripe-icon" v-else></span>
                    <span
                      v-if="payment.parentPaymentDetails.CCLast4Digits !== null">{{'****-' + payment.parentPaymentDetails.CCLast4Digits}}</span>
                    <span v-else>{{payment.parentPaymentDetails.CardType}}</span>
                    <span v-if="payment.parentPaymentDetails.CardType != 'Cash'"
                      :class="['cardType', payment.parentPaymentDetails.CardType]"></span>
                  </div>
                  <div class="payment-process">
                    <span>{{payment.parentPaymentDetails.PaymentStatusName}}</span> 
                    <span class="">
                        <i v-if="payment.parentPaymentDetails.CardType != 'Cash' && (fncIsPaymentTransaction && (fncIsPaymentTransaction.isAssigned === 1 || (fncIsPaymentTransaction.isAssigned === -1 && fncIsPaymentTransaction.functionState === 2)))" style="margin-left: 3px; color: #8c8c8c; cursor: pointer;" class="far fa-info-circle" @click="showTransactionData(payment.parentPaymentDetails.gatewayResponseData)"></i>
                    </span>
                   
                    <label class="processesLink"
                      v-if="showNextProcessButton && payment.parentPaymentDetails.NextPaymentStatusName"
                      @click="addPendingchildPaymentitems(payment,'NextPaymentStatus')" style="cursor: pointer;">{{payment.parentPaymentDetails.NextPaymentStatusName}}</label>
                      <label class="processesLink"
                      v-if="showNextProcessButton && payment.parentPaymentDetails.NextPaymentStatusName2"
                      @click="addPendingchildPaymentitems(payment,'NextPaymentStatus2')" style="cursor: pointer;">Release</label>
                  </div>
                  <div class="payment-date"><span>{{formatDate(payment.parentPaymentDetails.PaymentDate)}}</span>
                  </div>
                  <div class="amt">
                    <span>{{formatMoney(payment.parentPaymentDetails.Amount)}}</span>
                  </div>
                  <ul class="childRow" v-if="payment.showChildPaymentDetails">
                    <li v-for="childPayment in payment.childPaymentDetails" v-if="payment.showChildPaymentDetails">
                      <div class="empty-paytype">
                       
                      </div>
                      <div class="payment-process"> 
                        <span>{{childPayment.PaymentStatusName}}</span>
                        <i v-if="childPayment.CardType != 'Cash' && (fncIsPaymentTransaction && (fncIsPaymentTransaction.isAssigned === 1 || (fncIsPaymentTransaction.isAssigned === -1 && fncIsPaymentTransaction.functionState === 2)))" class="far fa-info-circle" style="margin-left: 3px; color: #8c8c8c; cursor: pointer;" @click="showTransactionData(paymentDetails,payment.parentPaymentDetails,payment.childPaymentDetails,'child',index)"></i> 
                      </div>
                      <div>{{formatDate(childPayment.PaymentDate)}}</div>
                      <div class="amt">{{formatMoney(childPayment.Amount)}}</div>
                    </li>
                    <li v-for="childPaymentitem in payment.PendingchildPaymentitems"
                      v-if="payment.showChildPaymentDetails">
                      <div class="empty-paytype"> 
                       
                      </div>
                      <div>
                        <span v-if="childPaymentitem.NextProcess">{{childPaymentitem.NextPaymentStatusName}}</span>
                        <span v-else>{{childPaymentitem.NextPaymentStatusName2}}</span>
                      </div>
                      <div>{{formatDate(childPaymentitem.PaymentDate)}}</div>
                      <div class="amt">
                          <span v-if="!childPaymentitem.NextProcess">{{childPaymentitem.Amount}}</span>
                        <input v-else style="text-align:right; padding: 3px 5px; height: unset; margin-right: -3px;" type="text" v-model="childPaymentitem.Amount"
                          class="form-control" />
                      </div>
                    </li>
                  </ul>
                </li>
                <li class="body" v-for="payment in pendingPaymentDetails">
                  <div>
                    <div class="dropdown pull-left paymentDropDown">
                      <button class="btn btn-default btn-sm dropdown-toggle  pull-left paymentInfo" data-toggle="dropdown"
                        style="border: 1px solid rgba(0, 0, 0, 0.22);     padding: 8px 12px; height: unset">
                        <span
                          v-if="selectedPaymentCardDetails && selectedPaymentCardDetails.CCLast4Digits">{{'****-' + selectedPaymentCardDetails.CCLast4Digits}}</span>&nbsp;
                        <span
                          v-if="selectedPaymentCardDetails && !selectedPaymentCardDetails.CCLast4Digits">Cash</span>&nbsp;
                        <span v-if="!selectedPaymentCardDetails">Select payment option</span>
                        <i class="fas fa-caret-down"></i>
                      </button>
                      <ul class="dropdown-menu">
                        <li>
                          <div class="cardInfoSec" @click="selectPaymentDetails('cash')">
                            <span>Cash</span>
                            <br>
                          </div>
                        </li>
                        <li v-for="cardInfo in guestPaymentCards">
                          <div class="cardInfoSec" @click="selectPaymentDetails(cardInfo)">
                            <span v-text="cardInfo.NameOnCard"></span>
                            <br>
                            <span>{{'**** **** **** ' +cardInfo.CCLast4Digits}}</span>
                            <span :class="['cardType',cardInfo.CardType]"></span>
                          </div>
                          <button @click="viewCurrentCardDetails(cardInfo)" v-if="false">
                            <i class="far fa-pen"></i>
                          </button>
                        </li>
                        <li v-if="guestPaymentCards.length == 0" @click="addPaymentDetails(true)">Add Payment Options</li>
                      </ul>
                    </div>
                  </div>
                  <div v-if="selectedPaymentCardDetails && selectedPaymentCardDetails.PaymentInfoId == 'Cash'">cash</div>
                  <div v-if="selectedPaymentCardDetails && selectedPaymentCardDetails.PaymentInfoId != 'Cash'">
                    <select class="form-control" v-model="paymentProcessMethod">
                      <option value="null">Select Transaction</option>
                      <option v-for="paymentProcess in paymentProcessList" :value="paymentProcess.PaymentStatusID">
                        {{paymentProcess.PaymentStatusName}}</option>
                    </select>
                  </div>
                  <div>
                    <datePickerComponent :keyString="'fromDate'" v-model="payment.dateEffective" :value="payment.dateEffective" class="checkInDate"
                      :format="'DD MMM YYYY'" :onUpdate="updatePaymentDate" :pickerType="'date'"
                      v-if="selectedPaymentCardDetails && !selectedPaymentCardDetails.CCLast4Digits">
                    </datePickerComponent>
                    <span v-else>{{getTodayDate()}}</span>
                  </div>
                  <div class="amt">
                    <input style="text-align:right" type="text" v-model="payment.Amount" class="form-control" />
                  </div>
                </li>
              </ul> -->


            <!-- Payment Table New -->

            <div class="paymentProcessesList">
              <div class="head">
                <div class="pplRow">
                  <div class="cell dt">DATE</div>
                  <div class="cell pm">Payment Method</div>
                  <div class="cell ts">Transaction</div>

                  <div class="cell amt">AMOUNT</div>
                </div>
              </div>
              <div class="body">
                <div class="pdWrap" v-for="(payment,index) in paymentDetails">
                  <div class="pplRow">
                    <div class="cell dt">
                      <div class="expRow">
                        <!-- v-if="payment.PendingchildPaymentitems && payment.PendingchildPaymentitems.length > 0" -->
                        <span
                          v-if="!payment.showChildPaymentDetails && (payment.childPaymentDetails.length > 0 || (payment.PendingchildPaymentitems && payment.PendingchildPaymentitems.length > 0))"
                          @click="showChildPaymentItems(payment)">
                          <i class="fa fa-plus"></i>
                        </span>
                        <span
                          v-if="payment.showChildPaymentDetails && (payment.childPaymentDetails.length > 0 || (payment.PendingchildPaymentitems && payment.PendingchildPaymentitems.length > 0))"
                          @click="hideChildPaymentItems(payment)">
                          <i class="fa fa-minus"></i>
                        </span>
                      </div>{{formatInvoiceUtcDate(payment.parentPaymentDetails.PaymentDate)}}
                    </div>
                    <div class="cell pm">


                      <span v-if="payment.parentPaymentDetails.isManualMode" class="PaymentType">M</span>
                      <!-- <span class="stripe-icon" v-else></span> -->
                      <span
                        :class="{'slimcd-icon' : payment.parentPaymentDetails.GatewayId == 2, 'stripe-icon' : payment.parentPaymentDetails.GatewayId == 1}"
                        v-else></span>

                      <span v-if="payment.parentPaymentDetails.CCLast4Digits !== null">{{'****-' +
                        payment.parentPaymentDetails.CCLast4Digits}}</span>
                      <span class="pm-info" v-bind:title="payment.parentPaymentDetails.CardType"
                        v-else>{{payment.parentPaymentDetails.CardType}}</span>
                      <span v-if="payment.parentPaymentDetails.CardType"
                        :class="['cardType', payment.parentPaymentDetails.CardType]"></span>
                    </div>
                    <div class="cell ts">
                      <span>{{payment.parentPaymentDetails.PaymentStatusName}}</span>
                      <span>
                        <i v-if="payment.parentPaymentDetails.gatewayResponseData && payment.parentPaymentDetails.CardType != 'Cash' && (fncIsPaymentTransaction && (fncIsPaymentTransaction.isAssigned === 1 || (fncIsPaymentTransaction.isAssigned === -1 && fncIsPaymentTransaction.functionState === 2)))"
                          style="margin-left: 3px; color: #8c8c8c; cursor: pointer;" class="far fa-info-circle"
                          :class="payment.parentPaymentDetails.PaymentStatusID == 3 ? 'faliedTransaction' : ''"
                          @click="showTransactionData(payment.parentPaymentDetails.gatewayResponseData)"></i>
                      </span>
                      <!-- <div v-if="payment.parentPaymentDetails.showGatewayResponseData">{{payment.parentPaymentDetails.gatewayResponseData}}</div> -->
                      <label class="processesLink"
                        :disabled="disableAddOrUpdate(payment.parentPaymentDetails.NextPaymentStatusId)"
                        v-if="addOrUpdate(payment.parentPaymentDetails.NextPaymentStatusId) && showNextProcessButton && payment.parentPaymentDetails.NextPaymentStatusName"
                        @click="addPendingchildPaymentitems(payment,'NextPaymentStatus','parent')"
                        style="cursor: pointer;">{{payment.parentPaymentDetails.NextPaymentStatusName}}</label>
                      <label class="processesLink"
                        :disabled="fncIsPaymentUpdate && (fncIsPaymentUpdate.isAssigned === -1 && fncIsPaymentUpdate.functionState === 2)"
                        v-if="(fncIsPaymentUpdate && (fncIsPaymentUpdate.isAssigned === 1 || (fncIsPaymentUpdate.isAssigned === -1 && fncIsPaymentUpdate.functionState === 2))) && showNextProcessButton && payment.parentPaymentDetails.NextPaymentStatusName2"
                        @click="addPendingchildPaymentitems(payment,'NextPaymentStatus2','parent')"
                        style="cursor: pointer;">Release</label>
                    </div>
                    <!-- <div class="cell dt">{{formatDate(payment.parentPaymentDetails.PaymentDate)}}</div> -->
                    <div class="cell amt">{{formatMoney(payment.parentPaymentDetails.Amount)}}</div>
                  </div>
                  <div class="pplRow subRow" v-for="childPayment in payment.childPaymentDetails"
                    v-if="payment.showChildPaymentDetails">
                    <div class="cell empty blank">
                      <span></span>&nbsp;
                    </div>
                    <div class="cell dt">{{formatInvoiceUtcDate(childPayment.PaymentDate)}}</div>
                    <div class="cell empty">
                      <span></span>&nbsp;
                    </div>
                    <div class="cell ts">
                      <span>{{childPayment.PaymentStatusName}}</span>
                      <span>
                        <i v-if="childPayment.gatewayResponseData && childPayment.CardType != 'Cash' && (fncIsPaymentTransaction && (fncIsPaymentTransaction.isAssigned === 1 || (fncIsPaymentTransaction.isAssigned === -1 && fncIsPaymentTransaction.functionState === 2)))"
                          :class="childPayment.PaymentStatusID == 3 ? 'faliedTransaction' : ''"
                          class="far fa-info-circle" style="margin-left: 3px; color: #8c8c8c; cursor: pointer;"
                          @click="showTransactionData(childPayment.gatewayResponseData)"></i>
                      </span>
                      <label class="processesLink" :disabled="disableAddOrUpdate(childPayment.NextPaymentStatusId)"
                        v-if="addOrUpdate(childPayment.NextPaymentStatusId) && showNextProcessButton && childPayment.NextPaymentStatusName"
                        @click="addPendingchildPaymentitems(payment,'NextPaymentStatus','child',childPayment)"
                        style="cursor: pointer;">{{childPayment.NextPaymentStatusName}}</label>
                      <label class="processesLink"
                        :disabled="fncIsPaymentUpdate && (fncIsPaymentUpdate.isAssigned === -1 && fncIsPaymentUpdate.functionState === 2)"
                        v-if="(fncIsPaymentUpdate && (fncIsPaymentUpdate.isAssigned === 1 || (fncIsPaymentUpdate.isAssigned === -1 && fncIsPaymentUpdate.functionState === 2))) && showNextProcessButton && childPayment.NextPaymentStatusName2"
                        @click="addPendingchildPaymentitems(payment,'NextPaymentStatus2','child',childPayment)"
                        style="cursor: pointer;">{{childPayment.NextPaymentStatusName2}}</label>
                    </div>
                    <!-- <div class="cell dt">{{formatDate(childPayment.PaymentDate)}}</div> -->
                    <div class="cell amt">{{formatMoney(childPayment.Amount)}}</div>
                  </div>
                  <div class="pplRow subRow" v-for="childPaymentitem in payment.PendingchildPaymentitems"
                    v-if="payment.showChildPaymentDetails">
                    <div class="cell empty blank">
                      <span></span>&nbsp;
                    </div>
                    <div class="cell dt">{{formatInvoiceUtcDate(childPaymentitem.PaymentDate)}}</div>
                    <div class="cell empty">
                      <span></span>&nbsp;
                    </div>
                    <div class="cell ts">
                      <span v-if="childPaymentitem.NextProcess">{{childPaymentitem.NextPaymentStatusName}}</span>
                      <span v-else>{{childPaymentitem.NextPaymentStatusName2}}</span>
                    </div>
                    <!-- <div class="cell dt">{{formatDate(childPaymentitem.PaymentDate)}}</div> -->
                    <div class="cell amt child-input-icon">
                      <span v-if="!childPaymentitem.NextProcess">{{formatMoney(childPaymentitem.BalanceAmount)}}</span>
                      <input v-else style="text-align:right; padding: 3px 5px; height: unset; margin-right: -3px;"
                        type="text" v-model="childPaymentitem.BalanceAmount" class="form-control" />
                      <i v-if="childPaymentitem.NextProcess"
                        :class="!childPaymentitem.NextProcess && 'child-icon-release'"
                        style="font-size: 13px;position: absolute;top: 48%;width: 20px;">$</i>
                    </div>
                  </div>
                </div>
                <!-- Pending Payments -->
                <div class="pdWrap" v-for="payment in pendingPaymentDetails">
                  <div class="pplRow">
                    <div class="cell dt">
                      <datePickerComponent :keyString="'fromDate'" v-model="payment.dateEffective"
                        :value="payment.dateEffective" class="checkInDate" :format="'DD MMM YYYY'"
                        :onUpdate="updatePaymentDate" :pickerType="'date'"
                        v-if="selectedPaymentCardDetails && !selectedPaymentCardDetails.CCLast4Digits">
                      </datePickerComponent>
                      <span class="" style="margin-left: 30px; top: 10px; position: relative;"
                        v-else>{{getTodayDate()}}</span>
                    </div>
                    <div class="cell pm">
                      <div class="dropdown pull-left paymentDropDown">
                        <!-- <button class="btn btn-primary btn-sm pull-left" v-if="guestPaymentCards.length == 0" @click="addPaymentDetails">Add Payment Options</button> -->
                        <button class="btn btn-default btn-sm dropdown-toggle  pull-left paymentInfo"
                          data-toggle="dropdown">
                          <span v-if="selectedPaymentCardDetails && selectedPaymentCardDetails.CCLast4Digits">{{'****-'
                            + selectedPaymentCardDetails.CCLast4Digits}}
                          </span>
                          <span v-if="selectedPaymentCardDetails && selectedPaymentCardDetails.CCLast4Digits "
                            :class="['cardType',selectedPaymentCardDetails.CardType]"></span>&nbsp;
                          <span class="cardLedgerInfo" :title="selectedPaymentCardDetails.PaymentInfoId"
                            v-if="selectedPaymentCardDetails && !selectedPaymentCardDetails.CCLast4Digits && selectedPaymentCardDetails.PaymentInfoId ">{{selectedPaymentCardDetails.PaymentInfoId}}</span>&nbsp;
                          <span v-if="!selectedPaymentCardDetails" title="Select payment">Select payment</span>
                          <i class="fas fa-caret-down"></i>
                        </button>
                        <ul class="dropdown-menu">
                          <li v-for="payment in paymentLedgerAcounts" v-if="payment.IsCreditcard == false">
                            <div class="cardInfoSec" @click="selectPaymentDetails(payment,'manual')">
                              <span>{{payment.PaymentMethod}}</span>
                              <br>
                            </div>
                          </li>
                          <li v-for="cardInfo in guestPaymentCards">
                            <div class="cardInfoSec" @click="selectPaymentDetails(cardInfo,'notmanual')">
                              <span v-text="cardInfo.NameOnCard"></span>
                              <br>
                              <span>{{'**** **** **** ' +cardInfo.CCLast4Digits}}</span>
                              <span :class="['cardType',cardInfo.CardType]"></span>
                            </div>
                            <button @click="viewCurrentCardDetails(cardInfo)" v-if="false">
                              <i class="far fa-pen"></i>
                            </button>
                          </li>
                          <li style="padding:15px;" v-if="guestPaymentCards.length == 0"
                            @click="addPaymentDetails(true)">Add Payment Options</li>
                        </ul>
                      </div>
                    </div>

                    <div class="cell ts" v-if="selectedPaymentCardDetails && selectedPaymentCardDetails.CCLast4Digits">
                      <select class="form-control" v-model="paymentProcessMethod">
                        <option value="null">Select Transaction</option>
                        <option v-for="paymentProcess in paymentProcessList" :value="paymentProcess.PaymentStatusID">
                          {{paymentProcess.PaymentStatusName}}</option>
                      </select>
                    </div>
                    <div class="cell ts"
                      v-else-if="selectedPaymentCardDetails && selectedPaymentCardDetails.PaymentInfoId">
                      <span style="line-height: 40px;">{{selectedPaymentCardDetails.PaymentInfoId}}</span>
                    </div>
                    <div class="cell ts" v-else></div>
                    <!-- <div class="cell dt">
                            <datePickerComponent :keyString="'fromDate'" v-model="payment.dateEffective" :value="payment.dateEffective" class="checkInDate"
                              :format="'DD MMM YYYY'" :onUpdate="updatePaymentDate" :pickerType="'date'"
                              v-if="selectedPaymentCardDetails && !selectedPaymentCardDetails.CCLast4Digits">
                            </datePickerComponent>
                            <span v-else>{{getTodayDate()}}</span>
                          </div> -->
                    <div class="cell amt input-icon">
                      <i style="position: absolute;top: 57%;width: 15px;font-size: 13px;">$</i>
                      <input style="text-align:right" type="text" v-model="payment.Amount"
                        class="form-control in-text" />
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- End Of list -->

          </div>


          <!-- <table class="table table-bordered userTable folioTable mb-0"
              v-if="pendingPaymentDetails.length > 0 || Object.keys(paymentDetails).length > 0">
              <thead>
                <tr>
                  <th>PAYMENT TYPE</th>
                  <th>PAYMENT PROCESS</th>
                  <th>DATE</th>
                  <th style="text-align:right">AMOUNT</th>
                </tr>
              </thead>
              <tbody>
                <tr v-for="payment in paymentDetails">
                  <td style="position: relative">
                    <span v-if="payment.isManualMode" class="PaymentType">M</span>
                    <span v-if="payment.CCLast4Digits !== null">{{'XXXX-XXXX-XXXX-' + payment.CCLast4Digits}}</span>
                    <span v-else>{{payment.CardType}}</span>
                    <span v-if="payment.CardType != 'Cash'" :class="['cardType', payment.CardType]"></span>
                  </td>
                  <td>
                    <span>{{payment.PaymentStatusName}}</span><label @click="captureChargeOrRefund(payment)"
                      style="color:white !important;background-color:grey;width:20px">{{payment.NextPaymentStatusId}}</label>
                    
                  </td>
                  <td>
                    <span>{{formatDate(payment.PaymentDate)}}</span>
                  </td>
                  <td style="text-align: right">
                    <input style="text-align:right; float:right" type="text" v-model="payment.Amount" class="form-control"
                      v-if="payment.PaymentInfoId == -1" />
                    <span v-else>{{formatMoney(payment.Amount)}}</span>
  
                  </td>
                </tr>
                <tr v-for="payment in pendingPaymentDetails">
                  <td>
                    <div class="dropdown pull-left paymentDropDown">
                     
                      <button class="btn btn-default btn-sm dropdown-toggle  pull-left paymentInfo" data-toggle="dropdown"
                        style="border: 1px solid rgba(0, 0, 0, 0.22);     padding: 8px 12px; height: unset">
                        <span
                          v-if="selectedPaymentCardDetails && selectedPaymentCardDetails.CCLast4Digits">{{'XXXX-XXXX-XXXX-' + selectedPaymentCardDetails.CCLast4Digits}}</span>&nbsp;
                        <span
                          v-if="selectedPaymentCardDetails && !selectedPaymentCardDetails.CCLast4Digits">Cash</span>&nbsp;
                        <span v-if="!selectedPaymentCardDetails">Select payment option</span>
                        <i class="fas fa-caret-down"></i>
                      </button>
                      <ul class="dropdown-menu">
                        <li>
                          <div class="cardInfoSec" @click="selectPaymentDetails('cash')">
                            <span>Cash</span>
                            <br>
                          </div>
                        </li>
                        <li v-for="cardInfo in guestPaymentCards">
                          <div class="cardInfoSec" @click="selectPaymentDetails(cardInfo)">
                            <span v-text="cardInfo.NameOnCard"></span>
                            <br>
                            <span>{{'**** **** **** ' +cardInfo.CCLast4Digits}}</span>
                          </div>
                          <button @click="viewCurrentCardDetails(cardInfo)" v-if="false">
                            <i class="far fa-pen"></i>
                          </button>
                        </li>
                        <li v-if="guestPaymentCards.length == 0" @click="addPaymentDetails(true)">Add Payment Options</li>
                      </ul>
                    </div>
                  </td>
                  <td v-if="selectedPaymentCardDetails && selectedPaymentCardDetails.PaymentInfoId == 'Cash'">cash</td>
                  <td v-if="selectedPaymentCardDetails && selectedPaymentCardDetails.PaymentInfoId != 'Cash'">
                    <select v-model="paymentProcessMethod">
                      <option value="null">Select payment process</option>
                      <option v-for="paymentProcess in paymentProcessList" :value="paymentProcess.PaymentStatusID">
                        {{paymentProcess.PaymentStatusName}}</option>
                    </select>
                  </td>
                  <td v-else></td>
                  <td>
                    <span>{{getTodayDate()}}</span>
                  </td>
                  <td style="text-align:right">
                    <input style="text-align:right" type="text" v-model="payment.Amount" class="form-control" />
                  </td>
                </tr>
                <tr v-show="ShowDiv">
                  <td></td>
                  <td></td>
                </tr>
              </tbody>
            </table> -->
          <!-- <button type="button" class="btn btn-primary btn-sm" @click="showItems('displayAddPayment')">Add Payment</button> -->

          <span v-if="paymentCharges && paymentCharges.TotalAmount !== null"
            class="totalNumeric totalItems pull-right paymentTotal">
            <span>
              <span>
                <i v-if="isAccountConflict == 1" class="fa fa-circle" style="color:#ff9b00; margin-right: 5px;"
                  aria-hidden="true"></i>
              </span>Total: {{formatMoney(paymentCharges.TotalAmount)}}
            </span>
          </span>
        </div>

        <!-- Balance Transfer Invoice -->
        <div class="editContinerHeading click" @click="getBalananceTransferInvoiceDetails">
          <span class="mt-2">
            <i v-if="showBTInvoice" class="fa fa-chevron-down mr-2"></i>
            <i v-if="!showBTInvoice" class="fa fa-chevron-right mr-2"></i>
            <span>{{showTransferCount}} {{`${showBTFolioDetails ? 'Folio Details' : 'Transfers'}`}}</span>
            <button type="button" class="btn btn-primary btn-sm ml-2"
              v-if="guestInfo.CompanyProfileId && (['Reserved', 'Guaranteed', 'Confirmed', 'In-House', 'Departed'].includes(Reservation_Status.StatusName))"
              @click="getBalanceTransferFolioSummary()"><i class="fa fa-plus"></i> Add Transfer</button>
            <button type="button" class="btn btn-warning btn-sm ml-2"
              v-if="((selectAllInvocies && checkSelectedInvoices) || checkSelectedInvoices) && guestInfo.CompanyProfileId"
              @click="voidSelectedInvocies">Void</button>
            <button type="button" class="btn btn-blank-danger btn-sm ml-2"
              v-if="((selectAllInvocies && checkSelectedInvoices) || checkSelectedInvoices) && guestInfo.CompanyProfileId"
              @click="cancelInvocieVoid">Cancel</button>
          </span>
          <span v-if="folioCharges && folioCharges.TotalValue && folioCharges.TotalValue !== null"
            class="totalNumeric totalItems pull-right paymentNumeric"
            style="font-weight: 600 !important;font-size: 16px !important;">{{formatBalanceTransferAmount(showBTFolioDetails
            ? totalBalanceTransfer.total : folioCharges.BalanceTransfer)}}</span>
        </div>

        <div class="editFolioContiner addTransferDetails" :class="showBTFolioDetails ? 'invoiceFolioDetails' : ''"
          v-show="showBTInvoice">
          <div v-if="balanceTransferDetails.length > 0">
            <div class="dTable noMinW">
              <div class="dTHead">
                <div class="dCell"><label class="checkLabel"><input style="cursor: pointer;" type="checkbox"
                      v-model="selectAllInvocies" @change="selectInvoiceToVoid()" /></label></div>

                <div class="dCell">DATE</div>
                <div class="dCell" v-if="showBTFolioDetails">DESCRIPTION</div>
                <div class="dCell" v-else>INV. NO.</div>

                <div class="dCell" v-if="showBTFolioDetails" style="text-align: right;">AMOUNT</div>
                <div class="dCell" v-else>DESCRIPTION</div>

                <div class="dCell" style="text-align:right" v-if="showBTFolioDetails">TAX</div>
                <div class="dCell" v-else style="text-align: right;">BALANCE</div>

                <div class="dCell" style="text-align:right" v-if="showBTFolioDetails">TOTAL</div>
              </div>
              <!-- newFolio -->
              <div class="dTBody folioBody" v-if="!showBTFolioDetails">
                <!-- <div class="pdWrap"> -->
                <div class="dTBodyRow" :class="balanceTransferItem.ItemStatusId == 3 ? 'voidedFolio':'newFolio'"
                  v-for="(balanceTransferItem, index) in balanceTransferDetails"
                  v-if="balanceTransferItem.ItemStatusId != 3 || showBTVoidItems">
                  <div class="dCell">
                    <label class="checkLabel">
                      <input style="cursor: pointer;" type="checkbox" v-model="balanceTransferItem.isChecked"
                        @change="selectInvoiceToVoid(balanceTransferItem,$event)"
                        :disabled="balanceTransferItem.isvoided == 1 || balanceTransferItem.Payments != 0" />
                    </label>
                  </div>
                  <div class="dCell">{{formatDate(balanceTransferItem.DateEffective)}}</div>
                  <div class="dCell" style="text-decoration: underline; color: #0094ff;cursor: pointer;"
                    @click="redirectToCompanyProfile(balanceTransferItem.ItemId,balanceTransferItem.isvoided)">
                    {{balanceTransferItem.QuickbookInvoiceNo && balanceTransferItem.QuickbookInvoiceNo != null ?
                    balanceTransferItem.QuickbookInvoiceNo : balanceTransferItem.InvoiceNo}}</div>
                  <div class="dCell">{{balanceTransferItem.reservationTransferDescription}}</div>
                  <div class="dCell" style="text-align:right">{{formatMoney(balanceTransferItem.Amount)}}</div>
                </div>
                <!-- </div> -->

              </div>

              <div class="dTBody folioBody" v-if="showBTFolioDetails">
                <div class="dTBodyRow newFolio" v-for="(folioData, index) in balanceTransferInvoiceDetails">
                  <div class="dCell">
                    <label class="checkLabel">
                      <input style="cursor: pointer;" type="checkbox" />
                    </label>
                  </div>
                  <div class="dCell">{{formatDate(folioData.DateEffective)}}</div>
                  <div class="dCell">{{folioData.ItemDescription}}</div>
                  <div class="dCell" style="text-align:right">{{formatMoney(folioData.Amount)}}</div>
                  <div class="dCell" style="text-align:right">{{formatMoney(folioData.Tax)}}</div>
                  <div class="dCell" style="text-align:right">
                    {{formatMoney(getTotalAmount(folioData.Amount,folioData.Tax))}}</div>

                </div>

              </div>

            </div>

            <div class=" pull-left noClear ml-3 mt-1" v-if="balanceTransferDetails.length > 0">
              <label style="float:left;     margin: 4px 12px 0 0; font-size: 12px; color: #555555;">Show Void Items
              </label>
              <label class="slideCheck">
                <input type="checkbox" v-model="showBTVoidItems">
                <span></span>
              </label>
            </div>
            <div v-if="showBTVoidItems && !balanceTransferDetails.filter(item => item.isvoided).length"
              class="pull-left noClear ml-3 mt-1 errorMsg">
              <label>No void items to show</label>
            </div>

          </div>


        </div>
        <div class="editContinerFooter">
          <div class="d-flex justify-content-end">
            <span class="totalNumeric totalItems pull-right paymentTotal">
              <span></span>
              Balance: <span v-if="folioCharges.Balance !== null" class="balanceNumeric pull-right ml-1"
                v-text="formatMoney(folioCharges.Balance)" :class="checkBalanceColor(folioCharges.Balance)" style="font-weight: 600 !important;
              font-size: 16px !important;"></span>

              <!-- Balance: {{formatMoney(paymentCharges.TotalAmount)}}           -->
            </span>
          </div>
        </div>
        <!-- </div> -->

        <!-- <div class="editContinerHeading">
            <div v-if="!showPaymentDetails"> -->
        <!-- <div class="col-md-6" v-if="guestPaymentCards.length == 0">
              <button class="btn btn-primary btn-sm" @click="addPaymentDetails">Add Payment Details</button>
            </div> -->
        <!-- <div class="col-md-12"> -->
        <!-- <div class="form-control searchResultsAmenities">
                <ul>
                  <li v-for="cardInfo in guestPaymentCards" v-bind:value="cardInfo">{{cardInfo.cardNumber}}</li>
                </ul>
              </div> -->

        <!-- <button class="btn btn-success btn-sm pull-right" @click="makePayment" :disabled="pendingPaymentDetails.length === 0">Make Payment</button> -->
        <!-- </div> -->

        <!-- </div> -->


        <!-- </div> -->

      </section>

      <section v-if="showPaymentOptions">
        <div class="row" v-if="showPaymentList">
          <div class="col-md-12">
            <!-- <p v-if="guestPaymentCards.length == 0">No Payments options </p> -->
            <ul class="paymentList blank" v-if="guestPaymentCards.length == 0">
              <li @click="addPaymentDetails(false)">
                <i class="far fa-plus"></i>
                <br> Add Payment Options
              </li>
            </ul>
            <ul class="paymentList " v-if="guestPaymentCards.length > 0">
              <li v-for="card in guestPaymentCards" :class="card.disableSave ? 'inactive' : 'active'"
                @click="viewCurrentCardDetails(card)">
                <span class="ch-name">{{card.NameOnCard}}</span>
                <br>
                <span v-if="card.CCLast4Digits && card.CCLast4Digits !== null"> **** **** **** {{card.CCLast4Digits}}
                </span>

                <!-- <span v-if=" !visibleCC && defaultPaymentCard.CCLast4Digits && defaultPaymentCard.CCLast4Digits !== null"> **** **** **** {{defaultPaymentCard.CCLast4Digits}}</span>
                   <span v-if=" visibleCC && defaultPaymentCard.CreditCard && defaultPaymentCard.CreditCard !== null"> {{card.CreditCard}}</span>
                 
                    <i v-show="eyeicon"  class="fas fa-eye"  v-on:click="showingdetails()" ></i>
    -->

                <!-- <span class="cardImg visa"></span> -->
                <br> {{card.Expirationdate}}
                <!-- <span class="editPencil" @click="viewCurrentCardDetails(card)"></span>
                        <i class="fa fa-pencil" aria-hidden="true"></i>
                      </span> -->
                <span :class="['cardType', card.CardType]"></span>
              </li>
              <li @click="addPaymentDetails(false)" class="blank">
                <!-- <li  
                v-if="PaymentOption"  @click="addPaymentDetails" class="blank"> -->
                <i class="far fa-plus"></i>
                <br> Add More Payment Options
              </li>
            </ul>
          </div>
        </div>
        <div v-show="showPaymentbutton" class="row" v-if="showPaymentDetails">
          <!-- <div v-show="showPaymentbutton" class="row" v-if="PaymentOption && showPaymentDetails"></div> -->
          <div class="col-md-12">
            <h6 class="pull-left mt-2">Payment Details</h6>
            <!-- <button class="btn btn-danger btn-sm">Delete</button> -->
            <button class="btn btn-success btn-sm pull-right"
              :disabled="(fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) || disabledMultiSave || paymentCardInfo.disableSave"
              v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) "
              @click="getCardTokenBY">Save</button>
            <!-- savePaymentCardInfo -->
            <button class="btn btn-blank-danger btn-sm pull-right mr-2"
              :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
              v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) "
              @click="cancelPaymentCardInfo">Cancel</button>
          </div>
          <div class="col-md-12">
            <!-- <div class="form-group">
                <label class="form-label">Payment Method</label>
                <select
                  :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
                  v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) "
                  class="form-control" v-model="paymentCardInfo.PaymentTypeId">
                  <option>Select payment method</option>
                  <option v-for="ledgerItem in paymentLedgerAcounts" v-bind:value="ledgerItem.ledgerAccountID">
                    {{ledgerItem.PaymentMethod}}</option>
                </select>
              </div> -->
          </div>

          <div class="col-md-12">
            <div class="form-group">
              <label class="form-label">Card Number</label>
              <input @keyup="GetCardType(paymentCardInfo.CreditCard)" @blur="GetCardType(paymentCardInfo.CreditCard)"
                :disabled="(fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) || paymentCardInfo.PaymentInfoId != -1 "
                v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) "
                type="text" class="form-control" v-model.trim="paymentCardInfo.CreditCard">

              <div class="allPaymentCards">
                <!-- <span class="paycard disable-visa" :class="paymentCardInfo.CreditCard ? paymentCardInfo.CardType: ''"></span>
                  <span class="paycard disable-mc" :class="paymentCardInfo.CreditCard ? paymentCardInfo.CardType: ''"></span>
                  <span class="paycard disable-ae" :class="paymentCardInfo.CreditCard ? paymentCardInfo.CardType: ''"></span>
                  <span class="paycard disable-discover" :class="paymentCardInfo.CreditCard ? paymentCardInfo.CardType: ''"></span>
                  <span :class="paymentCardInfo.CreditCard ? paymentCardInfo.CardType: ''"></span> -->
                <span v-for="type in paymentLedgerAcounts" v-if="type.IsCreditcard" class="paycard"
                  :class="['disable-'+type.PaymentMethod ,paymentCardInfo.CreditCard || paymentCardInfo.CCLast4Digits ? paymentCardInfo.CardType: '']"></span>
              </div>

              <!-- <span v-if="paymentCardInfo.CreditCard" :class="['cardType',paymentCardType]" ></span> -->
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label class="form-label">Expiry Month</label>
              <select
                :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2) || (paymentCardInfo.disableSave)"
                v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) "
                class="form-control" v-model="paymentCardInfo.ExpirationMonth">
                <option value="-1">Month</option>
                <option v-for="month in months" :value="month.value">
                  {{month.name}}
                </option>
              </select>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label class="form-label">Expiry Year</label>
              <select
                :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2) || (paymentCardInfo.disableSave)"
                v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) "
                class="form-control" v-model="paymentCardInfo.ExpirationYear">
                <option value="-1">Year</option>
                <option v-for="year in expiryYears" :value="year">
                  {{year}}
                </option>
              </select>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label class="form-label">CVV</label>
              <input
                :disabled="(fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) || (paymentCardInfo.disableSave)"
                v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) "
                type="text" class="form-control password" v-model="paymentCardInfo.CvvCode">
            </div>
          </div>
          <div class="col-md-12">
            <div class="form-group">
              <label class="form-label">Name on Card</label>
              <input
                :disabled="(fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) || paymentCardInfo.PaymentInfoId != -1"
                v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) "
                type="text" class="form-control" v-model="paymentCardInfo.NameOnCard">
            </div>
          </div>
          <div class="col-md-12" @click="showAddressAndZipcode">
            <span class="moreLink pull-right mr-2">More Info</span>
          </div>
          <div class="col-md-12" v-if="addressAndZipcodeShow">
            <div class="form-group">
              <label class="form-label">Address</label>
              <input
                :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2) || (paymentCardInfo.disableSave)"
                v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) "
                type="text" class="form-control" v-model="paymentCardInfo.AddressDetails">
            </div>
          </div>
          <div class="col-md-12" v-if="addressAndZipcodeShow">
            <div class="form-group">
              <label class="form-label">Zip Code</label>
              <input
                :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)|| (paymentCardInfo.disableSave)"
                v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) "
                type="text" class="form-control" v-model="paymentCardInfo.PostalCode">
            </div>
          </div>
          <div class="col-md-12">
            <div class=" pull-left noClear">
              <label class="slideCheck">
                <input type="checkbox" v-model="paymentCardInfo.IsDefault" :disabled="paymentCardInfo.disableSave" />
                <span></span>
              </label>
              <label style="float: left; margin: 5px 12px 0px 10px; font-size: 12px; color: rgb(134, 134, 134);">Set As
                Default Payment Option</label>
            </div>

          </div>
          <div class="col-md-12">
            <div class=" pull-left noClear">
              <label class="slideCheck">
                <input type="checkbox" v-model="paymentCardInfo.DefaultSettingforSyncCardDetails"
                  :disabled="paymentCardInfo.disableSave" />
                <span></span>
              </label>
              <label style="float: left; margin: 5px 12px 0px 10px; font-size: 12px; color: rgb(134, 134, 134);">Sync
                Card to Guest Profile</label>
            </div>
          </div>
          <!-- <div class="col-md-12">
              <div class=" pull-left noClear">
                <label class="slideCheck">
                  <input type="checkbox" v-model="paymentCardInfo.DefaultSettingforSyncCompanyCardDetails" :disabled="paymentCardInfo.disableSave" />
                  <span></span>
                </label>
                <label style="float: left; margin: 5px 12px 0px 10px; font-size: 12px; color: rgb(134, 134, 134);">Sync Card to Company Profile</label>
              </div>
            </div> -->

        </div>
      </section>

      <section v-if="displaySectionValue === 'reservation4'">
        <button style="position: absolute; right: 110px; top: 19px;" type="button" class="btn btn-blank-danger btn-sm"
          :disabled="fncIsNotesSave && (fncIsNotesSave.isAssigned === -1 && fncIsNotesSave.functionState === 2)"
          v-if="fncIsNotesSave && (fncIsNotesSave.isAssigned === 1 || (fncIsNotesSave.isAssigned === -1 && fncIsNotesSave.functionState === 2)) && notesDetailById && notesDetailById.noteTypeId !== 9"
          @click="CancelNotes">Cancel</button>
        <div class="row">
          <div class="col-md-12">
            <div class="form-group">
              <label>Notes Type</label>
              <select
                :disabled="((fncIsNotesSave && (fncIsNotesSave.isAssigned === -1 && fncIsNotesSave.functionState === 2)) || notesDetailById.noteStatusId == 2 || (selectedNote && selectedNote.noteTypeId === 9))"
                v-if="fncIsNotesSave && (fncIsNotesSave.isAssigned === 1 || (fncIsNotesSave.isAssigned === -1 && fncIsNotesSave.functionState === 2)) "
                name="unitClass" class="form-control" v-model="notesDetailById.noteTypeId" v-validate="'required'"
                @focus="setFouce(notesDetailById.noteId)">
                <option v-for="noteType in notesTypeDropdown" :value="noteType.noteTypeId"
                  :disabled="noteType.noteTypeId === 9">{{noteType.noteTypeName}}
                </option>
              </select>
            </div>
          </div>
          <div class="col-md-12">
            <div class="form-group">
              <label>Subject</label>
              <input
                :disabled="(selectedNote && selectedNote.noteTypeId === 9) || (fncIsNotesSave && fncIsNotesSave.isAssigned === -1 && fncIsNotesSave.functionState === 2)"
                v-if="fncIsNotesSave && (fncIsNotesSave.isAssigned === 1 || (fncIsNotesSave.isAssigned === -1 && fncIsNotesSave.functionState === 2))"
                type="text" class="form-control" :class="allowEdit ? 'notesOpacity' : ''"
                @focus="setFouce(notesDetailById.noteId)" @keyup="enteredNotes" autocomplete="off" id="subject"
                name="subject" v-model="notesDetailById.noteSubject">
            </div>
          </div>

          <div class="col-md-12">
            <div class="form-group">
              <label v-if="notesDetailById.noteTypeId != 9">Details</label>
              <textarea
                :disabled="fncIsNotesSave && (fncIsNotesSave.isAssigned === -1 && fncIsNotesSave.functionState === 2)"
                v-if="notesDetailById.noteTypeId != 9 && fncIsNotesSave && (fncIsNotesSave.isAssigned === 1 || (fncIsNotesSave.isAssigned === -1 && fncIsNotesSave.functionState === 2)) "
                class="form-control" :class="allowEdit ? 'notesOpacity' : ''" name="Details"
                @focus="setFouce(notesDetailById.noteId)" v-model="notesDetailById.noteDetails"></textarea>

              <!-- <button v-if="selectedNote.noteTypeId === 9" title="" type="button" class="btn btn-default dropdown-toggle  btn-sm btn-sm-icon" @click="downloadDocuSign(notesDetailById)"><i class="fas fa-download"></i></button> -->


            </div>
          </div>
          <div class="col-md-12" v-if="notesDetailById.noteTypeId != 9">
            <div class="form-group">
              <label class="checkLabel">
                <input type="checkbox" v-model="notesDetailById.isActionReqd" @focus="setFouce(notesDetailById.noteId)"
                  :class="allowEdit ? 'notesOpacity' : ''" />
                <span :class="allowEdit ? 'notesOpacity' : ''">Action Required</span>
              </label>

            </div>
          </div>


          <div class="col-md-12" v-show="notesDetailById.isActionReqd">
            <div class="form-group">
              <label>Due Date</label>
              <datePickerComponent sourceFormat="'YYYY-MM-DD'" @focus="setFouce(notesDetailById.noteId)"
                :class="allowEdit ? 'notesOpacity' : ''"
                :isDisabled="fncIsNotesSave && (fncIsNotesSave.isAssigned === -1 && fncIsNotesSave.functionState === 2)"
                v-if="fncIsNotesSave && (fncIsNotesSave.isAssigned === 1 || (fncIsNotesSave.isAssigned === -1 && fncIsNotesSave.functionState === 2)) "
                id="dueDate" v-model="notesDetailById.dateOrTimeDue" :onUpdate="updateDueDate" :format="'Do MMM YYYY'"
                :pickerType="'date'"></datePickerComponent>
            </div>
          </div>
          <div class="col-md-12" v-show="(notesDetailById.isActionReqd && notesDetailById.noteTypeId == '2')">
            <div class="form-group">
              <label>Task Type</label>
              <select
                :disabled="fncIsNotesSave && (fncIsNotesSave.isAssigned === -1 && fncIsNotesSave.functionState === 2)"
                @focus="setFouce(notesDetailById.noteId)"
                v-if="fncIsNotesSave && (fncIsNotesSave.isAssigned === 1 || (fncIsNotesSave.isAssigned === -1 && fncIsNotesSave.functionState === 2))"
                name="unitClass" class="form-control" :class="allowEdit ? 'notesOpacity' : ''" @change="getNoteSubject"
                @click="getNoteSubject" v-model="notesDetailById.taskTypeId" v-validate="'required'">
                <option v-for="taskType in taskTypeDropdown" :value="taskType.taskTypeId">{{taskType.taskTypeDesc}}
                </option>
              </select>
            </div>
          </div>
          <!-- <div class="col-md-12" v-show="notesDetailById.isActionReqd">
              <div class="form-group">
                <label>Time</label>
                <select name="Time" class="form-control" v-validate="'required'">
                  <option></option>
                </select>
              </div>
            </div> -->
          <div class="col-md-12">
            <!-- <button type="button" class="btn btn-primary btn-sm" @click="saveNotesDetails(notesDetailById.noteId)" :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
                v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) ">Save</button> -->
          </div>
        </div>

      </section>

      <section v-if="displaySectionValue === 'declineRequestReservation' && showdeclineRequestReservation">


        <reservationDeclineComponent :lastMessageObject="lastMessageObject"
          @cancelRequestDeclineActionVal="cancelRequestDeclineAction" :declineReasonsList="declineReasonsList">
        </reservationDeclineComponent>


      </section>
    </div>
    <!-- <transition name="modal-fade">
      <div class="modal-backdrop">
          <div class="modal" id="SendQuote">
                    <div class="modal-header">
                      <h5 class="modal-title">Select BE & Send Quote</h5>
                      <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                  
                    <div class="modal-body">
                        <select class="form-control">
                            <option>BE One</option>
                        </select>
                    </div>
  
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary">Send</button>
                    </div>
          </div>
      </div>
      </transition> -->

    <div id="app" class="folioSurchage">
      <foliomodal v-show="isModalVisible" @close="folioRecalculateCloseModal" :params="modalParams" />
    </div>

    <div id="app" class="folioSurchage balanceTransferPopup">
      <balanceTransferModal v-show="isBalanceTransferModalVisible" :params="modalParams"
        :getFolioSummaryCallback="getBalanceTransferFolioSummary" />
    </div>

    <div id="app" class="folioSurchage balanceTransferPopup folioSettingsPopup">
      <folioSettingModal v-show="showSettingModal" :params="modalParams" />
    </div>


    <!-- <template v-show="isModalVisible">
          <transition name="modal-fade">
              <div class="modal-backdrop tcgridModal" v-show="isModalVisible">
                  <div class="modal" role="dialog" aria-labelledby="modalTitle" aria-describedby="modalDescription">
  
                      <button type="button" class="btn-close" @click="close" aria-label="Close modal">
                          <i class="fal fa-times"></i>
                      </button>
                      <section class="modal-body" id="modalDescription">
                          <slot name="body">
                              <div class="col-md-4">
                                  <div class="form-group">
                                      <select class="form-control" v-model="guestInfo.SourceId" @change="GetSubSourceList(guestInfo.SourceId)" style="margin: -5px 0;">
                                        <option v-for="source in sourceList" v-bind:value="source.sourceID">{{source.sourceName}}</option>
                                      </select>
                                  </div>
                                  <div class="form-group">
                                      <select class="form-control" v-model="guestInfo.SubSourceId" @change="getSubSourceName(guestInfo.SubSourceId)" style="margin: -5px 0;">
                                        <option v-for="subSource in subSourceList" v-bind:value="subSource.SubSourceId">{{subSource.SubSourceName}}</option>
                                      </select>
                                  </div>
                                <div class="form-group">
                                  <input type="text" class="form-control" v-model="guestInfo.ReservationNumber"
                                    :class="{'input': true, 'is-danger': errors.has('irstName') }" :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
                                    v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) ">
                    
                                </div>
                                <div class="form-group">
                                    <input type="text" class="form-control" v-model="guestInfo.CrsConfirmationNumber"
                                      :class="{'input': true, 'is-danger': errors.has('irstName') }" :disabled="fncIsReservationSave && (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)"
                                      v-if="fncIsReservationSave && (fncIsReservationSave.isAssigned === 1 || (fncIsReservationSave.isAssigned === -1 && fncIsReservationSave.functionState === 2)) ">
                      
                                  </div>
                              </div>
                          </slot>
                      </section>
                      <footer class="modal-footer" style="display: none;">
                          <slot name="footer">
                              
  
                              <button type="button" @click="Save_SourceDetails">Save</button>
                          </slot>
                      </footer>
                  </div>
              </div>
          </transition>
      </template> -->

  </div>



</div>